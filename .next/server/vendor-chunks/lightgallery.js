"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/lightgallery";
exports.ids = ["vendor-chunks/lightgallery"];
exports.modules = {

/***/ "(ssr)/./node_modules/lightgallery/plugins/thumbnail/lg-thumbnail.es5.js":
/*!*************************************************************************!*\
  !*** ./node_modules/lightgallery/plugins/thumbnail/lg-thumbnail.es5.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*!\n * lightgallery | 2.7.2 | September 20th 2023\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */ /*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */ var __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar thumbnailsSettings = {\n    thumbnail: true,\n    animateThumb: true,\n    currentPagerPosition: \"middle\",\n    alignThumbnails: \"middle\",\n    thumbWidth: 100,\n    thumbHeight: \"80px\",\n    thumbMargin: 5,\n    appendThumbnailsTo: \".lg-components\",\n    toggleThumb: false,\n    enableThumbDrag: true,\n    enableThumbSwipe: true,\n    thumbnailSwipeThreshold: 10,\n    loadYouTubeThumbnail: true,\n    youTubeThumbSize: 1,\n    thumbnailPluginStrings: {\n        toggleThumbnails: \"Toggle thumbnails\"\n    }\n};\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */ var lGEvents = {\n    afterAppendSlide: \"lgAfterAppendSlide\",\n    init: \"lgInit\",\n    hasVideo: \"lgHasVideo\",\n    containerResize: \"lgContainerResize\",\n    updateSlides: \"lgUpdateSlides\",\n    afterAppendSubHtml: \"lgAfterAppendSubHtml\",\n    beforeOpen: \"lgBeforeOpen\",\n    afterOpen: \"lgAfterOpen\",\n    slideItemLoad: \"lgSlideItemLoad\",\n    beforeSlide: \"lgBeforeSlide\",\n    afterSlide: \"lgAfterSlide\",\n    posterClick: \"lgPosterClick\",\n    dragStart: \"lgDragStart\",\n    dragMove: \"lgDragMove\",\n    dragEnd: \"lgDragEnd\",\n    beforeNextSlide: \"lgBeforeNextSlide\",\n    beforePrevSlide: \"lgBeforePrevSlide\",\n    beforeClose: \"lgBeforeClose\",\n    afterClose: \"lgAfterClose\",\n    rotateLeft: \"lgRotateLeft\",\n    rotateRight: \"lgRotateRight\",\n    flipHorizontal: \"lgFlipHorizontal\",\n    flipVertical: \"lgFlipVertical\",\n    autoplay: \"lgAutoplay\",\n    autoplayStart: \"lgAutoplayStart\",\n    autoplayStop: \"lgAutoplayStop\"\n};\nvar Thumbnail = /** @class */ function() {\n    function Thumbnail(instance, $LG) {\n        this.thumbOuterWidth = 0;\n        this.thumbTotalWidth = 0;\n        this.translateX = 0;\n        this.thumbClickable = false;\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n        return this;\n    }\n    Thumbnail.prototype.init = function() {\n        // extend module default settings with lightGallery core settings\n        this.settings = __assign(__assign({}, thumbnailsSettings), this.core.settings);\n        this.thumbOuterWidth = 0;\n        this.thumbTotalWidth = this.core.galleryItems.length * (this.settings.thumbWidth + this.settings.thumbMargin);\n        // Thumbnail animation value\n        this.translateX = 0;\n        this.setAnimateThumbStyles();\n        if (!this.core.settings.allowMediaOverlap) {\n            this.settings.toggleThumb = false;\n        }\n        if (this.settings.thumbnail) {\n            this.build();\n            if (this.settings.animateThumb) {\n                if (this.settings.enableThumbDrag) {\n                    this.enableThumbDrag();\n                }\n                if (this.settings.enableThumbSwipe) {\n                    this.enableThumbSwipe();\n                }\n                this.thumbClickable = false;\n            } else {\n                this.thumbClickable = true;\n            }\n            this.toggleThumbBar();\n            this.thumbKeyPress();\n        }\n    };\n    Thumbnail.prototype.build = function() {\n        var _this = this;\n        this.setThumbMarkup();\n        this.manageActiveClassOnSlideChange();\n        this.$lgThumb.first().on(\"click.lg touchend.lg\", function(e) {\n            var $target = _this.$LG(e.target);\n            if (!$target.hasAttribute(\"data-lg-item-id\")) {\n                return;\n            }\n            setTimeout(function() {\n                // In IE9 and bellow touch does not support\n                // Go to slide if browser does not support css transitions\n                if (_this.thumbClickable && !_this.core.lgBusy) {\n                    var index = parseInt($target.attr(\"data-lg-item-id\"));\n                    _this.core.slide(index, false, true, false);\n                }\n            }, 50);\n        });\n        this.core.LGel.on(lGEvents.beforeSlide + \".thumb\", function(event) {\n            var index = event.detail.index;\n            _this.animateThumb(index);\n        });\n        this.core.LGel.on(lGEvents.beforeOpen + \".thumb\", function() {\n            _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\n        });\n        this.core.LGel.on(lGEvents.updateSlides + \".thumb\", function() {\n            _this.rebuildThumbnails();\n        });\n        this.core.LGel.on(lGEvents.containerResize + \".thumb\", function() {\n            if (!_this.core.lgOpened) return;\n            setTimeout(function() {\n                _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\n                _this.animateThumb(_this.core.index);\n                _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\n            }, 50);\n        });\n    };\n    Thumbnail.prototype.setThumbMarkup = function() {\n        var thumbOuterClassNames = \"lg-thumb-outer \";\n        if (this.settings.alignThumbnails) {\n            thumbOuterClassNames += \"lg-thumb-align-\" + this.settings.alignThumbnails;\n        }\n        var html = '<div class=\"' + thumbOuterClassNames + '\">\\n        <div class=\"lg-thumb lg-group\">\\n        </div>\\n        </div>';\n        this.core.outer.addClass(\"lg-has-thumb\");\n        if (this.settings.appendThumbnailsTo === \".lg-components\") {\n            this.core.$lgComponents.append(html);\n        } else {\n            this.core.outer.append(html);\n        }\n        this.$thumbOuter = this.core.outer.find(\".lg-thumb-outer\").first();\n        this.$lgThumb = this.core.outer.find(\".lg-thumb\").first();\n        if (this.settings.animateThumb) {\n            this.core.outer.find(\".lg-thumb\").css(\"transition-duration\", this.core.settings.speed + \"ms\").css(\"width\", this.thumbTotalWidth + \"px\").css(\"position\", \"relative\");\n        }\n        this.setThumbItemHtml(this.core.galleryItems);\n    };\n    Thumbnail.prototype.enableThumbDrag = function() {\n        var _this = this;\n        var thumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0\n        };\n        var isDragging = false;\n        this.$thumbOuter.addClass(\"lg-grab\");\n        this.core.outer.find(\".lg-thumb\").first().on(\"mousedown.lg.thumb\", function(e) {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n                // execute only on .lg-object\n                e.preventDefault();\n                thumbDragUtils.cords.startX = e.pageX;\n                thumbDragUtils.startTime = new Date();\n                _this.thumbClickable = false;\n                isDragging = true;\n                // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                _this.core.outer.get().scrollLeft += 1;\n                _this.core.outer.get().scrollLeft -= 1;\n                // *\n                _this.$thumbOuter.removeClass(\"lg-grab\").addClass(\"lg-grabbing\");\n            }\n        });\n        this.$LG(window).on(\"mousemove.lg.thumb.global\" + this.core.lgId, function(e) {\n            if (!_this.core.lgOpened) return;\n            if (isDragging) {\n                thumbDragUtils.cords.endX = e.pageX;\n                thumbDragUtils = _this.onThumbTouchMove(thumbDragUtils);\n            }\n        });\n        this.$LG(window).on(\"mouseup.lg.thumb.global\" + this.core.lgId, function() {\n            if (!_this.core.lgOpened) return;\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = _this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                _this.thumbClickable = true;\n            }\n            if (isDragging) {\n                isDragging = false;\n                _this.$thumbOuter.removeClass(\"lg-grabbing\").addClass(\"lg-grab\");\n            }\n        });\n    };\n    Thumbnail.prototype.enableThumbSwipe = function() {\n        var _this = this;\n        var thumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0\n        };\n        this.$lgThumb.on(\"touchstart.lg\", function(e) {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.startX = e.targetTouches[0].pageX;\n                _this.thumbClickable = false;\n                thumbDragUtils.startTime = new Date();\n            }\n        });\n        this.$lgThumb.on(\"touchmove.lg\", function(e) {\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.endX = e.targetTouches[0].pageX;\n                thumbDragUtils = _this.onThumbTouchMove(thumbDragUtils);\n            }\n        });\n        this.$lgThumb.on(\"touchend.lg\", function() {\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = _this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                _this.thumbClickable = true;\n            }\n        });\n    };\n    // Rebuild thumbnails\n    Thumbnail.prototype.rebuildThumbnails = function() {\n        var _this = this;\n        // Remove transitions\n        this.$thumbOuter.addClass(\"lg-rebuilding-thumbnails\");\n        setTimeout(function() {\n            _this.thumbTotalWidth = _this.core.galleryItems.length * (_this.settings.thumbWidth + _this.settings.thumbMargin);\n            _this.$lgThumb.css(\"width\", _this.thumbTotalWidth + \"px\");\n            _this.$lgThumb.empty();\n            _this.setThumbItemHtml(_this.core.galleryItems);\n            _this.animateThumb(_this.core.index);\n        }, 50);\n        setTimeout(function() {\n            _this.$thumbOuter.removeClass(\"lg-rebuilding-thumbnails\");\n        }, 200);\n    };\n    // @ts-check\n    Thumbnail.prototype.setTranslate = function(value) {\n        this.$lgThumb.css(\"transform\", \"translate3d(-\" + value + \"px, 0px, 0px)\");\n    };\n    Thumbnail.prototype.getPossibleTransformX = function(left) {\n        if (left > this.thumbTotalWidth - this.thumbOuterWidth) {\n            left = this.thumbTotalWidth - this.thumbOuterWidth;\n        }\n        if (left < 0) {\n            left = 0;\n        }\n        return left;\n    };\n    Thumbnail.prototype.animateThumb = function(index) {\n        this.$lgThumb.css(\"transition-duration\", this.core.settings.speed + \"ms\");\n        if (this.settings.animateThumb) {\n            var position = 0;\n            switch(this.settings.currentPagerPosition){\n                case \"left\":\n                    position = 0;\n                    break;\n                case \"middle\":\n                    position = this.thumbOuterWidth / 2 - this.settings.thumbWidth / 2;\n                    break;\n                case \"right\":\n                    position = this.thumbOuterWidth - this.settings.thumbWidth;\n            }\n            this.translateX = (this.settings.thumbWidth + this.settings.thumbMargin) * index - 1 - position;\n            if (this.translateX > this.thumbTotalWidth - this.thumbOuterWidth) {\n                this.translateX = this.thumbTotalWidth - this.thumbOuterWidth;\n            }\n            if (this.translateX < 0) {\n                this.translateX = 0;\n            }\n            this.setTranslate(this.translateX);\n        }\n    };\n    Thumbnail.prototype.onThumbTouchMove = function(thumbDragUtils) {\n        thumbDragUtils.newTranslateX = this.translateX;\n        thumbDragUtils.isMoved = true;\n        thumbDragUtils.touchMoveTime = new Date().valueOf();\n        thumbDragUtils.newTranslateX -= thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n        thumbDragUtils.newTranslateX = this.getPossibleTransformX(thumbDragUtils.newTranslateX);\n        // move current slide\n        this.setTranslate(thumbDragUtils.newTranslateX);\n        this.$thumbOuter.addClass(\"lg-dragging\");\n        return thumbDragUtils;\n    };\n    Thumbnail.prototype.onThumbTouchEnd = function(thumbDragUtils) {\n        thumbDragUtils.isMoved = false;\n        thumbDragUtils.endTime = new Date();\n        this.$thumbOuter.removeClass(\"lg-dragging\");\n        var touchDuration = thumbDragUtils.endTime.valueOf() - thumbDragUtils.startTime.valueOf();\n        var distanceXnew = thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n        var speedX = Math.abs(distanceXnew) / touchDuration;\n        // Some magical numbers\n        // Can be improved\n        if (speedX > 0.15 && thumbDragUtils.endTime.valueOf() - thumbDragUtils.touchMoveTime < 30) {\n            speedX += 1;\n            if (speedX > 2) {\n                speedX += 1;\n            }\n            speedX = speedX + speedX * (Math.abs(distanceXnew) / this.thumbOuterWidth);\n            this.$lgThumb.css(\"transition-duration\", Math.min(speedX - 1, 2) + \"settings\");\n            distanceXnew = distanceXnew * speedX;\n            this.translateX = this.getPossibleTransformX(this.translateX - distanceXnew);\n            this.setTranslate(this.translateX);\n        } else {\n            this.translateX = thumbDragUtils.newTranslateX;\n        }\n        if (Math.abs(thumbDragUtils.cords.endX - thumbDragUtils.cords.startX) < this.settings.thumbnailSwipeThreshold) {\n            this.thumbClickable = true;\n        }\n        return thumbDragUtils;\n    };\n    Thumbnail.prototype.getThumbHtml = function(thumb, index, alt) {\n        var slideVideoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\n        var thumbImg;\n        if (slideVideoInfo.youtube) {\n            if (this.settings.loadYouTubeThumbnail) {\n                thumbImg = \"//img.youtube.com/vi/\" + slideVideoInfo.youtube[1] + \"/\" + this.settings.youTubeThumbSize + \".jpg\";\n            } else {\n                thumbImg = thumb;\n            }\n        } else {\n            thumbImg = thumb;\n        }\n        var altAttr = alt ? 'alt=\"' + alt + '\"' : \"\";\n        return '<div data-lg-item-id=\"' + index + '\" class=\"lg-thumb-item ' + (index === this.core.index ? \" active\" : \"\") + '\"\\n        style=\"width:' + this.settings.thumbWidth + \"px; height: \" + this.settings.thumbHeight + \";\\n            margin-right: \" + this.settings.thumbMargin + 'px;\">\\n            <img ' + altAttr + ' data-lg-item-id=\"' + index + '\" src=\"' + thumbImg + '\" />\\n        </div>';\n    };\n    Thumbnail.prototype.getThumbItemHtml = function(items) {\n        var thumbList = \"\";\n        for(var i = 0; i < items.length; i++){\n            thumbList += this.getThumbHtml(items[i].thumb, i, items[i].alt);\n        }\n        return thumbList;\n    };\n    Thumbnail.prototype.setThumbItemHtml = function(items) {\n        var thumbList = this.getThumbItemHtml(items);\n        this.$lgThumb.html(thumbList);\n    };\n    Thumbnail.prototype.setAnimateThumbStyles = function() {\n        if (this.settings.animateThumb) {\n            this.core.outer.addClass(\"lg-animate-thumb\");\n        }\n    };\n    // Manage thumbnail active calss\n    Thumbnail.prototype.manageActiveClassOnSlideChange = function() {\n        var _this = this;\n        // manage active class for thumbnail\n        this.core.LGel.on(lGEvents.beforeSlide + \".thumb\", function(event) {\n            var $thumb = _this.core.outer.find(\".lg-thumb-item\");\n            var index = event.detail.index;\n            $thumb.removeClass(\"active\");\n            $thumb.eq(index).addClass(\"active\");\n        });\n    };\n    // Toggle thumbnail bar\n    Thumbnail.prototype.toggleThumbBar = function() {\n        var _this = this;\n        if (this.settings.toggleThumb) {\n            this.core.outer.addClass(\"lg-can-toggle\");\n            this.core.$toolbar.append('<button type=\"button\" aria-label=\"' + this.settings.thumbnailPluginStrings[\"toggleThumbnails\"] + '\" class=\"lg-toggle-thumb lg-icon\"></button>');\n            this.core.outer.find(\".lg-toggle-thumb\").first().on(\"click.lg\", function() {\n                _this.core.outer.toggleClass(\"lg-components-open\");\n            });\n        }\n    };\n    Thumbnail.prototype.thumbKeyPress = function() {\n        var _this = this;\n        this.$LG(window).on(\"keydown.lg.thumb.global\" + this.core.lgId, function(e) {\n            if (!_this.core.lgOpened || !_this.settings.toggleThumb) return;\n            if (e.keyCode === 38) {\n                e.preventDefault();\n                _this.core.outer.addClass(\"lg-components-open\");\n            } else if (e.keyCode === 40) {\n                e.preventDefault();\n                _this.core.outer.removeClass(\"lg-components-open\");\n            }\n        });\n    };\n    Thumbnail.prototype.destroy = function() {\n        if (this.settings.thumbnail) {\n            this.$LG(window).off(\".lg.thumb.global\" + this.core.lgId);\n            this.core.LGel.off(\".lg.thumb\");\n            this.core.LGel.off(\".thumb\");\n            this.$thumbOuter.remove();\n            this.core.outer.removeClass(\"lg-has-thumb\");\n        }\n    };\n    return Thumbnail;\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Thumbnail); //# sourceMappingURL=lg-thumbnail.es5.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3BsdWdpbnMvdGh1bWJuYWlsL2xnLXRodW1ibmFpbC5lczUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7OztDQUtDLEdBRUQ7Ozs7Ozs7Ozs7Ozs7OEVBYThFLEdBRTlFLElBQUlBLFdBQVc7SUFDWEEsV0FBV0MsT0FBT0MsTUFBTSxJQUFJLFNBQVNGLFNBQVNHLENBQUM7UUFDM0MsSUFBSyxJQUFJQyxHQUFHQyxJQUFJLEdBQUdDLElBQUlDLFVBQVVDLE1BQU0sRUFBRUgsSUFBSUMsR0FBR0QsSUFBSztZQUNqREQsSUFBSUcsU0FBUyxDQUFDRixFQUFFO1lBQ2hCLElBQUssSUFBSUksS0FBS0wsRUFBRyxJQUFJSCxPQUFPUyxTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDUixHQUFHSyxJQUFJTixDQUFDLENBQUNNLEVBQUUsR0FBR0wsQ0FBQyxDQUFDSyxFQUFFO1FBQ2hGO1FBQ0EsT0FBT047SUFDWDtJQUNBLE9BQU9ILFNBQVNhLEtBQUssQ0FBQyxJQUFJLEVBQUVOO0FBQ2hDO0FBRUEsSUFBSU8scUJBQXFCO0lBQ3JCQyxXQUFXO0lBQ1hDLGNBQWM7SUFDZEMsc0JBQXNCO0lBQ3RCQyxpQkFBaUI7SUFDakJDLFlBQVk7SUFDWkMsYUFBYTtJQUNiQyxhQUFhO0lBQ2JDLG9CQUFvQjtJQUNwQkMsYUFBYTtJQUNiQyxpQkFBaUI7SUFDakJDLGtCQUFrQjtJQUNsQkMseUJBQXlCO0lBQ3pCQyxzQkFBc0I7SUFDdEJDLGtCQUFrQjtJQUNsQkMsd0JBQXdCO1FBQ3BCQyxrQkFBa0I7SUFDdEI7QUFDSjtBQUVBOzs7O0dBSUcsR0FDSCxJQUFJQyxXQUFXO0lBQ1hDLGtCQUFrQjtJQUNsQkMsTUFBTTtJQUNOQyxVQUFVO0lBQ1ZDLGlCQUFpQjtJQUNqQkMsY0FBYztJQUNkQyxvQkFBb0I7SUFDcEJDLFlBQVk7SUFDWkMsV0FBVztJQUNYQyxlQUFlO0lBQ2ZDLGFBQWE7SUFDYkMsWUFBWTtJQUNa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SUFBSSxDQUFDYixJQUFJLENBQUMwRCxJQUFJLEVBQUUsU0FBVTVDLENBQUM7WUFDdkUsSUFBSSxDQUFDTixNQUFNUixJQUFJLENBQUMrQixRQUFRLElBQUksQ0FBQ3ZCLE1BQU1QLFFBQVEsQ0FBQzNDLFdBQVcsRUFDbkQ7WUFDSixJQUFJd0QsRUFBRTRFLE9BQU8sS0FBSyxJQUFJO2dCQUNsQjVFLEVBQUV1QyxjQUFjO2dCQUNoQjdDLE1BQU1SLElBQUksQ0FBQzJCLEtBQUssQ0FBQ08sUUFBUSxDQUFDO1lBQzlCLE9BQ0ssSUFBSXBCLEVBQUU0RSxPQUFPLEtBQUssSUFBSTtnQkFDdkI1RSxFQUFFdUMsY0FBYztnQkFDaEI3QyxNQUFNUixJQUFJLENBQUMyQixLQUFLLENBQUM2QixXQUFXLENBQUM7WUFDakM7UUFDSjtJQUNKO0lBQ0EvRCxVQUFVaEQsU0FBUyxDQUFDa0osT0FBTyxHQUFHO1FBQzFCLElBQUksSUFBSSxDQUFDMUYsUUFBUSxDQUFDbkQsU0FBUyxFQUFFO1lBQ3pCLElBQUksQ0FBQzZDLEdBQUcsQ0FBQzhELFFBQVFtQyxHQUFHLENBQUMscUJBQXFCLElBQUksQ0FBQzVGLElBQUksQ0FBQzBELElBQUk7WUFDeEQsSUFBSSxDQUFDMUQsSUFBSSxDQUFDd0IsSUFBSSxDQUFDb0UsR0FBRyxDQUFDO1lBQ25CLElBQUksQ0FBQzVGLElBQUksQ0FBQ3dCLElBQUksQ0FBQ29FLEdBQUcsQ0FBQztZQUNuQixJQUFJLENBQUN2RCxXQUFXLENBQUN3RCxNQUFNO1lBQ3ZCLElBQUksQ0FBQzdGLElBQUksQ0FBQzJCLEtBQUssQ0FBQzZCLFdBQVcsQ0FBQztRQUNoQztJQUNKO0lBQ0EsT0FBTy9EO0FBQ1g7QUFFQSxpRUFBZUEsU0FBU0EsRUFBQyxDQUN6Qiw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJ0ZnVyeV9yZWFjdC8uL25vZGVfbW9kdWxlcy9saWdodGdhbGxlcnkvcGx1Z2lucy90aHVtYm5haWwvbGctdGh1bWJuYWlsLmVzNS5qcz9mM2Q4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogbGlnaHRnYWxsZXJ5IHwgMi43LjIgfCBTZXB0ZW1iZXIgMjB0aCAyMDIzXG4gKiBodHRwOi8vd3d3LmxpZ2h0Z2FsbGVyeWpzLmNvbS9cbiAqIENvcHlyaWdodCAoYykgMjAyMCBTYWNoaW4gTmVyYXZhdGg7XG4gKiBAbGljZW5zZSBHUEx2M1xuICovXG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG52YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xuXG52YXIgdGh1bWJuYWlsc1NldHRpbmdzID0ge1xyXG4gICAgdGh1bWJuYWlsOiB0cnVlLFxyXG4gICAgYW5pbWF0ZVRodW1iOiB0cnVlLFxyXG4gICAgY3VycmVudFBhZ2VyUG9zaXRpb246ICdtaWRkbGUnLFxyXG4gICAgYWxpZ25UaHVtYm5haWxzOiAnbWlkZGxlJyxcclxuICAgIHRodW1iV2lkdGg6IDEwMCxcclxuICAgIHRodW1iSGVpZ2h0OiAnODBweCcsXHJcbiAgICB0aHVtYk1hcmdpbjogNSxcclxuICAgIGFwcGVuZFRodW1ibmFpbHNUbzogJy5sZy1jb21wb25lbnRzJyxcclxuICAgIHRvZ2dsZVRodW1iOiBmYWxzZSxcclxuICAgIGVuYWJsZVRodW1iRHJhZzogdHJ1ZSxcclxuICAgIGVuYWJsZVRodW1iU3dpcGU6IHRydWUsXHJcbiAgICB0aHVtYm5haWxTd2lwZVRocmVzaG9sZDogMTAsXHJcbiAgICBsb2FkWW91VHViZVRodW1ibmFpbDogdHJ1ZSxcclxuICAgIHlvdVR1YmVUaHVtYlNpemU6IDEsXHJcbiAgICB0aHVtYm5haWxQbHVnaW5TdHJpbmdzOiB7XHJcbiAgICAgICAgdG9nZ2xlVGh1bWJuYWlsczogJ1RvZ2dsZSB0aHVtYm5haWxzJyxcclxuICAgIH0sXHJcbn07XG5cbi8qKlxyXG4gKiBMaXN0IG9mIGxpZ2h0R2FsbGVyeSBldmVudHNcclxuICogQWxsIGV2ZW50cyBzaG91bGQgYmUgZG9jdW1lbnRlZCBoZXJlXHJcbiAqIEJlbG93IGludGVyZmFjZXMgYXJlIHVzZWQgdG8gYnVpbGQgdGhlIHdlYnNpdGUgZG9jdW1lbnRhdGlvbnNcclxuICogKi9cclxudmFyIGxHRXZlbnRzID0ge1xyXG4gICAgYWZ0ZXJBcHBlbmRTbGlkZTogJ2xnQWZ0ZXJBcHBlbmRTbGlkZScsXHJcbiAgICBpbml0OiAnbGdJbml0JyxcclxuICAgIGhhc1ZpZGVvOiAnbGdIYXNWaWRlbycsXHJcbiAgICBjb250YWluZXJSZXNpemU6ICdsZ0NvbnRhaW5lclJlc2l6ZScsXHJcbiAgICB1cGRhdGVTbGlkZXM6ICdsZ1VwZGF0ZVNsaWRlcycsXHJcbiAgICBhZnRlckFwcGVuZFN1Ykh0bWw6ICdsZ0FmdGVyQXBwZW5kU3ViSHRtbCcsXHJcbiAgICBiZWZvcmVPcGVuOiAnbGdCZWZvcmVPcGVuJyxcclxuICAgIGFmdGVyT3BlbjogJ2xnQWZ0ZXJPcGVuJyxcclxuICAgIHNsaWRlSXRlbUxvYWQ6ICdsZ1NsaWRlSXRlbUxvYWQnLFxyXG4gICAgYmVmb3JlU2xpZGU6ICdsZ0JlZm9yZVNsaWRlJyxcclxuICAgIGFmdGVyU2xpZGU6ICdsZ0FmdGVyU2xpZGUnLFxyXG4gICAgcG9zdGVyQ2xpY2s6ICdsZ1Bvc3RlckNsaWNrJyxcclxuICAgIGRyYWdTdGFydDogJ2xnRHJhZ1N0YXJ0JyxcclxuICAgIGRyYWdNb3ZlOiAnbGdEcmFnTW92ZScsXHJcbiAgICBkcmFnRW5kOiAnbGdEcmFnRW5kJyxcclxuICAgIGJlZm9yZU5leHRTbGlkZTogJ2xnQmVmb3JlTmV4dFNsaWRlJyxcclxuICAgIGJlZm9yZVByZXZTbGlkZTogJ2xnQmVmb3JlUHJldlNsaWRlJyxcclxuICAgIGJlZm9yZUNsb3NlOiAnbGdCZWZvcmVDbG9zZScsXHJcbiAgICBhZnRlckNsb3NlOiAnbGdBZnRlckNsb3NlJyxcclxuICAgIHJvdGF0ZUxlZnQ6ICdsZ1JvdGF0ZUxlZnQnLFxyXG4gICAgcm90YXRlUmlnaHQ6ICdsZ1JvdGF0ZVJpZ2h0JyxcclxuICAgIGZsaXBIb3Jpem9udGFsOiAnbGdGbGlwSG9yaXpvbnRhbCcsXHJcbiAgICBmbGlwVmVydGljYWw6ICdsZ0ZsaXBWZXJ0aWNhbCcsXHJcbiAgICBhdXRvcGxheTogJ2xnQXV0b3BsYXknLFxyXG4gICAgYXV0b3BsYXlTdGFydDogJ2xnQXV0b3BsYXlTdGFydCcsXHJcbiAgICBhdXRvcGxheVN0b3A6ICdsZ0F1dG9wbGF5U3RvcCcsXHJcbn07XG5cbnZhciBUaHVtYm5haWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUaHVtYm5haWwoaW5zdGFuY2UsICRMRykge1xyXG4gICAgICAgIHRoaXMudGh1bWJPdXRlcldpZHRoID0gMDtcclxuICAgICAgICB0aGlzLnRodW1iVG90YWxXaWR0aCA9IDA7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gMDtcclxuICAgICAgICB0aGlzLnRodW1iQ2xpY2thYmxlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gZ2V0IGxpZ2h0R2FsbGVyeSBjb3JlIHBsdWdpbiBpbnN0YW5jZVxyXG4gICAgICAgIHRoaXMuY29yZSA9IGluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuJExHID0gJExHO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGV4dGVuZCBtb2R1bGUgZGVmYXVsdCBzZXR0aW5ncyB3aXRoIGxpZ2h0R2FsbGVyeSBjb3JlIHNldHRpbmdzXHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aHVtYm5haWxzU2V0dGluZ3MpLCB0aGlzLmNvcmUuc2V0dGluZ3MpO1xyXG4gICAgICAgIHRoaXMudGh1bWJPdXRlcldpZHRoID0gMDtcclxuICAgICAgICB0aGlzLnRodW1iVG90YWxXaWR0aCA9XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS5nYWxsZXJ5SXRlbXMubGVuZ3RoICpcclxuICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLnRodW1iV2lkdGggKyB0aGlzLnNldHRpbmdzLnRodW1iTWFyZ2luKTtcclxuICAgICAgICAvLyBUaHVtYm5haWwgYW5pbWF0aW9uIHZhbHVlXHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gMDtcclxuICAgICAgICB0aGlzLnNldEFuaW1hdGVUaHVtYlN0eWxlcygpO1xyXG4gICAgICAgIGlmICghdGhpcy5jb3JlLnNldHRpbmdzLmFsbG93TWVkaWFPdmVybGFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudG9nZ2xlVGh1bWIgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGh1bWJuYWlsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYW5pbWF0ZVRodW1iKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVUaHVtYkRyYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVRodW1iRHJhZygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlVGh1bWJTd2lwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlVGh1bWJTd2lwZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50aHVtYkNsaWNrYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aHVtYkNsaWNrYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVUaHVtYkJhcigpO1xyXG4gICAgICAgICAgICB0aGlzLnRodW1iS2V5UHJlc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2V0VGh1bWJNYXJrdXAoKTtcclxuICAgICAgICB0aGlzLm1hbmFnZUFjdGl2ZUNsYXNzT25TbGlkZUNoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuJGxnVGh1bWIuZmlyc3QoKS5vbignY2xpY2subGcgdG91Y2hlbmQubGcnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgJHRhcmdldCA9IF90aGlzLiRMRyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmICghJHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbGctaXRlbS1pZCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiBJRTkgYW5kIGJlbGxvdyB0b3VjaCBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgICAgICAgICAgICAvLyBHbyB0byBzbGlkZSBpZiBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgY3NzIHRyYW5zaXRpb25zXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudGh1bWJDbGlja2FibGUgJiYgIV90aGlzLmNvcmUubGdCdXN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoJHRhcmdldC5hdHRyKCdkYXRhLWxnLWl0ZW0taWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29yZS5zbGlkZShpbmRleCwgZmFsc2UsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS5MR2VsLm9uKGxHRXZlbnRzLmJlZm9yZVNsaWRlICsgXCIudGh1bWJcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGV2ZW50LmRldGFpbC5pbmRleDtcclxuICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZVRodW1iKGluZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5iZWZvcmVPcGVuICsgXCIudGh1bWJcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50aHVtYk91dGVyV2lkdGggPSBfdGhpcy5jb3JlLm91dGVyLmdldCgpLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS5MR2VsLm9uKGxHRXZlbnRzLnVwZGF0ZVNsaWRlcyArIFwiLnRodW1iXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVidWlsZFRodW1ibmFpbHMoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5jb250YWluZXJSZXNpemUgKyBcIi50aHVtYlwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuY29yZS5sZ09wZW5lZClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50aHVtYk91dGVyV2lkdGggPSBfdGhpcy5jb3JlLm91dGVyLmdldCgpLm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZVRodW1iKF90aGlzLmNvcmUuaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudGh1bWJPdXRlcldpZHRoID0gX3RoaXMuY29yZS5vdXRlci5nZXQoKS5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFRodW1ibmFpbC5wcm90b3R5cGUuc2V0VGh1bWJNYXJrdXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRodW1iT3V0ZXJDbGFzc05hbWVzID0gJ2xnLXRodW1iLW91dGVyICc7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYWxpZ25UaHVtYm5haWxzKSB7XHJcbiAgICAgICAgICAgIHRodW1iT3V0ZXJDbGFzc05hbWVzICs9IFwibGctdGh1bWItYWxpZ24tXCIgKyB0aGlzLnNldHRpbmdzLmFsaWduVGh1bWJuYWlscztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGh0bWwgPSBcIjxkaXYgY2xhc3M9XFxcIlwiICsgdGh1bWJPdXRlckNsYXNzTmFtZXMgKyBcIlxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsZy10aHVtYiBsZy1ncm91cFxcXCI+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlwiO1xyXG4gICAgICAgIHRoaXMuY29yZS5vdXRlci5hZGRDbGFzcygnbGctaGFzLXRodW1iJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXBwZW5kVGh1bWJuYWlsc1RvID09PSAnLmxnLWNvbXBvbmVudHMnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS4kbGdDb21wb25lbnRzLmFwcGVuZChodG1sKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS5vdXRlci5hcHBlbmQoaHRtbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuJHRodW1iT3V0ZXIgPSB0aGlzLmNvcmUub3V0ZXIuZmluZCgnLmxnLXRodW1iLW91dGVyJykuZmlyc3QoKTtcclxuICAgICAgICB0aGlzLiRsZ1RodW1iID0gdGhpcy5jb3JlLm91dGVyLmZpbmQoJy5sZy10aHVtYicpLmZpcnN0KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYW5pbWF0ZVRodW1iKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS5vdXRlclxyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5sZy10aHVtYicpXHJcbiAgICAgICAgICAgICAgICAuY3NzKCd0cmFuc2l0aW9uLWR1cmF0aW9uJywgdGhpcy5jb3JlLnNldHRpbmdzLnNwZWVkICsgJ21zJylcclxuICAgICAgICAgICAgICAgIC5jc3MoJ3dpZHRoJywgdGhpcy50aHVtYlRvdGFsV2lkdGggKyAncHgnKVxyXG4gICAgICAgICAgICAgICAgLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRUaHVtYkl0ZW1IdG1sKHRoaXMuY29yZS5nYWxsZXJ5SXRlbXMpO1xyXG4gICAgfTtcclxuICAgIFRodW1ibmFpbC5wcm90b3R5cGUuZW5hYmxlVGh1bWJEcmFnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRodW1iRHJhZ1V0aWxzID0ge1xyXG4gICAgICAgICAgICBjb3Jkczoge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRYOiAwLFxyXG4gICAgICAgICAgICAgICAgZW5kWDogMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNNb3ZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG5ld1RyYW5zbGF0ZVg6IDAsXHJcbiAgICAgICAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgZW5kVGltZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgdG91Y2hNb3ZlVGltZTogMCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpc0RyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy4kdGh1bWJPdXRlci5hZGRDbGFzcygnbGctZ3JhYicpO1xyXG4gICAgICAgIHRoaXMuY29yZS5vdXRlclxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLXRodW1iJylcclxuICAgICAgICAgICAgLmZpcnN0KClcclxuICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24ubGcudGh1bWInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMudGh1bWJUb3RhbFdpZHRoID4gX3RoaXMudGh1bWJPdXRlcldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBleGVjdXRlIG9ubHkgb24gLmxnLW9iamVjdFxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGh1bWJEcmFnVXRpbHMuY29yZHMuc3RhcnRYID0gZS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHRodW1iRHJhZ1V0aWxzLnN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50aHVtYkNsaWNrYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyAqKiBGaXggZm9yIHdlYmtpdCBjdXJzb3IgaXNzdWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI2NzIzXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLm91dGVyLmdldCgpLnNjcm9sbExlZnQgKz0gMTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIuZ2V0KCkuc2Nyb2xsTGVmdCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgLy8gKlxyXG4gICAgICAgICAgICAgICAgX3RoaXMuJHRodW1iT3V0ZXJcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xnLWdyYWInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnbGctZ3JhYmJpbmcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuJExHKHdpbmRvdykub24oXCJtb3VzZW1vdmUubGcudGh1bWIuZ2xvYmFsXCIgKyB0aGlzLmNvcmUubGdJZCwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5jb3JlLmxnT3BlbmVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgdGh1bWJEcmFnVXRpbHMuY29yZHMuZW5kWCA9IGUucGFnZVg7XHJcbiAgICAgICAgICAgICAgICB0aHVtYkRyYWdVdGlscyA9IF90aGlzLm9uVGh1bWJUb3VjaE1vdmUodGh1bWJEcmFnVXRpbHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4kTEcod2luZG93KS5vbihcIm1vdXNldXAubGcudGh1bWIuZ2xvYmFsXCIgKyB0aGlzLmNvcmUubGdJZCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmNvcmUubGdPcGVuZWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICh0aHVtYkRyYWdVdGlscy5pc01vdmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHVtYkRyYWdVdGlscyA9IF90aGlzLm9uVGh1bWJUb3VjaEVuZCh0aHVtYkRyYWdVdGlscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50aHVtYkNsaWNrYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLiR0aHVtYk91dGVyLnJlbW92ZUNsYXNzKCdsZy1ncmFiYmluZycpLmFkZENsYXNzKCdsZy1ncmFiJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLmVuYWJsZVRodW1iU3dpcGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdGh1bWJEcmFnVXRpbHMgPSB7XHJcbiAgICAgICAgICAgIGNvcmRzOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFg6IDAsXHJcbiAgICAgICAgICAgICAgICBlbmRYOiAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc01vdmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgbmV3VHJhbnNsYXRlWDogMCxcclxuICAgICAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICB0b3VjaE1vdmVUaW1lOiAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy4kbGdUaHVtYi5vbigndG91Y2hzdGFydC5sZycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy50aHVtYlRvdGFsV2lkdGggPiBfdGhpcy50aHVtYk91dGVyV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRodW1iRHJhZ1V0aWxzLmNvcmRzLnN0YXJ0WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRodW1iQ2xpY2thYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aHVtYkRyYWdVdGlscy5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4kbGdUaHVtYi5vbigndG91Y2htb3ZlLmxnJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnRodW1iVG90YWxXaWR0aCA+IF90aGlzLnRodW1iT3V0ZXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGh1bWJEcmFnVXRpbHMuY29yZHMuZW5kWCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHRodW1iRHJhZ1V0aWxzID0gX3RoaXMub25UaHVtYlRvdWNoTW92ZSh0aHVtYkRyYWdVdGlscyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLiRsZ1RodW1iLm9uKCd0b3VjaGVuZC5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRodW1iRHJhZ1V0aWxzLmlzTW92ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRodW1iRHJhZ1V0aWxzID0gX3RoaXMub25UaHVtYlRvdWNoRW5kKHRodW1iRHJhZ1V0aWxzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRodW1iQ2xpY2thYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFJlYnVpbGQgdGh1bWJuYWlsc1xyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS5yZWJ1aWxkVGh1bWJuYWlscyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFJlbW92ZSB0cmFuc2l0aW9uc1xyXG4gICAgICAgIHRoaXMuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoJ2xnLXJlYnVpbGRpbmctdGh1bWJuYWlscycpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50aHVtYlRvdGFsV2lkdGggPVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29yZS5nYWxsZXJ5SXRlbXMubGVuZ3RoICpcclxuICAgICAgICAgICAgICAgICAgICAoX3RoaXMuc2V0dGluZ3MudGh1bWJXaWR0aCArIF90aGlzLnNldHRpbmdzLnRodW1iTWFyZ2luKTtcclxuICAgICAgICAgICAgX3RoaXMuJGxnVGh1bWIuY3NzKCd3aWR0aCcsIF90aGlzLnRodW1iVG90YWxXaWR0aCArICdweCcpO1xyXG4gICAgICAgICAgICBfdGhpcy4kbGdUaHVtYi5lbXB0eSgpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRUaHVtYkl0ZW1IdG1sKF90aGlzLmNvcmUuZ2FsbGVyeUl0ZW1zKTtcclxuICAgICAgICAgICAgX3RoaXMuYW5pbWF0ZVRodW1iKF90aGlzLmNvcmUuaW5kZXgpO1xyXG4gICAgICAgIH0sIDUwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLXJlYnVpbGRpbmctdGh1bWJuYWlscycpO1xyXG4gICAgICAgIH0sIDIwMCk7XHJcbiAgICB9O1xyXG4gICAgLy8gQHRzLWNoZWNrXHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLnNldFRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuJGxnVGh1bWIuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoLScgKyB2YWx1ZSArICdweCwgMHB4LCAwcHgpJyk7XHJcbiAgICB9O1xyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS5nZXRQb3NzaWJsZVRyYW5zZm9ybVggPSBmdW5jdGlvbiAobGVmdCkge1xyXG4gICAgICAgIGlmIChsZWZ0ID4gdGhpcy50aHVtYlRvdGFsV2lkdGggLSB0aGlzLnRodW1iT3V0ZXJXaWR0aCkge1xyXG4gICAgICAgICAgICBsZWZ0ID0gdGhpcy50aHVtYlRvdGFsV2lkdGggLSB0aGlzLnRodW1iT3V0ZXJXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgIGxlZnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGVmdDtcclxuICAgIH07XHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLmFuaW1hdGVUaHVtYiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHRoaXMuJGxnVGh1bWIuY3NzKCd0cmFuc2l0aW9uLWR1cmF0aW9uJywgdGhpcy5jb3JlLnNldHRpbmdzLnNwZWVkICsgJ21zJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYW5pbWF0ZVRodW1iKSB7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zZXR0aW5ncy5jdXJyZW50UGFnZXJQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWlkZGxlJzpcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGh1bWJPdXRlcldpZHRoIC8gMiAtIHRoaXMuc2V0dGluZ3MudGh1bWJXaWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSB0aGlzLnRodW1iT3V0ZXJXaWR0aCAtIHRoaXMuc2V0dGluZ3MudGh1bWJXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPVxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc2V0dGluZ3MudGh1bWJXaWR0aCArIHRoaXMuc2V0dGluZ3MudGh1bWJNYXJnaW4pICogaW5kZXggLVxyXG4gICAgICAgICAgICAgICAgICAgIDEgLVxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZiAodGhpcy50cmFuc2xhdGVYID4gdGhpcy50aHVtYlRvdGFsV2lkdGggLSB0aGlzLnRodW1iT3V0ZXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gdGhpcy50aHVtYlRvdGFsV2lkdGggLSB0aGlzLnRodW1iT3V0ZXJXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy50cmFuc2xhdGVYIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVYID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFRyYW5zbGF0ZSh0aGlzLnRyYW5zbGF0ZVgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLm9uVGh1bWJUb3VjaE1vdmUgPSBmdW5jdGlvbiAodGh1bWJEcmFnVXRpbHMpIHtcclxuICAgICAgICB0aHVtYkRyYWdVdGlscy5uZXdUcmFuc2xhdGVYID0gdGhpcy50cmFuc2xhdGVYO1xyXG4gICAgICAgIHRodW1iRHJhZ1V0aWxzLmlzTW92ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRodW1iRHJhZ1V0aWxzLnRvdWNoTW92ZVRpbWUgPSBuZXcgRGF0ZSgpLnZhbHVlT2YoKTtcclxuICAgICAgICB0aHVtYkRyYWdVdGlscy5uZXdUcmFuc2xhdGVYIC09XHJcbiAgICAgICAgICAgIHRodW1iRHJhZ1V0aWxzLmNvcmRzLmVuZFggLSB0aHVtYkRyYWdVdGlscy5jb3Jkcy5zdGFydFg7XHJcbiAgICAgICAgdGh1bWJEcmFnVXRpbHMubmV3VHJhbnNsYXRlWCA9IHRoaXMuZ2V0UG9zc2libGVUcmFuc2Zvcm1YKHRodW1iRHJhZ1V0aWxzLm5ld1RyYW5zbGF0ZVgpO1xyXG4gICAgICAgIC8vIG1vdmUgY3VycmVudCBzbGlkZVxyXG4gICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKHRodW1iRHJhZ1V0aWxzLm5ld1RyYW5zbGF0ZVgpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iT3V0ZXIuYWRkQ2xhc3MoJ2xnLWRyYWdnaW5nJyk7XHJcbiAgICAgICAgcmV0dXJuIHRodW1iRHJhZ1V0aWxzO1xyXG4gICAgfTtcclxuICAgIFRodW1ibmFpbC5wcm90b3R5cGUub25UaHVtYlRvdWNoRW5kID0gZnVuY3Rpb24gKHRodW1iRHJhZ1V0aWxzKSB7XHJcbiAgICAgICAgdGh1bWJEcmFnVXRpbHMuaXNNb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRodW1iRHJhZ1V0aWxzLmVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuJHRodW1iT3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLWRyYWdnaW5nJyk7XHJcbiAgICAgICAgdmFyIHRvdWNoRHVyYXRpb24gPSB0aHVtYkRyYWdVdGlscy5lbmRUaW1lLnZhbHVlT2YoKSAtXHJcbiAgICAgICAgICAgIHRodW1iRHJhZ1V0aWxzLnN0YXJ0VGltZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlWG5ldyA9IHRodW1iRHJhZ1V0aWxzLmNvcmRzLmVuZFggLSB0aHVtYkRyYWdVdGlscy5jb3Jkcy5zdGFydFg7XHJcbiAgICAgICAgdmFyIHNwZWVkWCA9IE1hdGguYWJzKGRpc3RhbmNlWG5ldykgLyB0b3VjaER1cmF0aW9uO1xyXG4gICAgICAgIC8vIFNvbWUgbWFnaWNhbCBudW1iZXJzXHJcbiAgICAgICAgLy8gQ2FuIGJlIGltcHJvdmVkXHJcbiAgICAgICAgaWYgKHNwZWVkWCA+IDAuMTUgJiZcclxuICAgICAgICAgICAgdGh1bWJEcmFnVXRpbHMuZW5kVGltZS52YWx1ZU9mKCkgLSB0aHVtYkRyYWdVdGlscy50b3VjaE1vdmVUaW1lIDwgMzApIHtcclxuICAgICAgICAgICAgc3BlZWRYICs9IDE7XHJcbiAgICAgICAgICAgIGlmIChzcGVlZFggPiAyKSB7XHJcbiAgICAgICAgICAgICAgICBzcGVlZFggKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzcGVlZFggPVxyXG4gICAgICAgICAgICAgICAgc3BlZWRYICtcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZFggKiAoTWF0aC5hYnMoZGlzdGFuY2VYbmV3KSAvIHRoaXMudGh1bWJPdXRlcldpZHRoKTtcclxuICAgICAgICAgICAgdGhpcy4kbGdUaHVtYi5jc3MoJ3RyYW5zaXRpb24tZHVyYXRpb24nLCBNYXRoLm1pbihzcGVlZFggLSAxLCAyKSArICdzZXR0aW5ncycpO1xyXG4gICAgICAgICAgICBkaXN0YW5jZVhuZXcgPSBkaXN0YW5jZVhuZXcgKiBzcGVlZFg7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlWCA9IHRoaXMuZ2V0UG9zc2libGVUcmFuc2Zvcm1YKHRoaXMudHJhbnNsYXRlWCAtIGRpc3RhbmNlWG5ldyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKHRoaXMudHJhbnNsYXRlWCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZVggPSB0aHVtYkRyYWdVdGlscy5uZXdUcmFuc2xhdGVYO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTWF0aC5hYnModGh1bWJEcmFnVXRpbHMuY29yZHMuZW5kWCAtIHRodW1iRHJhZ1V0aWxzLmNvcmRzLnN0YXJ0WCkgPFxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRodW1ibmFpbFN3aXBlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGh1bWJDbGlja2FibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGh1bWJEcmFnVXRpbHM7XHJcbiAgICB9O1xyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS5nZXRUaHVtYkh0bWwgPSBmdW5jdGlvbiAodGh1bWIsIGluZGV4LCBhbHQpIHtcclxuICAgICAgICB2YXIgc2xpZGVWaWRlb0luZm8gPSB0aGlzLmNvcmUuZ2FsbGVyeUl0ZW1zW2luZGV4XS5fX3NsaWRlVmlkZW9JbmZvIHx8IHt9O1xyXG4gICAgICAgIHZhciB0aHVtYkltZztcclxuICAgICAgICBpZiAoc2xpZGVWaWRlb0luZm8ueW91dHViZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sb2FkWW91VHViZVRodW1ibmFpbCkge1xyXG4gICAgICAgICAgICAgICAgdGh1bWJJbWcgPVxyXG4gICAgICAgICAgICAgICAgICAgICcvL2ltZy55b3V0dWJlLmNvbS92aS8nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVWaWRlb0luZm8ueW91dHViZVsxXSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcvJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MueW91VHViZVRodW1iU2l6ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcuanBnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRodW1iSW1nID0gdGh1bWI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRodW1iSW1nID0gdGh1bWI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhbHRBdHRyID0gYWx0ID8gJ2FsdD1cIicgKyBhbHQgKyAnXCInIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIFwiPGRpdiBkYXRhLWxnLWl0ZW0taWQ9XFxcIlwiICsgaW5kZXggKyBcIlxcXCIgY2xhc3M9XFxcImxnLXRodW1iLWl0ZW0gXCIgKyAoaW5kZXggPT09IHRoaXMuY29yZS5pbmRleCA/ICcgYWN0aXZlJyA6ICcnKSArIFwiXFxcIlxcbiAgICAgICAgc3R5bGU9XFxcIndpZHRoOlwiICsgdGhpcy5zZXR0aW5ncy50aHVtYldpZHRoICsgXCJweDsgaGVpZ2h0OiBcIiArIHRoaXMuc2V0dGluZ3MudGh1bWJIZWlnaHQgKyBcIjtcXG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IFwiICsgdGhpcy5zZXR0aW5ncy50aHVtYk1hcmdpbiArIFwicHg7XFxcIj5cXG4gICAgICAgICAgICA8aW1nIFwiICsgYWx0QXR0ciArIFwiIGRhdGEtbGctaXRlbS1pZD1cXFwiXCIgKyBpbmRleCArIFwiXFxcIiBzcmM9XFxcIlwiICsgdGh1bWJJbWcgKyBcIlxcXCIgLz5cXG4gICAgICAgIDwvZGl2PlwiO1xyXG4gICAgfTtcclxuICAgIFRodW1ibmFpbC5wcm90b3R5cGUuZ2V0VGh1bWJJdGVtSHRtbCA9IGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICAgIHZhciB0aHVtYkxpc3QgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRodW1iTGlzdCArPSB0aGlzLmdldFRodW1iSHRtbChpdGVtc1tpXS50aHVtYiwgaSwgaXRlbXNbaV0uYWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRodW1iTGlzdDtcclxuICAgIH07XHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLnNldFRodW1iSXRlbUh0bWwgPSBmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgICB2YXIgdGh1bWJMaXN0ID0gdGhpcy5nZXRUaHVtYkl0ZW1IdG1sKGl0ZW1zKTtcclxuICAgICAgICB0aGlzLiRsZ1RodW1iLmh0bWwodGh1bWJMaXN0KTtcclxuICAgIH07XHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLnNldEFuaW1hdGVUaHVtYlN0eWxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbmltYXRlVGh1bWIpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLm91dGVyLmFkZENsYXNzKCdsZy1hbmltYXRlLXRodW1iJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIE1hbmFnZSB0aHVtYm5haWwgYWN0aXZlIGNhbHNzXHJcbiAgICBUaHVtYm5haWwucHJvdG90eXBlLm1hbmFnZUFjdGl2ZUNsYXNzT25TbGlkZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIG1hbmFnZSBhY3RpdmUgY2xhc3MgZm9yIHRodW1ibmFpbFxyXG4gICAgICAgIHRoaXMuY29yZS5MR2VsLm9uKGxHRXZlbnRzLmJlZm9yZVNsaWRlICsgXCIudGh1bWJcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciAkdGh1bWIgPSBfdGhpcy5jb3JlLm91dGVyLmZpbmQoJy5sZy10aHVtYi1pdGVtJyk7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGV2ZW50LmRldGFpbC5pbmRleDtcclxuICAgICAgICAgICAgJHRodW1iLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJHRodW1iLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVG9nZ2xlIHRodW1ibmFpbCBiYXJcclxuICAgIFRodW1ibmFpbC5wcm90b3R5cGUudG9nZ2xlVGh1bWJCYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50b2dnbGVUaHVtYikge1xyXG4gICAgICAgICAgICB0aGlzLmNvcmUub3V0ZXIuYWRkQ2xhc3MoJ2xnLWNhbi10b2dnbGUnKTtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLiR0b29sYmFyLmFwcGVuZCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgYXJpYS1sYWJlbD1cIicgK1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50aHVtYm5haWxQbHVnaW5TdHJpbmdzWyd0b2dnbGVUaHVtYm5haWxzJ10gK1xyXG4gICAgICAgICAgICAgICAgJ1wiIGNsYXNzPVwibGctdG9nZ2xlLXRodW1iIGxnLWljb25cIj48L2J1dHRvbj4nKTtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLm91dGVyXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLmxnLXRvZ2dsZS10aHVtYicpXHJcbiAgICAgICAgICAgICAgICAuZmlyc3QoKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIudG9nZ2xlQ2xhc3MoJ2xnLWNvbXBvbmVudHMtb3BlbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS50aHVtYktleVByZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kTEcod2luZG93KS5vbihcImtleWRvd24ubGcudGh1bWIuZ2xvYmFsXCIgKyB0aGlzLmNvcmUubGdJZCwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5jb3JlLmxnT3BlbmVkIHx8ICFfdGhpcy5zZXR0aW5ncy50b2dnbGVUaHVtYilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIuYWRkQ2xhc3MoJ2xnLWNvbXBvbmVudHMtb3BlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gNDApIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLWNvbXBvbmVudHMtb3BlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVGh1bWJuYWlsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnRodW1ibmFpbCkge1xyXG4gICAgICAgICAgICB0aGlzLiRMRyh3aW5kb3cpLm9mZihcIi5sZy50aHVtYi5nbG9iYWxcIiArIHRoaXMuY29yZS5sZ0lkKTtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLkxHZWwub2ZmKCcubGcudGh1bWInKTtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLkxHZWwub2ZmKCcudGh1bWInKTtcclxuICAgICAgICAgICAgdGhpcy4kdGh1bWJPdXRlci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1oYXMtdGh1bWInKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRodW1ibmFpbDtcclxufSgpKTtcblxuZXhwb3J0IGRlZmF1bHQgVGh1bWJuYWlsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGctdGh1bWJuYWlsLmVzNS5qcy5tYXBcbiJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aHVtYm5haWxzU2V0dGluZ3MiLCJ0aHVtYm5haWwiLCJhbmltYXRlVGh1bWIiLCJjdXJyZW50UGFnZXJQb3NpdGlvbiIsImFsaWduVGh1bWJuYWlscyIsInRodW1iV2lkdGgiLCJ0aHVtYkhlaWdodCIsInRodW1iTWFyZ2luIiwiYXBwZW5kVGh1bWJuYWlsc1RvIiwidG9nZ2xlVGh1bWIiLCJlbmFibGVUaHVtYkRyYWciLCJlbmFibGVUaHVtYlN3aXBlIiwidGh1bWJuYWlsU3dpcGVUaHJlc2hvbGQiLCJsb2FkWW91VHViZVRodW1ibmFpbCIsInlvdVR1YmVUaHVtYlNpemUiLCJ0aHVtYm5haWxQbHVnaW5TdHJpbmdzIiwidG9nZ2xlVGh1bWJuYWlscyIsImxHRXZlbnRzIiwiYWZ0ZXJBcHBlbmRTbGlkZSIsImluaXQiLCJoYXNWaWRlbyIsImNvbnRhaW5lclJlc2l6ZSIsInVwZGF0ZVNsaWRlcyIsImFmdGVyQXBwZW5kU3ViSHRtbCIsImJlZm9yZU9wZW4iLCJhZnRlck9wZW4iLCJzbGlkZUl0ZW1Mb2FkIiwiYmVmb3JlU2xpZGUiLCJhZnRlclNsaWRlIiwicG9zdGVyQ2xpY2siLCJkcmFnU3RhcnQiLCJkcmFnTW92ZSIsImRyYWdFbmQiLCJiZWZvcmVOZXh0U2xpZGUiLCJiZWZvcmVQcmV2U2xpZGUiLCJiZWZvcmVDbG9zZSIsImFmdGVyQ2xvc2UiLCJyb3RhdGVMZWZ0Iiwicm90YXRlUmlnaHQiLCJmbGlwSG9yaXpvbnRhbCIsImZsaXBWZXJ0aWNhbCIsImF1dG9wbGF5IiwiYXV0b3BsYXlTdGFydCIsImF1dG9wbGF5U3RvcCIsIlRodW1ibmFpbCIsImluc3RhbmNlIiwiJExHIiwidGh1bWJPdXRlcldpZHRoIiwidGh1bWJUb3RhbFdpZHRoIiwidHJhbnNsYXRlWCIsInRodW1iQ2xpY2thYmxlIiwiY29yZSIsInNldHRpbmdzIiwiZ2FsbGVyeUl0ZW1zIiwic2V0QW5pbWF0ZVRodW1iU3R5bGVzIiwiYWxsb3dNZWRpYU92ZXJsYXAiLCJidWlsZCIsInRvZ2dsZVRodW1iQmFyIiwidGh1bWJLZXlQcmVzcyIsIl90aGlzIiwic2V0VGh1bWJNYXJrdXAiLCJtYW5hZ2VBY3RpdmVDbGFzc09uU2xpZGVDaGFuZ2UiLCIkbGdUaHVtYiIsImZpcnN0Iiwib24iLCJlIiwiJHRhcmdldCIsInRhcmdldCIsImhhc0F0dHJpYnV0ZSIsInNldFRpbWVvdXQiLCJsZ0J1c3kiLCJpbmRleCIsInBhcnNlSW50IiwiYXR0ciIsInNsaWRlIiwiTEdlbCIsImV2ZW50IiwiZGV0YWlsIiwib3V0ZXIiLCJnZXQiLCJvZmZzZXRXaWR0aCIsInJlYnVpbGRUaHVtYm5haWxzIiwibGdPcGVuZWQiLCJ0aHVtYk91dGVyQ2xhc3NOYW1lcyIsImh0bWwiLCJhZGRDbGFzcyIsIiRsZ0NvbXBvbmVudHMiLCJhcHBlbmQiLCIkdGh1bWJPdXRlciIsImZpbmQiLCJjc3MiLCJzcGVlZCIsInNldFRodW1iSXRlbUh0bWwiLCJ0aHVtYkRyYWdVdGlscyIsImNvcmRzIiwic3RhcnRYIiwiZW5kWCIsImlzTW92ZWQiLCJuZXdUcmFuc2xhdGVYIiwic3RhcnRUaW1lIiwiRGF0ZSIsImVuZFRpbWUiLCJ0b3VjaE1vdmVUaW1lIiwiaXNEcmFnZ2luZyIsInByZXZlbnREZWZhdWx0IiwicGFnZVgiLCJzY3JvbGxMZWZ0IiwicmVtb3ZlQ2xhc3MiLCJ3aW5kb3ciLCJsZ0lkIiwib25UaHVtYlRvdWNoTW92ZSIsIm9uVGh1bWJUb3VjaEVuZCIsInRhcmdldFRvdWNoZXMiLCJlbXB0eSIsInNldFRyYW5zbGF0ZSIsInZhbHVlIiwiZ2V0UG9zc2libGVUcmFuc2Zvcm1YIiwibGVmdCIsInBvc2l0aW9uIiwidmFsdWVPZiIsInRvdWNoRHVyYXRpb24iLCJkaXN0YW5jZVhuZXciLCJzcGVlZFgiLCJNYXRoIiwiYWJzIiwibWluIiwiZ2V0VGh1bWJIdG1sIiwidGh1bWIiLCJhbHQiLCJzbGlkZVZpZGVvSW5mbyIsIl9fc2xpZGVWaWRlb0luZm8iLCJ0aHVtYkltZyIsInlvdXR1YmUiLCJhbHRBdHRyIiwiZ2V0VGh1bWJJdGVtSHRtbCIsIml0ZW1zIiwidGh1bWJMaXN0IiwiJHRodW1iIiwiZXEiLCIkdG9vbGJhciIsInRvZ2dsZUNsYXNzIiwia2V5Q29kZSIsImRlc3Ryb3kiLCJvZmYiLCJyZW1vdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/plugins/thumbnail/lg-thumbnail.es5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/plugins/zoom/lg-zoom.es5.js":
/*!***************************************************************!*\
  !*** ./node_modules/lightgallery/plugins/zoom/lg-zoom.es5.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/*!\n * lightgallery | 2.7.2 | September 20th 2023\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */ /*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */ var __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar zoomSettings = {\n    scale: 1,\n    zoom: true,\n    infiniteZoom: true,\n    actualSize: true,\n    showZoomInOutIcons: false,\n    actualSizeIcons: {\n        zoomIn: \"lg-zoom-in\",\n        zoomOut: \"lg-zoom-out\"\n    },\n    enableZoomAfter: 300,\n    zoomPluginStrings: {\n        zoomIn: \"Zoom in\",\n        zoomOut: \"Zoom out\",\n        viewActualSize: \"View actual size\"\n    }\n};\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */ var lGEvents = {\n    afterAppendSlide: \"lgAfterAppendSlide\",\n    init: \"lgInit\",\n    hasVideo: \"lgHasVideo\",\n    containerResize: \"lgContainerResize\",\n    updateSlides: \"lgUpdateSlides\",\n    afterAppendSubHtml: \"lgAfterAppendSubHtml\",\n    beforeOpen: \"lgBeforeOpen\",\n    afterOpen: \"lgAfterOpen\",\n    slideItemLoad: \"lgSlideItemLoad\",\n    beforeSlide: \"lgBeforeSlide\",\n    afterSlide: \"lgAfterSlide\",\n    posterClick: \"lgPosterClick\",\n    dragStart: \"lgDragStart\",\n    dragMove: \"lgDragMove\",\n    dragEnd: \"lgDragEnd\",\n    beforeNextSlide: \"lgBeforeNextSlide\",\n    beforePrevSlide: \"lgBeforePrevSlide\",\n    beforeClose: \"lgBeforeClose\",\n    afterClose: \"lgAfterClose\",\n    rotateLeft: \"lgRotateLeft\",\n    rotateRight: \"lgRotateRight\",\n    flipHorizontal: \"lgFlipHorizontal\",\n    flipVertical: \"lgFlipVertical\",\n    autoplay: \"lgAutoplay\",\n    autoplayStart: \"lgAutoplayStart\",\n    autoplayStop: \"lgAutoplayStop\"\n};\nvar ZOOM_TRANSITION_DURATION = 500;\nvar Zoom = /** @class */ function() {\n    function Zoom(instance, $LG) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n        this.settings = __assign(__assign({}, zoomSettings), this.core.settings);\n        return this;\n    }\n    // Append Zoom controls. Actual size, Zoom-in, Zoom-out\n    Zoom.prototype.buildTemplates = function() {\n        var zoomIcons = this.settings.showZoomInOutIcons ? '<button id=\"' + this.core.getIdName(\"lg-zoom-in\") + '\" type=\"button\" aria-label=\"' + this.settings.zoomPluginStrings[\"zoomIn\"] + '\" class=\"lg-zoom-in lg-icon\"></button><button id=\"' + this.core.getIdName(\"lg-zoom-out\") + '\" type=\"button\" aria-label=\"' + this.settings.zoomPluginStrings[\"zoomIn\"] + '\" class=\"lg-zoom-out lg-icon\"></button>' : \"\";\n        if (this.settings.actualSize) {\n            zoomIcons += '<button id=\"' + this.core.getIdName(\"lg-actual-size\") + '\" type=\"button\" aria-label=\"' + this.settings.zoomPluginStrings[\"viewActualSize\"] + '\" class=\"' + this.settings.actualSizeIcons.zoomIn + ' lg-icon\"></button>';\n        }\n        this.core.outer.addClass(\"lg-use-transition-for-zoom\");\n        this.core.$toolbar.first().append(zoomIcons);\n    };\n    /**\r\n     * @desc Enable zoom option only once the image is completely loaded\r\n     * If zoomFromOrigin is true, Zoom is enabled once the dummy image has been inserted\r\n     *\r\n     * Zoom styles are defined under lg-zoomable CSS class.\r\n     */ Zoom.prototype.enableZoom = function(event) {\n        var _this = this;\n        // delay will be 0 except first time\n        var _speed = this.settings.enableZoomAfter + event.detail.delay;\n        // set _speed value 0 if gallery opened from direct url and if it is first slide\n        if (this.$LG(\"body\").first().hasClass(\"lg-from-hash\") && event.detail.delay) {\n            // will execute only once\n            _speed = 0;\n        } else {\n            // Remove lg-from-hash to enable starting animation.\n            this.$LG(\"body\").first().removeClass(\"lg-from-hash\");\n        }\n        this.zoomableTimeout = setTimeout(function() {\n            if (!_this.isImageSlide(_this.core.index)) {\n                return;\n            }\n            _this.core.getSlideItem(event.detail.index).addClass(\"lg-zoomable\");\n            if (event.detail.index === _this.core.index) {\n                _this.setZoomEssentials();\n            }\n        }, _speed + 30);\n    };\n    Zoom.prototype.enableZoomOnSlideItemLoad = function() {\n        // Add zoomable class\n        this.core.LGel.on(lGEvents.slideItemLoad + \".zoom\", this.enableZoom.bind(this));\n    };\n    Zoom.prototype.getDragCords = function(e) {\n        return {\n            x: e.pageX,\n            y: e.pageY\n        };\n    };\n    Zoom.prototype.getSwipeCords = function(e) {\n        var x = e.touches[0].pageX;\n        var y = e.touches[0].pageY;\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Zoom.prototype.getDragAllowedAxises = function(scale, scaleDiff) {\n        var $image = this.core.getSlideItem(this.core.index).find(\".lg-image\").first().get();\n        var height = 0;\n        var width = 0;\n        var rect = $image.getBoundingClientRect();\n        if (scale) {\n            height = $image.offsetHeight * scale;\n            width = $image.offsetWidth * scale;\n        } else if (scaleDiff) {\n            height = rect.height + scaleDiff * rect.height;\n            width = rect.width + scaleDiff * rect.width;\n        } else {\n            height = rect.height;\n            width = rect.width;\n        }\n        var allowY = height > this.containerRect.height;\n        var allowX = width > this.containerRect.width;\n        return {\n            allowX: allowX,\n            allowY: allowY\n        };\n    };\n    Zoom.prototype.setZoomEssentials = function() {\n        this.containerRect = this.core.$content.get().getBoundingClientRect();\n    };\n    /**\r\n     * @desc Image zoom\r\n     * Translate the wrap and scale the image to get better user experience\r\n     *\r\n     * @param {String} scale - Zoom decrement/increment value\r\n     */ Zoom.prototype.zoomImage = function(scale, scaleDiff, reposition, resetToMax) {\n        if (Math.abs(scaleDiff) <= 0) return;\n        var offsetX = this.containerRect.width / 2 + this.containerRect.left;\n        var offsetY = this.containerRect.height / 2 + this.containerRect.top + this.scrollTop;\n        var originalX;\n        var originalY;\n        if (scale === 1) {\n            this.positionChanged = false;\n        }\n        var dragAllowedAxises = this.getDragAllowedAxises(0, scaleDiff);\n        var allowY = dragAllowedAxises.allowY, allowX = dragAllowedAxises.allowX;\n        if (this.positionChanged) {\n            originalX = this.left / (this.scale - scaleDiff);\n            originalY = this.top / (this.scale - scaleDiff);\n            this.pageX = offsetX - originalX;\n            this.pageY = offsetY - originalY;\n            this.positionChanged = false;\n        }\n        var possibleSwipeCords = this.getPossibleSwipeDragCords(scaleDiff);\n        var x;\n        var y;\n        var _x = offsetX - this.pageX;\n        var _y = offsetY - this.pageY;\n        if (scale - scaleDiff > 1) {\n            var scaleVal = (scale - scaleDiff) / Math.abs(scaleDiff);\n            _x = (scaleDiff < 0 ? -_x : _x) + this.left * (scaleVal + (scaleDiff < 0 ? -1 : 1));\n            _y = (scaleDiff < 0 ? -_y : _y) + this.top * (scaleVal + (scaleDiff < 0 ? -1 : 1));\n            x = _x / scaleVal;\n            y = _y / scaleVal;\n        } else {\n            var scaleVal = (scale - scaleDiff) * scaleDiff;\n            x = _x * scaleVal;\n            y = _y * scaleVal;\n        }\n        if (reposition) {\n            if (allowX) {\n                if (this.isBeyondPossibleLeft(x, possibleSwipeCords.minX)) {\n                    x = possibleSwipeCords.minX;\n                } else if (this.isBeyondPossibleRight(x, possibleSwipeCords.maxX)) {\n                    x = possibleSwipeCords.maxX;\n                }\n            } else {\n                if (scale > 1) {\n                    if (x < possibleSwipeCords.minX) {\n                        x = possibleSwipeCords.minX;\n                    } else if (x > possibleSwipeCords.maxX) {\n                        x = possibleSwipeCords.maxX;\n                    }\n                }\n            }\n            // @todo fix this\n            if (allowY) {\n                if (this.isBeyondPossibleTop(y, possibleSwipeCords.minY)) {\n                    y = possibleSwipeCords.minY;\n                } else if (this.isBeyondPossibleBottom(y, possibleSwipeCords.maxY)) {\n                    y = possibleSwipeCords.maxY;\n                }\n            } else {\n                // If the translate value based on index of beyond the viewport, utilize the available space to prevent image being cut out\n                if (scale > 1) {\n                    //If image goes beyond viewport top, use the minim possible translate value\n                    if (y < possibleSwipeCords.minY) {\n                        y = possibleSwipeCords.minY;\n                    } else if (y > possibleSwipeCords.maxY) {\n                        y = possibleSwipeCords.maxY;\n                    }\n                }\n            }\n        }\n        this.setZoomStyles({\n            x: x,\n            y: y,\n            scale: scale\n        });\n        this.left = x;\n        this.top = y;\n        if (resetToMax) {\n            this.setZoomImageSize();\n        }\n    };\n    Zoom.prototype.resetImageTranslate = function(index) {\n        if (!this.isImageSlide(index)) {\n            return;\n        }\n        var $image = this.core.getSlideItem(index).find(\".lg-image\").first();\n        this.imageReset = false;\n        $image.removeClass(\"reset-transition reset-transition-y reset-transition-x\");\n        this.core.outer.removeClass(\"lg-actual-size\");\n        $image.css(\"width\", \"auto\").css(\"height\", \"auto\");\n        setTimeout(function() {\n            $image.removeClass(\"no-transition\");\n        }, 10);\n    };\n    Zoom.prototype.setZoomImageSize = function() {\n        var _this = this;\n        var $image = this.core.getSlideItem(this.core.index).find(\".lg-image\").first();\n        setTimeout(function() {\n            var actualSizeScale = _this.getCurrentImageActualSizeScale();\n            if (_this.scale >= actualSizeScale) {\n                $image.addClass(\"no-transition\");\n                _this.imageReset = true;\n            }\n        }, ZOOM_TRANSITION_DURATION);\n        setTimeout(function() {\n            var actualSizeScale = _this.getCurrentImageActualSizeScale();\n            if (_this.scale >= actualSizeScale) {\n                var dragAllowedAxises = _this.getDragAllowedAxises(_this.scale);\n                $image.css(\"width\", $image.get().naturalWidth + \"px\").css(\"height\", $image.get().naturalHeight + \"px\");\n                _this.core.outer.addClass(\"lg-actual-size\");\n                if (dragAllowedAxises.allowX && dragAllowedAxises.allowY) {\n                    $image.addClass(\"reset-transition\");\n                } else if (dragAllowedAxises.allowX && !dragAllowedAxises.allowY) {\n                    $image.addClass(\"reset-transition-x\");\n                } else if (!dragAllowedAxises.allowX && dragAllowedAxises.allowY) {\n                    $image.addClass(\"reset-transition-y\");\n                }\n            }\n        }, ZOOM_TRANSITION_DURATION + 50);\n    };\n    /**\r\n     * @desc apply scale3d to image and translate to image wrap\r\n     * @param {style} X,Y and scale\r\n     */ Zoom.prototype.setZoomStyles = function(style) {\n        var $imageWrap = this.core.getSlideItem(this.core.index).find(\".lg-img-wrap\").first();\n        var $image = this.core.getSlideItem(this.core.index).find(\".lg-image\").first();\n        var $dummyImage = this.core.outer.find(\".lg-current .lg-dummy-img\").first();\n        this.scale = style.scale;\n        $image.css(\"transform\", \"scale3d(\" + style.scale + \", \" + style.scale + \", 1)\");\n        $dummyImage.css(\"transform\", \"scale3d(\" + style.scale + \", \" + style.scale + \", 1)\");\n        var transform = \"translate3d(\" + style.x + \"px, \" + style.y + \"px, 0)\";\n        $imageWrap.css(\"transform\", transform);\n    };\n    /**\r\n     * @param index - Index of the current slide\r\n     * @param event - event will be available only if the function is called on clicking/taping the imags\r\n     */ Zoom.prototype.setActualSize = function(index, event) {\n        var _this = this;\n        if (this.zoomInProgress) {\n            return;\n        }\n        this.zoomInProgress = true;\n        var currentItem = this.core.galleryItems[this.core.index];\n        this.resetImageTranslate(index);\n        setTimeout(function() {\n            // Allow zoom only on image\n            if (!currentItem.src || _this.core.outer.hasClass(\"lg-first-slide-loading\")) {\n                return;\n            }\n            var scale = _this.getCurrentImageActualSizeScale();\n            var prevScale = _this.scale;\n            if (_this.core.outer.hasClass(\"lg-zoomed\")) {\n                _this.scale = 1;\n            } else {\n                _this.scale = _this.getScale(scale);\n            }\n            _this.setPageCords(event);\n            _this.beginZoom(_this.scale);\n            _this.zoomImage(_this.scale, _this.scale - prevScale, true, true);\n        }, 50);\n        setTimeout(function() {\n            _this.core.outer.removeClass(\"lg-grabbing\").addClass(\"lg-grab\");\n        }, 60);\n        setTimeout(function() {\n            _this.zoomInProgress = false;\n        }, ZOOM_TRANSITION_DURATION + 110);\n    };\n    Zoom.prototype.getNaturalWidth = function(index) {\n        var $image = this.core.getSlideItem(index).find(\".lg-image\").first();\n        var naturalWidth = this.core.galleryItems[index].width;\n        return naturalWidth ? parseFloat(naturalWidth) : $image.get().naturalWidth;\n    };\n    Zoom.prototype.getActualSizeScale = function(naturalWidth, width) {\n        var _scale;\n        var scale;\n        if (naturalWidth >= width) {\n            _scale = naturalWidth / width;\n            scale = _scale || 2;\n        } else {\n            scale = 1;\n        }\n        return scale;\n    };\n    Zoom.prototype.getCurrentImageActualSizeScale = function() {\n        var $image = this.core.getSlideItem(this.core.index).find(\".lg-image\").first();\n        var width = $image.get().offsetWidth;\n        var naturalWidth = this.getNaturalWidth(this.core.index) || width;\n        return this.getActualSizeScale(naturalWidth, width);\n    };\n    Zoom.prototype.getPageCords = function(event) {\n        var cords = {};\n        if (event) {\n            cords.x = event.pageX || event.touches[0].pageX;\n            cords.y = event.pageY || event.touches[0].pageY;\n        } else {\n            var containerRect = this.core.$content.get().getBoundingClientRect();\n            cords.x = containerRect.width / 2 + containerRect.left;\n            cords.y = containerRect.height / 2 + this.scrollTop + containerRect.top;\n        }\n        return cords;\n    };\n    Zoom.prototype.setPageCords = function(event) {\n        var pageCords = this.getPageCords(event);\n        this.pageX = pageCords.x;\n        this.pageY = pageCords.y;\n    };\n    Zoom.prototype.manageActualPixelClassNames = function() {\n        var $actualSize = this.core.getElementById(\"lg-actual-size\");\n        $actualSize.removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut);\n    };\n    // If true, zoomed - in else zoomed out\n    Zoom.prototype.beginZoom = function(scale) {\n        this.core.outer.removeClass(\"lg-zoom-drag-transition lg-zoom-dragging\");\n        if (scale > 1) {\n            this.core.outer.addClass(\"lg-zoomed\");\n            this.manageActualPixelClassNames();\n        } else {\n            this.resetZoom();\n        }\n        return scale > 1;\n    };\n    Zoom.prototype.getScale = function(scale) {\n        var actualSizeScale = this.getCurrentImageActualSizeScale();\n        if (scale < 1) {\n            scale = 1;\n        } else if (scale > actualSizeScale) {\n            scale = actualSizeScale;\n        }\n        return scale;\n    };\n    Zoom.prototype.init = function() {\n        var _this = this;\n        if (!this.settings.zoom) {\n            return;\n        }\n        this.buildTemplates();\n        this.enableZoomOnSlideItemLoad();\n        var tapped = null;\n        this.core.outer.on(\"dblclick.lg\", function(event) {\n            if (!_this.$LG(event.target).hasClass(\"lg-image\")) {\n                return;\n            }\n            _this.setActualSize(_this.core.index, event);\n        });\n        this.core.outer.on(\"touchstart.lg\", function(event) {\n            var $target = _this.$LG(event.target);\n            if (event.touches.length === 1 && $target.hasClass(\"lg-image\")) {\n                if (!tapped) {\n                    tapped = setTimeout(function() {\n                        tapped = null;\n                    }, 300);\n                } else {\n                    clearTimeout(tapped);\n                    tapped = null;\n                    event.preventDefault();\n                    _this.setActualSize(_this.core.index, event);\n                }\n            }\n        });\n        this.core.LGel.on(lGEvents.containerResize + \".zoom \" + lGEvents.rotateRight + \".zoom \" + lGEvents.rotateLeft + \".zoom \" + lGEvents.flipHorizontal + \".zoom \" + lGEvents.flipVertical + \".zoom\", function() {\n            if (!_this.core.lgOpened || !_this.isImageSlide(_this.core.index) || _this.core.touchAction) {\n                return;\n            }\n            var _LGel = _this.core.getSlideItem(_this.core.index).find(\".lg-img-wrap\").first();\n            _this.top = 0;\n            _this.left = 0;\n            _this.setZoomEssentials();\n            _this.setZoomSwipeStyles(_LGel, {\n                x: 0,\n                y: 0\n            });\n            _this.positionChanged = true;\n        });\n        // Update zoom on resize and orientationchange\n        this.$LG(window).on(\"scroll.lg.zoom.global\" + this.core.lgId, function() {\n            if (!_this.core.lgOpened) return;\n            _this.scrollTop = _this.$LG(window).scrollTop();\n        });\n        this.core.getElementById(\"lg-zoom-out\").on(\"click.lg\", function() {\n            // Allow zoom only on image\n            if (!_this.isImageSlide(_this.core.index)) {\n                return;\n            }\n            var timeout = 0;\n            if (_this.imageReset) {\n                _this.resetImageTranslate(_this.core.index);\n                timeout = 50;\n            }\n            setTimeout(function() {\n                var scale = _this.scale - _this.settings.scale;\n                if (scale < 1) {\n                    scale = 1;\n                }\n                _this.beginZoom(scale);\n                _this.zoomImage(scale, -_this.settings.scale, true, !_this.settings.infiniteZoom);\n            }, timeout);\n        });\n        this.core.getElementById(\"lg-zoom-in\").on(\"click.lg\", function() {\n            _this.zoomIn();\n        });\n        this.core.getElementById(\"lg-actual-size\").on(\"click.lg\", function() {\n            _this.setActualSize(_this.core.index);\n        });\n        this.core.LGel.on(lGEvents.beforeOpen + \".zoom\", function() {\n            _this.core.outer.find(\".lg-item\").removeClass(\"lg-zoomable\");\n        });\n        this.core.LGel.on(lGEvents.afterOpen + \".zoom\", function() {\n            _this.scrollTop = _this.$LG(window).scrollTop();\n            // Set the initial value center\n            _this.pageX = _this.core.outer.width() / 2;\n            _this.pageY = _this.core.outer.height() / 2 + _this.scrollTop;\n            _this.scale = 1;\n        });\n        // Reset zoom on slide change\n        this.core.LGel.on(lGEvents.afterSlide + \".zoom\", function(event) {\n            var prevIndex = event.detail.prevIndex;\n            _this.scale = 1;\n            _this.positionChanged = false;\n            _this.zoomInProgress = false;\n            _this.resetZoom(prevIndex);\n            _this.resetImageTranslate(prevIndex);\n            if (_this.isImageSlide(_this.core.index)) {\n                _this.setZoomEssentials();\n            }\n        });\n        // Drag option after zoom\n        this.zoomDrag();\n        this.pinchZoom();\n        this.zoomSwipe();\n        // Store the zoomable timeout value just to clear it while closing\n        this.zoomableTimeout = false;\n        this.positionChanged = false;\n        this.zoomInProgress = false;\n    };\n    Zoom.prototype.zoomIn = function() {\n        // Allow zoom only on image\n        if (!this.isImageSlide(this.core.index)) {\n            return;\n        }\n        var scale = this.scale + this.settings.scale;\n        if (!this.settings.infiniteZoom) {\n            scale = this.getScale(scale);\n        }\n        this.beginZoom(scale);\n        this.zoomImage(scale, Math.min(this.settings.scale, scale - this.scale), true, !this.settings.infiniteZoom);\n    };\n    // Reset zoom effect\n    Zoom.prototype.resetZoom = function(index) {\n        this.core.outer.removeClass(\"lg-zoomed lg-zoom-drag-transition\");\n        var $actualSize = this.core.getElementById(\"lg-actual-size\");\n        var $item = this.core.getSlideItem(index !== undefined ? index : this.core.index);\n        $actualSize.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn);\n        $item.find(\".lg-img-wrap\").first().removeAttr(\"style\");\n        $item.find(\".lg-image\").first().removeAttr(\"style\");\n        this.scale = 1;\n        this.left = 0;\n        this.top = 0;\n        // Reset pagx pagy values to center\n        this.setPageCords();\n    };\n    Zoom.prototype.getTouchDistance = function(e) {\n        return Math.sqrt((e.touches[0].pageX - e.touches[1].pageX) * (e.touches[0].pageX - e.touches[1].pageX) + (e.touches[0].pageY - e.touches[1].pageY) * (e.touches[0].pageY - e.touches[1].pageY));\n    };\n    Zoom.prototype.pinchZoom = function() {\n        var _this = this;\n        var startDist = 0;\n        var pinchStarted = false;\n        var initScale = 1;\n        var prevScale = 0;\n        var $item = this.core.getSlideItem(this.core.index);\n        this.core.outer.on(\"touchstart.lg\", function(e) {\n            $item = _this.core.getSlideItem(_this.core.index);\n            if (!_this.isImageSlide(_this.core.index)) {\n                return;\n            }\n            if (e.touches.length === 2) {\n                e.preventDefault();\n                if (_this.core.outer.hasClass(\"lg-first-slide-loading\")) {\n                    return;\n                }\n                initScale = _this.scale || 1;\n                _this.core.outer.removeClass(\"lg-zoom-drag-transition lg-zoom-dragging\");\n                _this.setPageCords(e);\n                _this.resetImageTranslate(_this.core.index);\n                _this.core.touchAction = \"pinch\";\n                startDist = _this.getTouchDistance(e);\n            }\n        });\n        this.core.$inner.on(\"touchmove.lg\", function(e) {\n            if (e.touches.length === 2 && _this.core.touchAction === \"pinch\" && (_this.$LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target))) {\n                e.preventDefault();\n                var endDist = _this.getTouchDistance(e);\n                var distance = startDist - endDist;\n                if (!pinchStarted && Math.abs(distance) > 5) {\n                    pinchStarted = true;\n                }\n                if (pinchStarted) {\n                    prevScale = _this.scale;\n                    var _scale = Math.max(1, initScale + -distance * 0.02);\n                    _this.scale = Math.round((_scale + Number.EPSILON) * 100) / 100;\n                    var diff = _this.scale - prevScale;\n                    _this.zoomImage(_this.scale, Math.round((diff + Number.EPSILON) * 100) / 100, false, false);\n                }\n            }\n        });\n        this.core.$inner.on(\"touchend.lg\", function(e) {\n            if (_this.core.touchAction === \"pinch\" && (_this.$LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target))) {\n                pinchStarted = false;\n                startDist = 0;\n                if (_this.scale <= 1) {\n                    _this.resetZoom();\n                } else {\n                    var actualSizeScale = _this.getCurrentImageActualSizeScale();\n                    if (_this.scale >= actualSizeScale) {\n                        var scaleDiff = actualSizeScale - _this.scale;\n                        if (scaleDiff === 0) {\n                            scaleDiff = 0.01;\n                        }\n                        _this.zoomImage(actualSizeScale, scaleDiff, false, true);\n                    }\n                    _this.manageActualPixelClassNames();\n                    _this.core.outer.addClass(\"lg-zoomed\");\n                }\n                _this.core.touchAction = undefined;\n            }\n        });\n    };\n    Zoom.prototype.touchendZoom = function(startCoords, endCoords, allowX, allowY, touchDuration) {\n        var distanceXnew = endCoords.x - startCoords.x;\n        var distanceYnew = endCoords.y - startCoords.y;\n        var speedX = Math.abs(distanceXnew) / touchDuration + 1;\n        var speedY = Math.abs(distanceYnew) / touchDuration + 1;\n        if (speedX > 2) {\n            speedX += 1;\n        }\n        if (speedY > 2) {\n            speedY += 1;\n        }\n        distanceXnew = distanceXnew * speedX;\n        distanceYnew = distanceYnew * speedY;\n        var _LGel = this.core.getSlideItem(this.core.index).find(\".lg-img-wrap\").first();\n        var distance = {};\n        distance.x = this.left + distanceXnew;\n        distance.y = this.top + distanceYnew;\n        var possibleSwipeCords = this.getPossibleSwipeDragCords();\n        if (Math.abs(distanceXnew) > 15 || Math.abs(distanceYnew) > 15) {\n            if (allowY) {\n                if (this.isBeyondPossibleTop(distance.y, possibleSwipeCords.minY)) {\n                    distance.y = possibleSwipeCords.minY;\n                } else if (this.isBeyondPossibleBottom(distance.y, possibleSwipeCords.maxY)) {\n                    distance.y = possibleSwipeCords.maxY;\n                }\n            }\n            if (allowX) {\n                if (this.isBeyondPossibleLeft(distance.x, possibleSwipeCords.minX)) {\n                    distance.x = possibleSwipeCords.minX;\n                } else if (this.isBeyondPossibleRight(distance.x, possibleSwipeCords.maxX)) {\n                    distance.x = possibleSwipeCords.maxX;\n                }\n            }\n            if (allowY) {\n                this.top = distance.y;\n            } else {\n                distance.y = this.top;\n            }\n            if (allowX) {\n                this.left = distance.x;\n            } else {\n                distance.x = this.left;\n            }\n            this.setZoomSwipeStyles(_LGel, distance);\n            this.positionChanged = true;\n        }\n    };\n    Zoom.prototype.getZoomSwipeCords = function(startCoords, endCoords, allowX, allowY, possibleSwipeCords) {\n        var distance = {};\n        if (allowY) {\n            distance.y = this.top + (endCoords.y - startCoords.y);\n            if (this.isBeyondPossibleTop(distance.y, possibleSwipeCords.minY)) {\n                var diffMinY = possibleSwipeCords.minY - distance.y;\n                distance.y = possibleSwipeCords.minY - diffMinY / 6;\n            } else if (this.isBeyondPossibleBottom(distance.y, possibleSwipeCords.maxY)) {\n                var diffMaxY = distance.y - possibleSwipeCords.maxY;\n                distance.y = possibleSwipeCords.maxY + diffMaxY / 6;\n            }\n        } else {\n            distance.y = this.top;\n        }\n        if (allowX) {\n            distance.x = this.left + (endCoords.x - startCoords.x);\n            if (this.isBeyondPossibleLeft(distance.x, possibleSwipeCords.minX)) {\n                var diffMinX = possibleSwipeCords.minX - distance.x;\n                distance.x = possibleSwipeCords.minX - diffMinX / 6;\n            } else if (this.isBeyondPossibleRight(distance.x, possibleSwipeCords.maxX)) {\n                var difMaxX = distance.x - possibleSwipeCords.maxX;\n                distance.x = possibleSwipeCords.maxX + difMaxX / 6;\n            }\n        } else {\n            distance.x = this.left;\n        }\n        return distance;\n    };\n    Zoom.prototype.isBeyondPossibleLeft = function(x, minX) {\n        return x >= minX;\n    };\n    Zoom.prototype.isBeyondPossibleRight = function(x, maxX) {\n        return x <= maxX;\n    };\n    Zoom.prototype.isBeyondPossibleTop = function(y, minY) {\n        return y >= minY;\n    };\n    Zoom.prototype.isBeyondPossibleBottom = function(y, maxY) {\n        return y <= maxY;\n    };\n    Zoom.prototype.isImageSlide = function(index) {\n        var currentItem = this.core.galleryItems[index];\n        return this.core.getSlideType(currentItem) === \"image\";\n    };\n    Zoom.prototype.getPossibleSwipeDragCords = function(scale) {\n        var $image = this.core.getSlideItem(this.core.index).find(\".lg-image\").first();\n        var bottom = this.core.mediaContainerPosition.bottom;\n        var imgRect = $image.get().getBoundingClientRect();\n        var imageHeight = imgRect.height;\n        var imageWidth = imgRect.width;\n        if (scale) {\n            imageHeight = imageHeight + scale * imageHeight;\n            imageWidth = imageWidth + scale * imageWidth;\n        }\n        var minY = (imageHeight - this.containerRect.height) / 2;\n        var maxY = (this.containerRect.height - imageHeight) / 2 + bottom;\n        var minX = (imageWidth - this.containerRect.width) / 2;\n        var maxX = (this.containerRect.width - imageWidth) / 2;\n        var possibleSwipeCords = {\n            minY: minY,\n            maxY: maxY,\n            minX: minX,\n            maxX: maxX\n        };\n        return possibleSwipeCords;\n    };\n    Zoom.prototype.setZoomSwipeStyles = function(LGel, distance) {\n        LGel.css(\"transform\", \"translate3d(\" + distance.x + \"px, \" + distance.y + \"px, 0)\");\n    };\n    Zoom.prototype.zoomSwipe = function() {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isMoved = false;\n        // Allow x direction drag\n        var allowX = false;\n        // Allow Y direction drag\n        var allowY = false;\n        var startTime = new Date();\n        var endTime = new Date();\n        var possibleSwipeCords;\n        var _LGel;\n        var $item = this.core.getSlideItem(this.core.index);\n        this.core.$inner.on(\"touchstart.lg\", function(e) {\n            // Allow zoom only on image\n            if (!_this.isImageSlide(_this.core.index)) {\n                return;\n            }\n            $item = _this.core.getSlideItem(_this.core.index);\n            if ((_this.$LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target)) && e.touches.length === 1 && _this.core.outer.hasClass(\"lg-zoomed\")) {\n                e.preventDefault();\n                startTime = new Date();\n                _this.core.touchAction = \"zoomSwipe\";\n                _LGel = _this.core.getSlideItem(_this.core.index).find(\".lg-img-wrap\").first();\n                var dragAllowedAxises = _this.getDragAllowedAxises(0);\n                allowY = dragAllowedAxises.allowY;\n                allowX = dragAllowedAxises.allowX;\n                if (allowX || allowY) {\n                    startCoords = _this.getSwipeCords(e);\n                }\n                possibleSwipeCords = _this.getPossibleSwipeDragCords();\n                // reset opacity and transition duration\n                _this.core.outer.addClass(\"lg-zoom-dragging lg-zoom-drag-transition\");\n            }\n        });\n        this.core.$inner.on(\"touchmove.lg\", function(e) {\n            if (e.touches.length === 1 && _this.core.touchAction === \"zoomSwipe\" && (_this.$LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target))) {\n                e.preventDefault();\n                _this.core.touchAction = \"zoomSwipe\";\n                endCoords = _this.getSwipeCords(e);\n                var distance = _this.getZoomSwipeCords(startCoords, endCoords, allowX, allowY, possibleSwipeCords);\n                if (Math.abs(endCoords.x - startCoords.x) > 15 || Math.abs(endCoords.y - startCoords.y) > 15) {\n                    isMoved = true;\n                    _this.setZoomSwipeStyles(_LGel, distance);\n                }\n            }\n        });\n        this.core.$inner.on(\"touchend.lg\", function(e) {\n            if (_this.core.touchAction === \"zoomSwipe\" && (_this.$LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target))) {\n                e.preventDefault();\n                _this.core.touchAction = undefined;\n                _this.core.outer.removeClass(\"lg-zoom-dragging\");\n                if (!isMoved) {\n                    return;\n                }\n                isMoved = false;\n                endTime = new Date();\n                var touchDuration = endTime.valueOf() - startTime.valueOf();\n                _this.touchendZoom(startCoords, endCoords, allowX, allowY, touchDuration);\n            }\n        });\n    };\n    Zoom.prototype.zoomDrag = function() {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isDragging = false;\n        var isMoved = false;\n        // Allow x direction drag\n        var allowX = false;\n        // Allow Y direction drag\n        var allowY = false;\n        var startTime;\n        var endTime;\n        var possibleSwipeCords;\n        var _LGel;\n        this.core.outer.on(\"mousedown.lg.zoom\", function(e) {\n            // Allow zoom only on image\n            if (!_this.isImageSlide(_this.core.index)) {\n                return;\n            }\n            var $item = _this.core.getSlideItem(_this.core.index);\n            if (_this.$LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target)) {\n                startTime = new Date();\n                _LGel = _this.core.getSlideItem(_this.core.index).find(\".lg-img-wrap\").first();\n                var dragAllowedAxises = _this.getDragAllowedAxises(0);\n                allowY = dragAllowedAxises.allowY;\n                allowX = dragAllowedAxises.allowX;\n                if (_this.core.outer.hasClass(\"lg-zoomed\")) {\n                    if (_this.$LG(e.target).hasClass(\"lg-object\") && (allowX || allowY)) {\n                        e.preventDefault();\n                        startCoords = _this.getDragCords(e);\n                        possibleSwipeCords = _this.getPossibleSwipeDragCords();\n                        isDragging = true;\n                        _this.core.outer.removeClass(\"lg-grab\").addClass(\"lg-grabbing lg-zoom-drag-transition lg-zoom-dragging\");\n                    // reset opacity and transition duration\n                    }\n                }\n            }\n        });\n        this.$LG(window).on(\"mousemove.lg.zoom.global\" + this.core.lgId, function(e) {\n            if (isDragging) {\n                isMoved = true;\n                endCoords = _this.getDragCords(e);\n                var distance = _this.getZoomSwipeCords(startCoords, endCoords, allowX, allowY, possibleSwipeCords);\n                _this.setZoomSwipeStyles(_LGel, distance);\n            }\n        });\n        this.$LG(window).on(\"mouseup.lg.zoom.global\" + this.core.lgId, function(e) {\n            if (isDragging) {\n                endTime = new Date();\n                isDragging = false;\n                _this.core.outer.removeClass(\"lg-zoom-dragging\");\n                // Fix for chrome mouse move on click\n                if (isMoved && (startCoords.x !== endCoords.x || startCoords.y !== endCoords.y)) {\n                    endCoords = _this.getDragCords(e);\n                    var touchDuration = endTime.valueOf() - startTime.valueOf();\n                    _this.touchendZoom(startCoords, endCoords, allowX, allowY, touchDuration);\n                }\n                isMoved = false;\n            }\n            _this.core.outer.removeClass(\"lg-grabbing\").addClass(\"lg-grab\");\n        });\n    };\n    Zoom.prototype.closeGallery = function() {\n        this.resetZoom();\n        this.zoomInProgress = false;\n    };\n    Zoom.prototype.destroy = function() {\n        // Unbind all events added by lightGallery zoom plugin\n        this.$LG(window).off(\".lg.zoom.global\" + this.core.lgId);\n        this.core.LGel.off(\".lg.zoom\");\n        this.core.LGel.off(\".zoom\");\n        clearTimeout(this.zoomableTimeout);\n        this.zoomableTimeout = false;\n    };\n    return Zoom;\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Zoom); //# sourceMappingURL=lg-zoom.es5.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3BsdWdpbnMvem9vbS9sZy16b29tLmVzNS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7O0NBS0MsR0FFRDs7Ozs7Ozs7Ozs7Ozs4RUFhOEUsR0FFOUUsSUFBSUEsV0FBVztJQUNYQSxXQUFXQyxPQUFPQyxNQUFNLElBQUksU0FBU0YsU0FBU0csQ0FBQztRQUMzQyxJQUFLLElBQUlDLEdBQUdDLElBQUksR0FBR0MsSUFBSUMsVUFBVUMsTUFBTSxFQUFFSCxJQUFJQyxHQUFHRCxJQUFLO1lBQ2pERCxJQUFJRyxTQUFTLENBQUNGLEVBQUU7WUFDaEIsSUFBSyxJQUFJSSxLQUFLTCxFQUFHLElBQUlILE9BQU9TLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNSLEdBQUdLLElBQUlOLENBQUMsQ0FBQ00sRUFBRSxHQUFHTCxDQUFDLENBQUNLLEVBQUU7UUFDaEY7UUFDQSxPQUFPTjtJQUNYO0lBQ0EsT0FBT0gsU0FBU2EsS0FBSyxDQUFDLElBQUksRUFBRU47QUFDaEM7QUFFQSxJQUFJTyxlQUFlO0lBQ2ZDLE9BQU87SUFDUEMsTUFBTTtJQUNOQyxjQUFjO0lBQ2RDLFlBQVk7SUFDWkMsb0JBQW9CO0lBQ3BCQyxpQkFBaUI7UUFDYkMsUUFBUTtRQUNSQyxTQUFTO0lBQ2I7SUFDQUMsaUJBQWlCO0lBQ2pCQyxtQkFBbUI7UUFDZkgsUUFBUTtRQUNSQyxTQUFTO1FBQ1RHLGdCQUFnQjtJQUNwQjtBQUNKO0FBRUE7Ozs7R0FJRyxHQUNILElBQUlDLFdBQVc7SUFDWEMsa0JBQWtCO0lBQ2xCQyxNQUFNO0lBQ05DLFVBQVU7SUFDVkMsaUJBQWlCO0lBQ2pCQyxjQUFjO0lBQ2RDLG9CQUFvQjtJQUNwQkMsWUFBWTtJQUNaQyxXQUFXO0lBQ1hDLGVBQWU7SUFDZkMsYUFBYTtJQUNiQyxZQUFZO0lBQ1pDLGFBQWE7SUFDYkMsV0FBVztJQUNYQyxVQUFVO0lBQ1ZDLFNBQVM7SUFDVEMsaUJBQWlCO0lBQ2pC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Q0FBQzVLLElBQUksQ0FBQ3lILElBQUk7UUFDdkQsSUFBSSxDQUFDekgsSUFBSSxDQUFDeUIsSUFBSSxDQUFDbUosR0FBRyxDQUFDO1FBQ25CLElBQUksQ0FBQzVLLElBQUksQ0FBQ3lCLElBQUksQ0FBQ21KLEdBQUcsQ0FBQztRQUNuQjFELGFBQWEsSUFBSSxDQUFDaEcsZUFBZTtRQUNqQyxJQUFJLENBQUNBLGVBQWUsR0FBRztJQUMzQjtJQUNBLE9BQU9yQjtBQUNYO0FBRUEsaUVBQWVBLElBQUlBLEVBQUMsQ0FDcEIsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFydGZ1cnlfcmVhY3QvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3BsdWdpbnMvem9vbS9sZy16b29tLmVzNS5qcz9lMDYxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogbGlnaHRnYWxsZXJ5IHwgMi43LjIgfCBTZXB0ZW1iZXIgMjB0aCAyMDIzXG4gKiBodHRwOi8vd3d3LmxpZ2h0Z2FsbGVyeWpzLmNvbS9cbiAqIENvcHlyaWdodCAoYykgMjAyMCBTYWNoaW4gTmVyYXZhdGg7XG4gKiBAbGljZW5zZSBHUEx2M1xuICovXG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG52YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xuXG52YXIgem9vbVNldHRpbmdzID0ge1xyXG4gICAgc2NhbGU6IDEsXHJcbiAgICB6b29tOiB0cnVlLFxyXG4gICAgaW5maW5pdGVab29tOiB0cnVlLFxyXG4gICAgYWN0dWFsU2l6ZTogdHJ1ZSxcclxuICAgIHNob3dab29tSW5PdXRJY29uczogZmFsc2UsXHJcbiAgICBhY3R1YWxTaXplSWNvbnM6IHtcclxuICAgICAgICB6b29tSW46ICdsZy16b29tLWluJyxcclxuICAgICAgICB6b29tT3V0OiAnbGctem9vbS1vdXQnLFxyXG4gICAgfSxcclxuICAgIGVuYWJsZVpvb21BZnRlcjogMzAwLFxyXG4gICAgem9vbVBsdWdpblN0cmluZ3M6IHtcclxuICAgICAgICB6b29tSW46ICdab29tIGluJyxcclxuICAgICAgICB6b29tT3V0OiAnWm9vbSBvdXQnLFxyXG4gICAgICAgIHZpZXdBY3R1YWxTaXplOiAnVmlldyBhY3R1YWwgc2l6ZScsXHJcbiAgICB9LFxyXG59O1xuXG4vKipcclxuICogTGlzdCBvZiBsaWdodEdhbGxlcnkgZXZlbnRzXHJcbiAqIEFsbCBldmVudHMgc2hvdWxkIGJlIGRvY3VtZW50ZWQgaGVyZVxyXG4gKiBCZWxvdyBpbnRlcmZhY2VzIGFyZSB1c2VkIHRvIGJ1aWxkIHRoZSB3ZWJzaXRlIGRvY3VtZW50YXRpb25zXHJcbiAqICovXHJcbnZhciBsR0V2ZW50cyA9IHtcclxuICAgIGFmdGVyQXBwZW5kU2xpZGU6ICdsZ0FmdGVyQXBwZW5kU2xpZGUnLFxyXG4gICAgaW5pdDogJ2xnSW5pdCcsXHJcbiAgICBoYXNWaWRlbzogJ2xnSGFzVmlkZW8nLFxyXG4gICAgY29udGFpbmVyUmVzaXplOiAnbGdDb250YWluZXJSZXNpemUnLFxyXG4gICAgdXBkYXRlU2xpZGVzOiAnbGdVcGRhdGVTbGlkZXMnLFxyXG4gICAgYWZ0ZXJBcHBlbmRTdWJIdG1sOiAnbGdBZnRlckFwcGVuZFN1Ykh0bWwnLFxyXG4gICAgYmVmb3JlT3BlbjogJ2xnQmVmb3JlT3BlbicsXHJcbiAgICBhZnRlck9wZW46ICdsZ0FmdGVyT3BlbicsXHJcbiAgICBzbGlkZUl0ZW1Mb2FkOiAnbGdTbGlkZUl0ZW1Mb2FkJyxcclxuICAgIGJlZm9yZVNsaWRlOiAnbGdCZWZvcmVTbGlkZScsXHJcbiAgICBhZnRlclNsaWRlOiAnbGdBZnRlclNsaWRlJyxcclxuICAgIHBvc3RlckNsaWNrOiAnbGdQb3N0ZXJDbGljaycsXHJcbiAgICBkcmFnU3RhcnQ6ICdsZ0RyYWdTdGFydCcsXHJcbiAgICBkcmFnTW92ZTogJ2xnRHJhZ01vdmUnLFxyXG4gICAgZHJhZ0VuZDogJ2xnRHJhZ0VuZCcsXHJcbiAgICBiZWZvcmVOZXh0U2xpZGU6ICdsZ0JlZm9yZU5leHRTbGlkZScsXHJcbiAgICBiZWZvcmVQcmV2U2xpZGU6ICdsZ0JlZm9yZVByZXZTbGlkZScsXHJcbiAgICBiZWZvcmVDbG9zZTogJ2xnQmVmb3JlQ2xvc2UnLFxyXG4gICAgYWZ0ZXJDbG9zZTogJ2xnQWZ0ZXJDbG9zZScsXHJcbiAgICByb3RhdGVMZWZ0OiAnbGdSb3RhdGVMZWZ0JyxcclxuICAgIHJvdGF0ZVJpZ2h0OiAnbGdSb3RhdGVSaWdodCcsXHJcbiAgICBmbGlwSG9yaXpvbnRhbDogJ2xnRmxpcEhvcml6b250YWwnLFxyXG4gICAgZmxpcFZlcnRpY2FsOiAnbGdGbGlwVmVydGljYWwnLFxyXG4gICAgYXV0b3BsYXk6ICdsZ0F1dG9wbGF5JyxcclxuICAgIGF1dG9wbGF5U3RhcnQ6ICdsZ0F1dG9wbGF5U3RhcnQnLFxyXG4gICAgYXV0b3BsYXlTdG9wOiAnbGdBdXRvcGxheVN0b3AnLFxyXG59O1xuXG52YXIgWk9PTV9UUkFOU0lUSU9OX0RVUkFUSU9OID0gNTAwO1xyXG52YXIgWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFpvb20oaW5zdGFuY2UsICRMRykge1xyXG4gICAgICAgIC8vIGdldCBsaWdodEdhbGxlcnkgY29yZSBwbHVnaW4gaW5zdGFuY2VcclxuICAgICAgICB0aGlzLmNvcmUgPSBpbnN0YW5jZTtcclxuICAgICAgICB0aGlzLiRMRyA9ICRMRztcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHpvb21TZXR0aW5ncyksIHRoaXMuY29yZS5zZXR0aW5ncyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyBBcHBlbmQgWm9vbSBjb250cm9scy4gQWN0dWFsIHNpemUsIFpvb20taW4sIFpvb20tb3V0XHJcbiAgICBab29tLnByb3RvdHlwZS5idWlsZFRlbXBsYXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgem9vbUljb25zID0gdGhpcy5zZXR0aW5ncy5zaG93Wm9vbUluT3V0SWNvbnNcclxuICAgICAgICAgICAgPyBcIjxidXR0b24gaWQ9XFxcIlwiICsgdGhpcy5jb3JlLmdldElkTmFtZSgnbGctem9vbS1pbicpICsgXCJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgYXJpYS1sYWJlbD1cXFwiXCIgKyB0aGlzLnNldHRpbmdzLnpvb21QbHVnaW5TdHJpbmdzWyd6b29tSW4nXSArIFwiXFxcIiBjbGFzcz1cXFwibGctem9vbS1pbiBsZy1pY29uXFxcIj48L2J1dHRvbj48YnV0dG9uIGlkPVxcXCJcIiArIHRoaXMuY29yZS5nZXRJZE5hbWUoJ2xnLXpvb20tb3V0JykgKyBcIlxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBhcmlhLWxhYmVsPVxcXCJcIiArIHRoaXMuc2V0dGluZ3Muem9vbVBsdWdpblN0cmluZ3NbJ3pvb21JbiddICsgXCJcXFwiIGNsYXNzPVxcXCJsZy16b29tLW91dCBsZy1pY29uXFxcIj48L2J1dHRvbj5cIlxyXG4gICAgICAgICAgICA6ICcnO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmFjdHVhbFNpemUpIHtcclxuICAgICAgICAgICAgem9vbUljb25zICs9IFwiPGJ1dHRvbiBpZD1cXFwiXCIgKyB0aGlzLmNvcmUuZ2V0SWROYW1lKCdsZy1hY3R1YWwtc2l6ZScpICsgXCJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgYXJpYS1sYWJlbD1cXFwiXCIgKyB0aGlzLnNldHRpbmdzLnpvb21QbHVnaW5TdHJpbmdzWyd2aWV3QWN0dWFsU2l6ZSddICsgXCJcXFwiIGNsYXNzPVxcXCJcIiArIHRoaXMuc2V0dGluZ3MuYWN0dWFsU2l6ZUljb25zLnpvb21JbiArIFwiIGxnLWljb25cXFwiPjwvYnV0dG9uPlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvcmUub3V0ZXIuYWRkQ2xhc3MoJ2xnLXVzZS10cmFuc2l0aW9uLWZvci16b29tJyk7XHJcbiAgICAgICAgdGhpcy5jb3JlLiR0b29sYmFyLmZpcnN0KCkuYXBwZW5kKHpvb21JY29ucyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzYyBFbmFibGUgem9vbSBvcHRpb24gb25seSBvbmNlIHRoZSBpbWFnZSBpcyBjb21wbGV0ZWx5IGxvYWRlZFxyXG4gICAgICogSWYgem9vbUZyb21PcmlnaW4gaXMgdHJ1ZSwgWm9vbSBpcyBlbmFibGVkIG9uY2UgdGhlIGR1bW15IGltYWdlIGhhcyBiZWVuIGluc2VydGVkXHJcbiAgICAgKlxyXG4gICAgICogWm9vbSBzdHlsZXMgYXJlIGRlZmluZWQgdW5kZXIgbGctem9vbWFibGUgQ1NTIGNsYXNzLlxyXG4gICAgICovXHJcbiAgICBab29tLnByb3RvdHlwZS5lbmFibGVab29tID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBkZWxheSB3aWxsIGJlIDAgZXhjZXB0IGZpcnN0IHRpbWVcclxuICAgICAgICB2YXIgX3NwZWVkID0gdGhpcy5zZXR0aW5ncy5lbmFibGVab29tQWZ0ZXIgKyBldmVudC5kZXRhaWwuZGVsYXk7XHJcbiAgICAgICAgLy8gc2V0IF9zcGVlZCB2YWx1ZSAwIGlmIGdhbGxlcnkgb3BlbmVkIGZyb20gZGlyZWN0IHVybCBhbmQgaWYgaXQgaXMgZmlyc3Qgc2xpZGVcclxuICAgICAgICBpZiAodGhpcy4kTEcoJ2JvZHknKS5maXJzdCgpLmhhc0NsYXNzKCdsZy1mcm9tLWhhc2gnKSAmJlxyXG4gICAgICAgICAgICBldmVudC5kZXRhaWwuZGVsYXkpIHtcclxuICAgICAgICAgICAgLy8gd2lsbCBleGVjdXRlIG9ubHkgb25jZVxyXG4gICAgICAgICAgICBfc3BlZWQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGxnLWZyb20taGFzaCB0byBlbmFibGUgc3RhcnRpbmcgYW5pbWF0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLiRMRygnYm9keScpLmZpcnN0KCkucmVtb3ZlQ2xhc3MoJ2xnLWZyb20taGFzaCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnpvb21hYmxlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmlzSW1hZ2VTbGlkZShfdGhpcy5jb3JlLmluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmNvcmUuZ2V0U2xpZGVJdGVtKGV2ZW50LmRldGFpbC5pbmRleCkuYWRkQ2xhc3MoJ2xnLXpvb21hYmxlJyk7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwuaW5kZXggPT09IF90aGlzLmNvcmUuaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFpvb21Fc3NlbnRpYWxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBfc3BlZWQgKyAzMCk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuZW5hYmxlWm9vbU9uU2xpZGVJdGVtTG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBBZGQgem9vbWFibGUgY2xhc3NcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5zbGlkZUl0ZW1Mb2FkICsgXCIuem9vbVwiLCB0aGlzLmVuYWJsZVpvb20uYmluZCh0aGlzKSk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuZ2V0RHJhZ0NvcmRzID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiBlLnBhZ2VYLFxyXG4gICAgICAgICAgICB5OiBlLnBhZ2VZLFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuZ2V0U3dpcGVDb3JkcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIHggPSBlLnRvdWNoZXNbMF0ucGFnZVg7XHJcbiAgICAgICAgdmFyIHkgPSBlLnRvdWNoZXNbMF0ucGFnZVk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogeCxcclxuICAgICAgICAgICAgeTogeSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmdldERyYWdBbGxvd2VkQXhpc2VzID0gZnVuY3Rpb24gKHNjYWxlLCBzY2FsZURpZmYpIHtcclxuICAgICAgICB2YXIgJGltYWdlID0gdGhpcy5jb3JlXHJcbiAgICAgICAgICAgIC5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLWltYWdlJylcclxuICAgICAgICAgICAgLmZpcnN0KClcclxuICAgICAgICAgICAgLmdldCgpO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSAwO1xyXG4gICAgICAgIHZhciB3aWR0aCA9IDA7XHJcbiAgICAgICAgdmFyIHJlY3QgPSAkaW1hZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgaWYgKHNjYWxlKSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9ICRpbWFnZS5vZmZzZXRIZWlnaHQgKiBzY2FsZTtcclxuICAgICAgICAgICAgd2lkdGggPSAkaW1hZ2Uub2Zmc2V0V2lkdGggKiBzY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2NhbGVEaWZmKSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHJlY3QuaGVpZ2h0ICsgc2NhbGVEaWZmICogcmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHdpZHRoID0gcmVjdC53aWR0aCArIHNjYWxlRGlmZiAqIHJlY3Qud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSByZWN0LmhlaWdodDtcclxuICAgICAgICAgICAgd2lkdGggPSByZWN0LndpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYWxsb3dZID0gaGVpZ2h0ID4gdGhpcy5jb250YWluZXJSZWN0LmhlaWdodDtcclxuICAgICAgICB2YXIgYWxsb3dYID0gd2lkdGggPiB0aGlzLmNvbnRhaW5lclJlY3Qud2lkdGg7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWxsb3dYOiBhbGxvd1gsXHJcbiAgICAgICAgICAgIGFsbG93WTogYWxsb3dZLFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuc2V0Wm9vbUVzc2VudGlhbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJSZWN0ID0gdGhpcy5jb3JlLiRjb250ZW50LmdldCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGRlc2MgSW1hZ2Ugem9vbVxyXG4gICAgICogVHJhbnNsYXRlIHRoZSB3cmFwIGFuZCBzY2FsZSB0aGUgaW1hZ2UgdG8gZ2V0IGJldHRlciB1c2VyIGV4cGVyaWVuY2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2NhbGUgLSBab29tIGRlY3JlbWVudC9pbmNyZW1lbnQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgWm9vbS5wcm90b3R5cGUuem9vbUltYWdlID0gZnVuY3Rpb24gKHNjYWxlLCBzY2FsZURpZmYsIHJlcG9zaXRpb24sIHJlc2V0VG9NYXgpIHtcclxuICAgICAgICBpZiAoTWF0aC5hYnMoc2NhbGVEaWZmKSA8PSAwKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIG9mZnNldFggPSB0aGlzLmNvbnRhaW5lclJlY3Qud2lkdGggLyAyICsgdGhpcy5jb250YWluZXJSZWN0LmxlZnQ7XHJcbiAgICAgICAgdmFyIG9mZnNldFkgPSB0aGlzLmNvbnRhaW5lclJlY3QuaGVpZ2h0IC8gMiArXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmVjdC50b3AgK1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvcDtcclxuICAgICAgICB2YXIgb3JpZ2luYWxYO1xyXG4gICAgICAgIHZhciBvcmlnaW5hbFk7XHJcbiAgICAgICAgaWYgKHNjYWxlID09PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkcmFnQWxsb3dlZEF4aXNlcyA9IHRoaXMuZ2V0RHJhZ0FsbG93ZWRBeGlzZXMoMCwgc2NhbGVEaWZmKTtcclxuICAgICAgICB2YXIgYWxsb3dZID0gZHJhZ0FsbG93ZWRBeGlzZXMuYWxsb3dZLCBhbGxvd1ggPSBkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1g7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb25DaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsWCA9IHRoaXMubGVmdCAvICh0aGlzLnNjYWxlIC0gc2NhbGVEaWZmKTtcclxuICAgICAgICAgICAgb3JpZ2luYWxZID0gdGhpcy50b3AgLyAodGhpcy5zY2FsZSAtIHNjYWxlRGlmZik7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZVggPSBvZmZzZXRYIC0gb3JpZ2luYWxYO1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VZID0gb2Zmc2V0WSAtIG9yaWdpbmFsWTtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBvc3NpYmxlU3dpcGVDb3JkcyA9IHRoaXMuZ2V0UG9zc2libGVTd2lwZURyYWdDb3JkcyhzY2FsZURpZmYpO1xyXG4gICAgICAgIHZhciB4O1xyXG4gICAgICAgIHZhciB5O1xyXG4gICAgICAgIHZhciBfeCA9IG9mZnNldFggLSB0aGlzLnBhZ2VYO1xyXG4gICAgICAgIHZhciBfeSA9IG9mZnNldFkgLSB0aGlzLnBhZ2VZO1xyXG4gICAgICAgIGlmIChzY2FsZSAtIHNjYWxlRGlmZiA+IDEpIHtcclxuICAgICAgICAgICAgdmFyIHNjYWxlVmFsID0gKHNjYWxlIC0gc2NhbGVEaWZmKSAvIE1hdGguYWJzKHNjYWxlRGlmZik7XHJcbiAgICAgICAgICAgIF94ID1cclxuICAgICAgICAgICAgICAgIChzY2FsZURpZmYgPCAwID8gLV94IDogX3gpICtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnQgKiAoc2NhbGVWYWwgKyAoc2NhbGVEaWZmIDwgMCA/IC0xIDogMSkpO1xyXG4gICAgICAgICAgICBfeSA9XHJcbiAgICAgICAgICAgICAgICAoc2NhbGVEaWZmIDwgMCA/IC1feSA6IF95KSArXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3AgKiAoc2NhbGVWYWwgKyAoc2NhbGVEaWZmIDwgMCA/IC0xIDogMSkpO1xyXG4gICAgICAgICAgICB4ID0gX3ggLyBzY2FsZVZhbDtcclxuICAgICAgICAgICAgeSA9IF95IC8gc2NhbGVWYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgc2NhbGVWYWwgPSAoc2NhbGUgLSBzY2FsZURpZmYpICogc2NhbGVEaWZmO1xyXG4gICAgICAgICAgICB4ID0gX3ggKiBzY2FsZVZhbDtcclxuICAgICAgICAgICAgeSA9IF95ICogc2NhbGVWYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChhbGxvd1gpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQmV5b25kUG9zc2libGVMZWZ0KHgsIHBvc3NpYmxlU3dpcGVDb3Jkcy5taW5YKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSBwb3NzaWJsZVN3aXBlQ29yZHMubWluWDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNCZXlvbmRQb3NzaWJsZVJpZ2h0KHgsIHBvc3NpYmxlU3dpcGVDb3Jkcy5tYXhYKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSBwb3NzaWJsZVN3aXBlQ29yZHMubWF4WDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA8IHBvc3NpYmxlU3dpcGVDb3Jkcy5taW5YKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBwb3NzaWJsZVN3aXBlQ29yZHMubWluWDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+IHBvc3NpYmxlU3dpcGVDb3Jkcy5tYXhYKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSBwb3NzaWJsZVN3aXBlQ29yZHMubWF4WDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQHRvZG8gZml4IHRoaXNcclxuICAgICAgICAgICAgaWYgKGFsbG93WSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNCZXlvbmRQb3NzaWJsZVRvcCh5LCBwb3NzaWJsZVN3aXBlQ29yZHMubWluWSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB5ID0gcG9zc2libGVTd2lwZUNvcmRzLm1pblk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzQmV5b25kUG9zc2libGVCb3R0b20oeSwgcG9zc2libGVTd2lwZUNvcmRzLm1heFkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IHBvc3NpYmxlU3dpcGVDb3Jkcy5tYXhZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRyYW5zbGF0ZSB2YWx1ZSBiYXNlZCBvbiBpbmRleCBvZiBiZXlvbmQgdGhlIHZpZXdwb3J0LCB1dGlsaXplIHRoZSBhdmFpbGFibGUgc3BhY2UgdG8gcHJldmVudCBpbWFnZSBiZWluZyBjdXQgb3V0XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NhbGUgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9JZiBpbWFnZSBnb2VzIGJleW9uZCB2aWV3cG9ydCB0b3AsIHVzZSB0aGUgbWluaW0gcG9zc2libGUgdHJhbnNsYXRlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPCBwb3NzaWJsZVN3aXBlQ29yZHMubWluWSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gcG9zc2libGVTd2lwZUNvcmRzLm1pblk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHkgPiBwb3NzaWJsZVN3aXBlQ29yZHMubWF4WSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gcG9zc2libGVTd2lwZUNvcmRzLm1heFk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0Wm9vbVN0eWxlcyh7XHJcbiAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgIHk6IHksXHJcbiAgICAgICAgICAgIHNjYWxlOiBzY2FsZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxlZnQgPSB4O1xyXG4gICAgICAgIHRoaXMudG9wID0geTtcclxuICAgICAgICBpZiAocmVzZXRUb01heCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFpvb21JbWFnZVNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUucmVzZXRJbWFnZVRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ltYWdlU2xpZGUoaW5kZXgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyICRpbWFnZSA9IHRoaXMuY29yZS5nZXRTbGlkZUl0ZW0oaW5kZXgpLmZpbmQoJy5sZy1pbWFnZScpLmZpcnN0KCk7XHJcbiAgICAgICAgdGhpcy5pbWFnZVJlc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgJGltYWdlLnJlbW92ZUNsYXNzKCdyZXNldC10cmFuc2l0aW9uIHJlc2V0LXRyYW5zaXRpb24teSByZXNldC10cmFuc2l0aW9uLXgnKTtcclxuICAgICAgICB0aGlzLmNvcmUub3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLWFjdHVhbC1zaXplJyk7XHJcbiAgICAgICAgJGltYWdlLmNzcygnd2lkdGgnLCAnYXV0bycpLmNzcygnaGVpZ2h0JywgJ2F1dG8nKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGltYWdlLnJlbW92ZUNsYXNzKCduby10cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgfSwgMTApO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLnNldFpvb21JbWFnZVNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgJGltYWdlID0gdGhpcy5jb3JlXHJcbiAgICAgICAgICAgIC5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLWltYWdlJylcclxuICAgICAgICAgICAgLmZpcnN0KCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3R1YWxTaXplU2NhbGUgPSBfdGhpcy5nZXRDdXJyZW50SW1hZ2VBY3R1YWxTaXplU2NhbGUoKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnNjYWxlID49IGFjdHVhbFNpemVTY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgJGltYWdlLmFkZENsYXNzKCduby10cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pbWFnZVJlc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIFpPT01fVFJBTlNJVElPTl9EVVJBVElPTik7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3R1YWxTaXplU2NhbGUgPSBfdGhpcy5nZXRDdXJyZW50SW1hZ2VBY3R1YWxTaXplU2NhbGUoKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnNjYWxlID49IGFjdHVhbFNpemVTY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdBbGxvd2VkQXhpc2VzID0gX3RoaXMuZ2V0RHJhZ0FsbG93ZWRBeGlzZXMoX3RoaXMuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgJGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgLmNzcygnd2lkdGgnLCAkaW1hZ2UuZ2V0KCkubmF0dXJhbFdpZHRoICsgJ3B4JylcclxuICAgICAgICAgICAgICAgICAgICAuY3NzKCdoZWlnaHQnLCAkaW1hZ2UuZ2V0KCkubmF0dXJhbEhlaWdodCArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29yZS5vdXRlci5hZGRDbGFzcygnbGctYWN0dWFsLXNpemUnKTtcclxuICAgICAgICAgICAgICAgIGlmIChkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1ggJiYgZHJhZ0FsbG93ZWRBeGlzZXMuYWxsb3dZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGltYWdlLmFkZENsYXNzKCdyZXNldC10cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1ggJiZcclxuICAgICAgICAgICAgICAgICAgICAhZHJhZ0FsbG93ZWRBeGlzZXMuYWxsb3dZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGltYWdlLmFkZENsYXNzKCdyZXNldC10cmFuc2l0aW9uLXgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1ggJiZcclxuICAgICAgICAgICAgICAgICAgICBkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1kpIHtcclxuICAgICAgICAgICAgICAgICAgICAkaW1hZ2UuYWRkQ2xhc3MoJ3Jlc2V0LXRyYW5zaXRpb24teScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgWk9PTV9UUkFOU0lUSU9OX0RVUkFUSU9OICsgNTApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGRlc2MgYXBwbHkgc2NhbGUzZCB0byBpbWFnZSBhbmQgdHJhbnNsYXRlIHRvIGltYWdlIHdyYXBcclxuICAgICAqIEBwYXJhbSB7c3R5bGV9IFgsWSBhbmQgc2NhbGVcclxuICAgICAqL1xyXG4gICAgWm9vbS5wcm90b3R5cGUuc2V0Wm9vbVN0eWxlcyA9IGZ1bmN0aW9uIChzdHlsZSkge1xyXG4gICAgICAgIHZhciAkaW1hZ2VXcmFwID0gdGhpcy5jb3JlXHJcbiAgICAgICAgICAgIC5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLWltZy13cmFwJylcclxuICAgICAgICAgICAgLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyICRpbWFnZSA9IHRoaXMuY29yZVxyXG4gICAgICAgICAgICAuZ2V0U2xpZGVJdGVtKHRoaXMuY29yZS5pbmRleClcclxuICAgICAgICAgICAgLmZpbmQoJy5sZy1pbWFnZScpXHJcbiAgICAgICAgICAgIC5maXJzdCgpO1xyXG4gICAgICAgIHZhciAkZHVtbXlJbWFnZSA9IHRoaXMuY29yZS5vdXRlclxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLWN1cnJlbnQgLmxnLWR1bW15LWltZycpXHJcbiAgICAgICAgICAgIC5maXJzdCgpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBzdHlsZS5zY2FsZTtcclxuICAgICAgICAkaW1hZ2UuY3NzKCd0cmFuc2Zvcm0nLCAnc2NhbGUzZCgnICsgc3R5bGUuc2NhbGUgKyAnLCAnICsgc3R5bGUuc2NhbGUgKyAnLCAxKScpO1xyXG4gICAgICAgICRkdW1teUltYWdlLmNzcygndHJhbnNmb3JtJywgJ3NjYWxlM2QoJyArIHN0eWxlLnNjYWxlICsgJywgJyArIHN0eWxlLnNjYWxlICsgJywgMSknKTtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgKyBzdHlsZS54ICsgJ3B4LCAnICsgc3R5bGUueSArICdweCwgMCknO1xyXG4gICAgICAgICRpbWFnZVdyYXAuY3NzKCd0cmFuc2Zvcm0nLCB0cmFuc2Zvcm0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGluZGV4IC0gSW5kZXggb2YgdGhlIGN1cnJlbnQgc2xpZGVcclxuICAgICAqIEBwYXJhbSBldmVudCAtIGV2ZW50IHdpbGwgYmUgYXZhaWxhYmxlIG9ubHkgaWYgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBjbGlja2luZy90YXBpbmcgdGhlIGltYWdzXHJcbiAgICAgKi9cclxuICAgIFpvb20ucHJvdG90eXBlLnNldEFjdHVhbFNpemUgPSBmdW5jdGlvbiAoaW5kZXgsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy56b29tSW5Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuem9vbUluUHJvZ3Jlc3MgPSB0cnVlO1xyXG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRoaXMuY29yZS5nYWxsZXJ5SXRlbXNbdGhpcy5jb3JlLmluZGV4XTtcclxuICAgICAgICB0aGlzLnJlc2V0SW1hZ2VUcmFuc2xhdGUoaW5kZXgpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBBbGxvdyB6b29tIG9ubHkgb24gaW1hZ2VcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50SXRlbS5zcmMgfHxcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIuaGFzQ2xhc3MoJ2xnLWZpcnN0LXNsaWRlLWxvYWRpbmcnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IF90aGlzLmdldEN1cnJlbnRJbWFnZUFjdHVhbFNpemVTY2FsZSgpO1xyXG4gICAgICAgICAgICB2YXIgcHJldlNjYWxlID0gX3RoaXMuc2NhbGU7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5jb3JlLm91dGVyLmhhc0NsYXNzKCdsZy16b29tZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2NhbGUgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2NhbGUgPSBfdGhpcy5nZXRTY2FsZShzY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuc2V0UGFnZUNvcmRzKGV2ZW50KTtcclxuICAgICAgICAgICAgX3RoaXMuYmVnaW5ab29tKF90aGlzLnNjYWxlKTtcclxuICAgICAgICAgICAgX3RoaXMuem9vbUltYWdlKF90aGlzLnNjYWxlLCBfdGhpcy5zY2FsZSAtIHByZXZTY2FsZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jb3JlLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1ncmFiYmluZycpLmFkZENsYXNzKCdsZy1ncmFiJyk7XHJcbiAgICAgICAgfSwgNjApO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy56b29tSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgIH0sIFpPT01fVFJBTlNJVElPTl9EVVJBVElPTiArIDExMCk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuZ2V0TmF0dXJhbFdpZHRoID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdmFyICRpbWFnZSA9IHRoaXMuY29yZS5nZXRTbGlkZUl0ZW0oaW5kZXgpLmZpbmQoJy5sZy1pbWFnZScpLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIG5hdHVyYWxXaWR0aCA9IHRoaXMuY29yZS5nYWxsZXJ5SXRlbXNbaW5kZXhdLndpZHRoO1xyXG4gICAgICAgIHJldHVybiBuYXR1cmFsV2lkdGhcclxuICAgICAgICAgICAgPyBwYXJzZUZsb2F0KG5hdHVyYWxXaWR0aClcclxuICAgICAgICAgICAgOiAkaW1hZ2UuZ2V0KCkubmF0dXJhbFdpZHRoO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmdldEFjdHVhbFNpemVTY2FsZSA9IGZ1bmN0aW9uIChuYXR1cmFsV2lkdGgsIHdpZHRoKSB7XHJcbiAgICAgICAgdmFyIF9zY2FsZTtcclxuICAgICAgICB2YXIgc2NhbGU7XHJcbiAgICAgICAgaWYgKG5hdHVyYWxXaWR0aCA+PSB3aWR0aCkge1xyXG4gICAgICAgICAgICBfc2NhbGUgPSBuYXR1cmFsV2lkdGggLyB3aWR0aDtcclxuICAgICAgICAgICAgc2NhbGUgPSBfc2NhbGUgfHwgMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNjYWxlID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNjYWxlO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmdldEN1cnJlbnRJbWFnZUFjdHVhbFNpemVTY2FsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJGltYWdlID0gdGhpcy5jb3JlXHJcbiAgICAgICAgICAgIC5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLWltYWdlJylcclxuICAgICAgICAgICAgLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gJGltYWdlLmdldCgpLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHZhciBuYXR1cmFsV2lkdGggPSB0aGlzLmdldE5hdHVyYWxXaWR0aCh0aGlzLmNvcmUuaW5kZXgpIHx8IHdpZHRoO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjdHVhbFNpemVTY2FsZShuYXR1cmFsV2lkdGgsIHdpZHRoKTtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5nZXRQYWdlQ29yZHMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgY29yZHMgPSB7fTtcclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY29yZHMueCA9IGV2ZW50LnBhZ2VYIHx8IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVg7XHJcbiAgICAgICAgICAgIGNvcmRzLnkgPSBldmVudC5wYWdlWSB8fCBldmVudC50b3VjaGVzWzBdLnBhZ2VZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lclJlY3QgPSB0aGlzLmNvcmUuJGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIC5nZXQoKVxyXG4gICAgICAgICAgICAgICAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBjb3Jkcy54ID0gY29udGFpbmVyUmVjdC53aWR0aCAvIDIgKyBjb250YWluZXJSZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgIGNvcmRzLnkgPVxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyUmVjdC5oZWlnaHQgLyAyICsgdGhpcy5zY3JvbGxUb3AgKyBjb250YWluZXJSZWN0LnRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvcmRzO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLnNldFBhZ2VDb3JkcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBwYWdlQ29yZHMgPSB0aGlzLmdldFBhZ2VDb3JkcyhldmVudCk7XHJcbiAgICAgICAgdGhpcy5wYWdlWCA9IHBhZ2VDb3Jkcy54O1xyXG4gICAgICAgIHRoaXMucGFnZVkgPSBwYWdlQ29yZHMueTtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5tYW5hZ2VBY3R1YWxQaXhlbENsYXNzTmFtZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICRhY3R1YWxTaXplID0gdGhpcy5jb3JlLmdldEVsZW1lbnRCeUlkKCdsZy1hY3R1YWwtc2l6ZScpO1xyXG4gICAgICAgICRhY3R1YWxTaXplXHJcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLmFjdHVhbFNpemVJY29ucy56b29tSW4pXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmFjdHVhbFNpemVJY29ucy56b29tT3V0KTtcclxuICAgIH07XHJcbiAgICAvLyBJZiB0cnVlLCB6b29tZWQgLSBpbiBlbHNlIHpvb21lZCBvdXRcclxuICAgIFpvb20ucHJvdG90eXBlLmJlZ2luWm9vbSA9IGZ1bmN0aW9uIChzY2FsZSkge1xyXG4gICAgICAgIHRoaXMuY29yZS5vdXRlci5yZW1vdmVDbGFzcygnbGctem9vbS1kcmFnLXRyYW5zaXRpb24gbGctem9vbS1kcmFnZ2luZycpO1xyXG4gICAgICAgIGlmIChzY2FsZSA+IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLm91dGVyLmFkZENsYXNzKCdsZy16b29tZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VBY3R1YWxQaXhlbENsYXNzTmFtZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRab29tKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzY2FsZSA+IDE7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuZ2V0U2NhbGUgPSBmdW5jdGlvbiAoc2NhbGUpIHtcclxuICAgICAgICB2YXIgYWN0dWFsU2l6ZVNjYWxlID0gdGhpcy5nZXRDdXJyZW50SW1hZ2VBY3R1YWxTaXplU2NhbGUoKTtcclxuICAgICAgICBpZiAoc2NhbGUgPCAxKSB7XHJcbiAgICAgICAgICAgIHNjYWxlID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2NhbGUgPiBhY3R1YWxTaXplU2NhbGUpIHtcclxuICAgICAgICAgICAgc2NhbGUgPSBhY3R1YWxTaXplU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnpvb20pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ1aWxkVGVtcGxhdGVzKCk7XHJcbiAgICAgICAgdGhpcy5lbmFibGVab29tT25TbGlkZUl0ZW1Mb2FkKCk7XHJcbiAgICAgICAgdmFyIHRhcHBlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb3JlLm91dGVyLm9uKCdkYmxjbGljay5sZycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLiRMRyhldmVudC50YXJnZXQpLmhhc0NsYXNzKCdsZy1pbWFnZScpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuc2V0QWN0dWFsU2l6ZShfdGhpcy5jb3JlLmluZGV4LCBldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb3JlLm91dGVyLm9uKCd0b3VjaHN0YXJ0LmxnJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gX3RoaXMuJExHKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMSAmJiAkdGFyZ2V0Lmhhc0NsYXNzKCdsZy1pbWFnZScpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcHBlZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXBwZWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGFwcGVkKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXBwZWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0QWN0dWFsU2l6ZShfdGhpcy5jb3JlLmluZGV4LCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5jb250YWluZXJSZXNpemUgKyBcIi56b29tIFwiICsgbEdFdmVudHMucm90YXRlUmlnaHQgKyBcIi56b29tIFwiICsgbEdFdmVudHMucm90YXRlTGVmdCArIFwiLnpvb20gXCIgKyBsR0V2ZW50cy5mbGlwSG9yaXpvbnRhbCArIFwiLnpvb20gXCIgKyBsR0V2ZW50cy5mbGlwVmVydGljYWwgKyBcIi56b29tXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5jb3JlLmxnT3BlbmVkIHx8XHJcbiAgICAgICAgICAgICAgICAhX3RoaXMuaXNJbWFnZVNsaWRlKF90aGlzLmNvcmUuaW5kZXgpIHx8XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLnRvdWNoQWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIF9MR2VsID0gX3RoaXMuY29yZVxyXG4gICAgICAgICAgICAgICAgLmdldFNsaWRlSXRlbShfdGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5sZy1pbWctd3JhcCcpXHJcbiAgICAgICAgICAgICAgICAuZmlyc3QoKTtcclxuICAgICAgICAgICAgX3RoaXMudG9wID0gMDtcclxuICAgICAgICAgICAgX3RoaXMubGVmdCA9IDA7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFpvb21Fc3NlbnRpYWxzKCk7XHJcbiAgICAgICAgICAgIF90aGlzLnNldFpvb21Td2lwZVN0eWxlcyhfTEdlbCwgeyB4OiAwLCB5OiAwIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5wb3NpdGlvbkNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB6b29tIG9uIHJlc2l6ZSBhbmQgb3JpZW50YXRpb25jaGFuZ2VcclxuICAgICAgICB0aGlzLiRMRyh3aW5kb3cpLm9uKFwic2Nyb2xsLmxnLnpvb20uZ2xvYmFsXCIgKyB0aGlzLmNvcmUubGdJZCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmNvcmUubGdPcGVuZWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIF90aGlzLnNjcm9sbFRvcCA9IF90aGlzLiRMRyh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS5nZXRFbGVtZW50QnlJZCgnbGctem9vbS1vdXQnKS5vbignY2xpY2subGcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIEFsbG93IHpvb20gb25seSBvbiBpbWFnZVxyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmlzSW1hZ2VTbGlkZShfdGhpcy5jb3JlLmluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gMDtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmltYWdlUmVzZXQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0SW1hZ2VUcmFuc2xhdGUoX3RoaXMuY29yZS5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gNTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBfdGhpcy5zY2FsZSAtIF90aGlzLnNldHRpbmdzLnNjYWxlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLmJlZ2luWm9vbShzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy56b29tSW1hZ2Uoc2NhbGUsIC1fdGhpcy5zZXR0aW5ncy5zY2FsZSwgdHJ1ZSwgIV90aGlzLnNldHRpbmdzLmluZmluaXRlWm9vbSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS5nZXRFbGVtZW50QnlJZCgnbGctem9vbS1pbicpLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuem9vbUluKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb3JlLmdldEVsZW1lbnRCeUlkKCdsZy1hY3R1YWwtc2l6ZScpLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0QWN0dWFsU2l6ZShfdGhpcy5jb3JlLmluZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5iZWZvcmVPcGVuICsgXCIuem9vbVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIuZmluZCgnLmxnLWl0ZW0nKS5yZW1vdmVDbGFzcygnbGctem9vbWFibGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5hZnRlck9wZW4gKyBcIi56b29tXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2Nyb2xsVG9wID0gX3RoaXMuJExHKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIC8vIFNldCB0aGUgaW5pdGlhbCB2YWx1ZSBjZW50ZXJcclxuICAgICAgICAgICAgX3RoaXMucGFnZVggPSBfdGhpcy5jb3JlLm91dGVyLndpZHRoKCkgLyAyO1xyXG4gICAgICAgICAgICBfdGhpcy5wYWdlWSA9IF90aGlzLmNvcmUub3V0ZXIuaGVpZ2h0KCkgLyAyICsgX3RoaXMuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBfdGhpcy5zY2FsZSA9IDE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmVzZXQgem9vbSBvbiBzbGlkZSBjaGFuZ2VcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vbihsR0V2ZW50cy5hZnRlclNsaWRlICsgXCIuem9vbVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHByZXZJbmRleCA9IGV2ZW50LmRldGFpbC5wcmV2SW5kZXg7XHJcbiAgICAgICAgICAgIF90aGlzLnNjYWxlID0gMTtcclxuICAgICAgICAgICAgX3RoaXMucG9zaXRpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLnpvb21JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLnJlc2V0Wm9vbShwcmV2SW5kZXgpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNldEltYWdlVHJhbnNsYXRlKHByZXZJbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0ltYWdlU2xpZGUoX3RoaXMuY29yZS5pbmRleCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFpvb21Fc3NlbnRpYWxzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBEcmFnIG9wdGlvbiBhZnRlciB6b29tXHJcbiAgICAgICAgdGhpcy56b29tRHJhZygpO1xyXG4gICAgICAgIHRoaXMucGluY2hab29tKCk7XHJcbiAgICAgICAgdGhpcy56b29tU3dpcGUoKTtcclxuICAgICAgICAvLyBTdG9yZSB0aGUgem9vbWFibGUgdGltZW91dCB2YWx1ZSBqdXN0IHRvIGNsZWFyIGl0IHdoaWxlIGNsb3NpbmdcclxuICAgICAgICB0aGlzLnpvb21hYmxlVGltZW91dCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25DaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy56b29tSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLnpvb21JbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBBbGxvdyB6b29tIG9ubHkgb24gaW1hZ2VcclxuICAgICAgICBpZiAoIXRoaXMuaXNJbWFnZVNsaWRlKHRoaXMuY29yZS5pbmRleCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLnNjYWxlICsgdGhpcy5zZXR0aW5ncy5zY2FsZTtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuaW5maW5pdGVab29tKSB7XHJcbiAgICAgICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZShzY2FsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYmVnaW5ab29tKHNjYWxlKTtcclxuICAgICAgICB0aGlzLnpvb21JbWFnZShzY2FsZSwgTWF0aC5taW4odGhpcy5zZXR0aW5ncy5zY2FsZSwgc2NhbGUgLSB0aGlzLnNjYWxlKSwgdHJ1ZSwgIXRoaXMuc2V0dGluZ3MuaW5maW5pdGVab29tKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXNldCB6b29tIGVmZmVjdFxyXG4gICAgWm9vbS5wcm90b3R5cGUucmVzZXRab29tID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5jb3JlLm91dGVyLnJlbW92ZUNsYXNzKCdsZy16b29tZWQgbGctem9vbS1kcmFnLXRyYW5zaXRpb24nKTtcclxuICAgICAgICB2YXIgJGFjdHVhbFNpemUgPSB0aGlzLmNvcmUuZ2V0RWxlbWVudEJ5SWQoJ2xnLWFjdHVhbC1zaXplJyk7XHJcbiAgICAgICAgdmFyICRpdGVtID0gdGhpcy5jb3JlLmdldFNsaWRlSXRlbShpbmRleCAhPT0gdW5kZWZpbmVkID8gaW5kZXggOiB0aGlzLmNvcmUuaW5kZXgpO1xyXG4gICAgICAgICRhY3R1YWxTaXplXHJcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLmFjdHVhbFNpemVJY29ucy56b29tT3V0KVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3ModGhpcy5zZXR0aW5ncy5hY3R1YWxTaXplSWNvbnMuem9vbUluKTtcclxuICAgICAgICAkaXRlbS5maW5kKCcubGctaW1nLXdyYXAnKS5maXJzdCgpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgJGl0ZW0uZmluZCgnLmxnLWltYWdlJykuZmlyc3QoKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSAxO1xyXG4gICAgICAgIHRoaXMubGVmdCA9IDA7XHJcbiAgICAgICAgdGhpcy50b3AgPSAwO1xyXG4gICAgICAgIC8vIFJlc2V0IHBhZ3ggcGFneSB2YWx1ZXMgdG8gY2VudGVyXHJcbiAgICAgICAgdGhpcy5zZXRQYWdlQ29yZHMoKTtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5nZXRUb3VjaERpc3RhbmNlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KChlLnRvdWNoZXNbMF0ucGFnZVggLSBlLnRvdWNoZXNbMV0ucGFnZVgpICpcclxuICAgICAgICAgICAgKGUudG91Y2hlc1swXS5wYWdlWCAtIGUudG91Y2hlc1sxXS5wYWdlWCkgK1xyXG4gICAgICAgICAgICAoZS50b3VjaGVzWzBdLnBhZ2VZIC0gZS50b3VjaGVzWzFdLnBhZ2VZKSAqXHJcbiAgICAgICAgICAgICAgICAoZS50b3VjaGVzWzBdLnBhZ2VZIC0gZS50b3VjaGVzWzFdLnBhZ2VZKSk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUucGluY2hab29tID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN0YXJ0RGlzdCA9IDA7XHJcbiAgICAgICAgdmFyIHBpbmNoU3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBpbml0U2NhbGUgPSAxO1xyXG4gICAgICAgIHZhciBwcmV2U2NhbGUgPSAwO1xyXG4gICAgICAgIHZhciAkaXRlbSA9IHRoaXMuY29yZS5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KTtcclxuICAgICAgICB0aGlzLmNvcmUub3V0ZXIub24oJ3RvdWNoc3RhcnQubGcnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAkaXRlbSA9IF90aGlzLmNvcmUuZ2V0U2xpZGVJdGVtKF90aGlzLmNvcmUuaW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmlzSW1hZ2VTbGlkZShfdGhpcy5jb3JlLmluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29yZS5vdXRlci5oYXNDbGFzcygnbGctZmlyc3Qtc2xpZGUtbG9hZGluZycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5pdFNjYWxlID0gX3RoaXMuc2NhbGUgfHwgMTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLXpvb20tZHJhZy10cmFuc2l0aW9uIGxnLXpvb20tZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFBhZ2VDb3JkcyhlKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0SW1hZ2VUcmFuc2xhdGUoX3RoaXMuY29yZS5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLnRvdWNoQWN0aW9uID0gJ3BpbmNoJztcclxuICAgICAgICAgICAgICAgIHN0YXJ0RGlzdCA9IF90aGlzLmdldFRvdWNoRGlzdGFuY2UoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvcmUuJGlubmVyLm9uKCd0b3VjaG1vdmUubGcnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMiAmJlxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29yZS50b3VjaEFjdGlvbiA9PT0gJ3BpbmNoJyAmJlxyXG4gICAgICAgICAgICAgICAgKF90aGlzLiRMRyhlLnRhcmdldCkuaGFzQ2xhc3MoJ2xnLWl0ZW0nKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICRpdGVtLmdldCgpLmNvbnRhaW5zKGUudGFyZ2V0KSkpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBlbmREaXN0ID0gX3RoaXMuZ2V0VG91Y2hEaXN0YW5jZShlKTtcclxuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IHN0YXJ0RGlzdCAtIGVuZERpc3Q7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBpbmNoU3RhcnRlZCAmJiBNYXRoLmFicyhkaXN0YW5jZSkgPiA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGluY2hTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwaW5jaFN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2U2NhbGUgPSBfdGhpcy5zY2FsZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX3NjYWxlID0gTWF0aC5tYXgoMSwgaW5pdFNjYWxlICsgLWRpc3RhbmNlICogMC4wMik7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2NhbGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKChfc2NhbGUgKyBOdW1iZXIuRVBTSUxPTikgKiAxMDApIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaWZmID0gX3RoaXMuc2NhbGUgLSBwcmV2U2NhbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuem9vbUltYWdlKF90aGlzLnNjYWxlLCBNYXRoLnJvdW5kKChkaWZmICsgTnVtYmVyLkVQU0lMT04pICogMTAwKSAvIDEwMCwgZmFsc2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS4kaW5uZXIub24oJ3RvdWNoZW5kLmxnJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNvcmUudG91Y2hBY3Rpb24gPT09ICdwaW5jaCcgJiZcclxuICAgICAgICAgICAgICAgIChfdGhpcy4kTEcoZS50YXJnZXQpLmhhc0NsYXNzKCdsZy1pdGVtJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAkaXRlbS5nZXQoKS5jb250YWlucyhlLnRhcmdldCkpKSB7XHJcbiAgICAgICAgICAgICAgICBwaW5jaFN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHN0YXJ0RGlzdCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2NhbGUgPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0Wm9vbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdHVhbFNpemVTY2FsZSA9IF90aGlzLmdldEN1cnJlbnRJbWFnZUFjdHVhbFNpemVTY2FsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zY2FsZSA+PSBhY3R1YWxTaXplU2NhbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlRGlmZiA9IGFjdHVhbFNpemVTY2FsZSAtIF90aGlzLnNjYWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NhbGVEaWZmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZURpZmYgPSAwLjAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnpvb21JbWFnZShhY3R1YWxTaXplU2NhbGUsIHNjYWxlRGlmZiwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5tYW5hZ2VBY3R1YWxQaXhlbENsYXNzTmFtZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLm91dGVyLmFkZENsYXNzKCdsZy16b29tZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUudG91Y2hBY3Rpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS50b3VjaGVuZFpvb20gPSBmdW5jdGlvbiAoc3RhcnRDb29yZHMsIGVuZENvb3JkcywgYWxsb3dYLCBhbGxvd1ksIHRvdWNoRHVyYXRpb24pIHtcclxuICAgICAgICB2YXIgZGlzdGFuY2VYbmV3ID0gZW5kQ29vcmRzLnggLSBzdGFydENvb3Jkcy54O1xyXG4gICAgICAgIHZhciBkaXN0YW5jZVluZXcgPSBlbmRDb29yZHMueSAtIHN0YXJ0Q29vcmRzLnk7XHJcbiAgICAgICAgdmFyIHNwZWVkWCA9IE1hdGguYWJzKGRpc3RhbmNlWG5ldykgLyB0b3VjaER1cmF0aW9uICsgMTtcclxuICAgICAgICB2YXIgc3BlZWRZID0gTWF0aC5hYnMoZGlzdGFuY2VZbmV3KSAvIHRvdWNoRHVyYXRpb24gKyAxO1xyXG4gICAgICAgIGlmIChzcGVlZFggPiAyKSB7XHJcbiAgICAgICAgICAgIHNwZWVkWCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3BlZWRZID4gMikge1xyXG4gICAgICAgICAgICBzcGVlZFkgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzdGFuY2VYbmV3ID0gZGlzdGFuY2VYbmV3ICogc3BlZWRYO1xyXG4gICAgICAgIGRpc3RhbmNlWW5ldyA9IGRpc3RhbmNlWW5ldyAqIHNwZWVkWTtcclxuICAgICAgICB2YXIgX0xHZWwgPSB0aGlzLmNvcmVcclxuICAgICAgICAgICAgLmdldFNsaWRlSXRlbSh0aGlzLmNvcmUuaW5kZXgpXHJcbiAgICAgICAgICAgIC5maW5kKCcubGctaW1nLXdyYXAnKVxyXG4gICAgICAgICAgICAuZmlyc3QoKTtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSB7fTtcclxuICAgICAgICBkaXN0YW5jZS54ID0gdGhpcy5sZWZ0ICsgZGlzdGFuY2VYbmV3O1xyXG4gICAgICAgIGRpc3RhbmNlLnkgPSB0aGlzLnRvcCArIGRpc3RhbmNlWW5ldztcclxuICAgICAgICB2YXIgcG9zc2libGVTd2lwZUNvcmRzID0gdGhpcy5nZXRQb3NzaWJsZVN3aXBlRHJhZ0NvcmRzKCk7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlWG5ldykgPiAxNSB8fCBNYXRoLmFicyhkaXN0YW5jZVluZXcpID4gMTUpIHtcclxuICAgICAgICAgICAgaWYgKGFsbG93WSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNCZXlvbmRQb3NzaWJsZVRvcChkaXN0YW5jZS55LCBwb3NzaWJsZVN3aXBlQ29yZHMubWluWSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZS55ID0gcG9zc2libGVTd2lwZUNvcmRzLm1pblk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzQmV5b25kUG9zc2libGVCb3R0b20oZGlzdGFuY2UueSwgcG9zc2libGVTd2lwZUNvcmRzLm1heFkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UueSA9IHBvc3NpYmxlU3dpcGVDb3Jkcy5tYXhZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhbGxvd1gpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQmV5b25kUG9zc2libGVMZWZ0KGRpc3RhbmNlLngsIHBvc3NpYmxlU3dpcGVDb3Jkcy5taW5YKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlLnggPSBwb3NzaWJsZVN3aXBlQ29yZHMubWluWDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNCZXlvbmRQb3NzaWJsZVJpZ2h0KGRpc3RhbmNlLngsIHBvc3NpYmxlU3dpcGVDb3Jkcy5tYXhYKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlLnggPSBwb3NzaWJsZVN3aXBlQ29yZHMubWF4WDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWxsb3dZKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvcCA9IGRpc3RhbmNlLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZS55ID0gdGhpcy50b3A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFsbG93WCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0ID0gZGlzdGFuY2UueDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlLnggPSB0aGlzLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRab29tU3dpcGVTdHlsZXMoX0xHZWwsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5nZXRab29tU3dpcGVDb3JkcyA9IGZ1bmN0aW9uIChzdGFydENvb3JkcywgZW5kQ29vcmRzLCBhbGxvd1gsIGFsbG93WSwgcG9zc2libGVTd2lwZUNvcmRzKSB7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0ge307XHJcbiAgICAgICAgaWYgKGFsbG93WSkge1xyXG4gICAgICAgICAgICBkaXN0YW5jZS55ID0gdGhpcy50b3AgKyAoZW5kQ29vcmRzLnkgLSBzdGFydENvb3Jkcy55KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNCZXlvbmRQb3NzaWJsZVRvcChkaXN0YW5jZS55LCBwb3NzaWJsZVN3aXBlQ29yZHMubWluWSkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaWZmTWluWSA9IHBvc3NpYmxlU3dpcGVDb3Jkcy5taW5ZIC0gZGlzdGFuY2UueTtcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlLnkgPSBwb3NzaWJsZVN3aXBlQ29yZHMubWluWSAtIGRpZmZNaW5ZIC8gNjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzQmV5b25kUG9zc2libGVCb3R0b20oZGlzdGFuY2UueSwgcG9zc2libGVTd2lwZUNvcmRzLm1heFkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlmZk1heFkgPSBkaXN0YW5jZS55IC0gcG9zc2libGVTd2lwZUNvcmRzLm1heFk7XHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZS55ID0gcG9zc2libGVTd2lwZUNvcmRzLm1heFkgKyBkaWZmTWF4WSAvIDY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRpc3RhbmNlLnkgPSB0aGlzLnRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFsbG93WCkge1xyXG4gICAgICAgICAgICBkaXN0YW5jZS54ID0gdGhpcy5sZWZ0ICsgKGVuZENvb3Jkcy54IC0gc3RhcnRDb29yZHMueCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQmV5b25kUG9zc2libGVMZWZ0KGRpc3RhbmNlLngsIHBvc3NpYmxlU3dpcGVDb3Jkcy5taW5YKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpZmZNaW5YID0gcG9zc2libGVTd2lwZUNvcmRzLm1pblggLSBkaXN0YW5jZS54O1xyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2UueCA9IHBvc3NpYmxlU3dpcGVDb3Jkcy5taW5YIC0gZGlmZk1pblggLyA2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaXNCZXlvbmRQb3NzaWJsZVJpZ2h0KGRpc3RhbmNlLngsIHBvc3NpYmxlU3dpcGVDb3Jkcy5tYXhYKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpZk1heFggPSBkaXN0YW5jZS54IC0gcG9zc2libGVTd2lwZUNvcmRzLm1heFg7XHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZS54ID0gcG9zc2libGVTd2lwZUNvcmRzLm1heFggKyBkaWZNYXhYIC8gNjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGlzdGFuY2UueCA9IHRoaXMubGVmdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmlzQmV5b25kUG9zc2libGVMZWZ0ID0gZnVuY3Rpb24gKHgsIG1pblgpIHtcclxuICAgICAgICByZXR1cm4geCA+PSBtaW5YO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmlzQmV5b25kUG9zc2libGVSaWdodCA9IGZ1bmN0aW9uICh4LCBtYXhYKSB7XHJcbiAgICAgICAgcmV0dXJuIHggPD0gbWF4WDtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5pc0JleW9uZFBvc3NpYmxlVG9wID0gZnVuY3Rpb24gKHksIG1pblkpIHtcclxuICAgICAgICByZXR1cm4geSA+PSBtaW5ZO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmlzQmV5b25kUG9zc2libGVCb3R0b20gPSBmdW5jdGlvbiAoeSwgbWF4WSkge1xyXG4gICAgICAgIHJldHVybiB5IDw9IG1heFk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuaXNJbWFnZVNsaWRlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gdGhpcy5jb3JlLmdhbGxlcnlJdGVtc1tpbmRleF07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29yZS5nZXRTbGlkZVR5cGUoY3VycmVudEl0ZW0pID09PSAnaW1hZ2UnO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmdldFBvc3NpYmxlU3dpcGVEcmFnQ29yZHMgPSBmdW5jdGlvbiAoc2NhbGUpIHtcclxuICAgICAgICB2YXIgJGltYWdlID0gdGhpcy5jb3JlXHJcbiAgICAgICAgICAgIC5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLWltYWdlJylcclxuICAgICAgICAgICAgLmZpcnN0KCk7XHJcbiAgICAgICAgdmFyIGJvdHRvbSA9IHRoaXMuY29yZS5tZWRpYUNvbnRhaW5lclBvc2l0aW9uLmJvdHRvbTtcclxuICAgICAgICB2YXIgaW1nUmVjdCA9ICRpbWFnZS5nZXQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB2YXIgaW1hZ2VIZWlnaHQgPSBpbWdSZWN0LmhlaWdodDtcclxuICAgICAgICB2YXIgaW1hZ2VXaWR0aCA9IGltZ1JlY3Qud2lkdGg7XHJcbiAgICAgICAgaWYgKHNjYWxlKSB7XHJcbiAgICAgICAgICAgIGltYWdlSGVpZ2h0ID0gaW1hZ2VIZWlnaHQgKyBzY2FsZSAqIGltYWdlSGVpZ2h0O1xyXG4gICAgICAgICAgICBpbWFnZVdpZHRoID0gaW1hZ2VXaWR0aCArIHNjYWxlICogaW1hZ2VXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1pblkgPSAoaW1hZ2VIZWlnaHQgLSB0aGlzLmNvbnRhaW5lclJlY3QuaGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgdmFyIG1heFkgPSAodGhpcy5jb250YWluZXJSZWN0LmhlaWdodCAtIGltYWdlSGVpZ2h0KSAvIDIgKyBib3R0b207XHJcbiAgICAgICAgdmFyIG1pblggPSAoaW1hZ2VXaWR0aCAtIHRoaXMuY29udGFpbmVyUmVjdC53aWR0aCkgLyAyO1xyXG4gICAgICAgIHZhciBtYXhYID0gKHRoaXMuY29udGFpbmVyUmVjdC53aWR0aCAtIGltYWdlV2lkdGgpIC8gMjtcclxuICAgICAgICB2YXIgcG9zc2libGVTd2lwZUNvcmRzID0ge1xyXG4gICAgICAgICAgICBtaW5ZOiBtaW5ZLFxyXG4gICAgICAgICAgICBtYXhZOiBtYXhZLFxyXG4gICAgICAgICAgICBtaW5YOiBtaW5YLFxyXG4gICAgICAgICAgICBtYXhYOiBtYXhYLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHBvc3NpYmxlU3dpcGVDb3JkcztcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS5zZXRab29tU3dpcGVTdHlsZXMgPSBmdW5jdGlvbiAoTEdlbCwgZGlzdGFuY2UpIHtcclxuICAgICAgICBMR2VsLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKCcgKyBkaXN0YW5jZS54ICsgJ3B4LCAnICsgZGlzdGFuY2UueSArICdweCwgMCknKTtcclxuICAgIH07XHJcbiAgICBab29tLnByb3RvdHlwZS56b29tU3dpcGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RhcnRDb29yZHMgPSB7fTtcclxuICAgICAgICB2YXIgZW5kQ29vcmRzID0ge307XHJcbiAgICAgICAgdmFyIGlzTW92ZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyBBbGxvdyB4IGRpcmVjdGlvbiBkcmFnXHJcbiAgICAgICAgdmFyIGFsbG93WCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFsbG93IFkgZGlyZWN0aW9uIGRyYWdcclxuICAgICAgICB2YXIgYWxsb3dZID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIGVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHZhciBwb3NzaWJsZVN3aXBlQ29yZHM7XHJcbiAgICAgICAgdmFyIF9MR2VsO1xyXG4gICAgICAgIHZhciAkaXRlbSA9IHRoaXMuY29yZS5nZXRTbGlkZUl0ZW0odGhpcy5jb3JlLmluZGV4KTtcclxuICAgICAgICB0aGlzLmNvcmUuJGlubmVyLm9uKCd0b3VjaHN0YXJ0LmxnJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgLy8gQWxsb3cgem9vbSBvbmx5IG9uIGltYWdlXHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNJbWFnZVNsaWRlKF90aGlzLmNvcmUuaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGl0ZW0gPSBfdGhpcy5jb3JlLmdldFNsaWRlSXRlbShfdGhpcy5jb3JlLmluZGV4KTtcclxuICAgICAgICAgICAgaWYgKChfdGhpcy4kTEcoZS50YXJnZXQpLmhhc0NsYXNzKCdsZy1pdGVtJykgfHxcclxuICAgICAgICAgICAgICAgICRpdGVtLmdldCgpLmNvbnRhaW5zKGUudGFyZ2V0KSkgJiZcclxuICAgICAgICAgICAgICAgIGUudG91Y2hlcy5sZW5ndGggPT09IDEgJiZcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIuaGFzQ2xhc3MoJ2xnLXpvb21lZCcpKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29yZS50b3VjaEFjdGlvbiA9ICd6b29tU3dpcGUnO1xyXG4gICAgICAgICAgICAgICAgX0xHZWwgPSBfdGhpcy5jb3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldFNsaWRlSXRlbShfdGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCcubGctaW1nLXdyYXAnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdBbGxvd2VkQXhpc2VzID0gX3RoaXMuZ2V0RHJhZ0FsbG93ZWRBeGlzZXMoMCk7XHJcbiAgICAgICAgICAgICAgICBhbGxvd1kgPSBkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1k7XHJcbiAgICAgICAgICAgICAgICBhbGxvd1ggPSBkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1g7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxsb3dYIHx8IGFsbG93WSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Q29vcmRzID0gX3RoaXMuZ2V0U3dpcGVDb3JkcyhlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBvc3NpYmxlU3dpcGVDb3JkcyA9IF90aGlzLmdldFBvc3NpYmxlU3dpcGVEcmFnQ29yZHMoKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9wYWNpdHkgYW5kIHRyYW5zaXRpb24gZHVyYXRpb25cclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIuYWRkQ2xhc3MoJ2xnLXpvb20tZHJhZ2dpbmcgbGctem9vbS1kcmFnLXRyYW5zaXRpb24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS4kaW5uZXIub24oJ3RvdWNobW92ZS5sZycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLnRvdWNoQWN0aW9uID09PSAnem9vbVN3aXBlJyAmJlxyXG4gICAgICAgICAgICAgICAgKF90aGlzLiRMRyhlLnRhcmdldCkuaGFzQ2xhc3MoJ2xnLWl0ZW0nKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICRpdGVtLmdldCgpLmNvbnRhaW5zKGUudGFyZ2V0KSkpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUudG91Y2hBY3Rpb24gPSAnem9vbVN3aXBlJztcclxuICAgICAgICAgICAgICAgIGVuZENvb3JkcyA9IF90aGlzLmdldFN3aXBlQ29yZHMoZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBfdGhpcy5nZXRab29tU3dpcGVDb3JkcyhzdGFydENvb3JkcywgZW5kQ29vcmRzLCBhbGxvd1gsIGFsbG93WSwgcG9zc2libGVTd2lwZUNvcmRzKTtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhlbmRDb29yZHMueCAtIHN0YXJ0Q29vcmRzLngpID4gMTUgfHxcclxuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhlbmRDb29yZHMueSAtIHN0YXJ0Q29vcmRzLnkpID4gMTUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc01vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRab29tU3dpcGVTdHlsZXMoX0xHZWwsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29yZS4kaW5uZXIub24oJ3RvdWNoZW5kLmxnJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNvcmUudG91Y2hBY3Rpb24gPT09ICd6b29tU3dpcGUnICYmXHJcbiAgICAgICAgICAgICAgICAoX3RoaXMuJExHKGUudGFyZ2V0KS5oYXNDbGFzcygnbGctaXRlbScpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW0uZ2V0KCkuY29udGFpbnMoZS50YXJnZXQpKSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29yZS50b3VjaEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLXpvb20tZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgIGlmICghaXNNb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlzTW92ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoRHVyYXRpb24gPSBlbmRUaW1lLnZhbHVlT2YoKSAtIHN0YXJ0VGltZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50b3VjaGVuZFpvb20oc3RhcnRDb29yZHMsIGVuZENvb3JkcywgYWxsb3dYLCBhbGxvd1ksIHRvdWNoRHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuem9vbURyYWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RhcnRDb29yZHMgPSB7fTtcclxuICAgICAgICB2YXIgZW5kQ29vcmRzID0ge307XHJcbiAgICAgICAgdmFyIGlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICB2YXIgaXNNb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFsbG93IHggZGlyZWN0aW9uIGRyYWdcclxuICAgICAgICB2YXIgYWxsb3dYID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQWxsb3cgWSBkaXJlY3Rpb24gZHJhZ1xyXG4gICAgICAgIHZhciBhbGxvd1kgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3RhcnRUaW1lO1xyXG4gICAgICAgIHZhciBlbmRUaW1lO1xyXG4gICAgICAgIHZhciBwb3NzaWJsZVN3aXBlQ29yZHM7XHJcbiAgICAgICAgdmFyIF9MR2VsO1xyXG4gICAgICAgIHRoaXMuY29yZS5vdXRlci5vbignbW91c2Vkb3duLmxnLnpvb20nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAvLyBBbGxvdyB6b29tIG9ubHkgb24gaW1hZ2VcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0ltYWdlU2xpZGUoX3RoaXMuY29yZS5pbmRleCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgJGl0ZW0gPSBfdGhpcy5jb3JlLmdldFNsaWRlSXRlbShfdGhpcy5jb3JlLmluZGV4KTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLiRMRyhlLnRhcmdldCkuaGFzQ2xhc3MoJ2xnLWl0ZW0nKSB8fFxyXG4gICAgICAgICAgICAgICAgJGl0ZW0uZ2V0KCkuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgX0xHZWwgPSBfdGhpcy5jb3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldFNsaWRlSXRlbShfdGhpcy5jb3JlLmluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCcubGctaW1nLXdyYXAnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdBbGxvd2VkQXhpc2VzID0gX3RoaXMuZ2V0RHJhZ0FsbG93ZWRBeGlzZXMoMCk7XHJcbiAgICAgICAgICAgICAgICBhbGxvd1kgPSBkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1k7XHJcbiAgICAgICAgICAgICAgICBhbGxvd1ggPSBkcmFnQWxsb3dlZEF4aXNlcy5hbGxvd1g7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29yZS5vdXRlci5oYXNDbGFzcygnbGctem9vbWVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuJExHKGUudGFyZ2V0KS5oYXNDbGFzcygnbGctb2JqZWN0JykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGFsbG93WCB8fCBhbGxvd1kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRDb29yZHMgPSBfdGhpcy5nZXREcmFnQ29yZHMoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlU3dpcGVDb3JkcyA9IF90aGlzLmdldFBvc3NpYmxlU3dpcGVEcmFnQ29yZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvcmUub3V0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbGctZ3JhYicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2xnLWdyYWJiaW5nIGxnLXpvb20tZHJhZy10cmFuc2l0aW9uIGxnLXpvb20tZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb3BhY2l0eSBhbmQgdHJhbnNpdGlvbiBkdXJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuJExHKHdpbmRvdykub24oXCJtb3VzZW1vdmUubGcuem9vbS5nbG9iYWxcIiArIHRoaXMuY29yZS5sZ0lkLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgaXNNb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBlbmRDb29yZHMgPSBfdGhpcy5nZXREcmFnQ29yZHMoZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBfdGhpcy5nZXRab29tU3dpcGVDb3JkcyhzdGFydENvb3JkcywgZW5kQ29vcmRzLCBhbGxvd1gsIGFsbG93WSwgcG9zc2libGVTd2lwZUNvcmRzKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldFpvb21Td2lwZVN0eWxlcyhfTEdlbCwgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4kTEcod2luZG93KS5vbihcIm1vdXNldXAubGcuem9vbS5nbG9iYWxcIiArIHRoaXMuY29yZS5sZ0lkLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgZW5kVGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb3JlLm91dGVyLnJlbW92ZUNsYXNzKCdsZy16b29tLWRyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGNocm9tZSBtb3VzZSBtb3ZlIG9uIGNsaWNrXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNNb3ZlZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChzdGFydENvb3Jkcy54ICE9PSBlbmRDb29yZHMueCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydENvb3Jkcy55ICE9PSBlbmRDb29yZHMueSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRDb29yZHMgPSBfdGhpcy5nZXREcmFnQ29yZHMoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoRHVyYXRpb24gPSBlbmRUaW1lLnZhbHVlT2YoKSAtIHN0YXJ0VGltZS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudG91Y2hlbmRab29tKHN0YXJ0Q29vcmRzLCBlbmRDb29yZHMsIGFsbG93WCwgYWxsb3dZLCB0b3VjaER1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlzTW92ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5jb3JlLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1ncmFiYmluZycpLmFkZENsYXNzKCdsZy1ncmFiJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgWm9vbS5wcm90b3R5cGUuY2xvc2VHYWxsZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVzZXRab29tKCk7XHJcbiAgICAgICAgdGhpcy56b29tSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFpvb20ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVW5iaW5kIGFsbCBldmVudHMgYWRkZWQgYnkgbGlnaHRHYWxsZXJ5IHpvb20gcGx1Z2luXHJcbiAgICAgICAgdGhpcy4kTEcod2luZG93KS5vZmYoXCIubGcuem9vbS5nbG9iYWxcIiArIHRoaXMuY29yZS5sZ0lkKTtcclxuICAgICAgICB0aGlzLmNvcmUuTEdlbC5vZmYoJy5sZy56b29tJyk7XHJcbiAgICAgICAgdGhpcy5jb3JlLkxHZWwub2ZmKCcuem9vbScpO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnpvb21hYmxlVGltZW91dCk7XHJcbiAgICAgICAgdGhpcy56b29tYWJsZVRpbWVvdXQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gWm9vbTtcclxufSgpKTtcblxuZXhwb3J0IGRlZmF1bHQgWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxnLXpvb20uZXM1LmpzLm1hcFxuIl0sIm5hbWVzIjpbIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsInpvb21TZXR0aW5ncyIsInNjYWxlIiwiem9vbSIsImluZmluaXRlWm9vbSIsImFjdHVhbFNpemUiLCJzaG93Wm9vbUluT3V0SWNvbnMiLCJhY3R1YWxTaXplSWNvbnMiLCJ6b29tSW4iLCJ6b29tT3V0IiwiZW5hYmxlWm9vbUFmdGVyIiwiem9vbVBsdWdpblN0cmluZ3MiLCJ2aWV3QWN0dWFsU2l6ZSIsImxHRXZlbnRzIiwiYWZ0ZXJBcHBlbmRTbGlkZSIsImluaXQiLCJoYXNWaWRlbyIsImNvbnRhaW5lclJlc2l6ZSIsInVwZGF0ZVNsaWRlcyIsImFmdGVyQXBwZW5kU3ViSHRtbCIsImJlZm9yZU9wZW4iLCJhZnRlck9wZW4iLCJzbGlkZUl0ZW1Mb2FkIiwiYmVmb3JlU2xpZGUiLCJhZnRlclNsaWRlIiwicG9zdGVyQ2xpY2siLCJkcmFnU3RhcnQiLCJkcmFnTW92ZSIsImRyYWdFbmQiLCJiZWZvcmVOZXh0U2xpZGUiLCJiZWZvcmVQcmV2U2xpZGUiLCJiZWZvcmVDbG9zZSIsImFmdGVyQ2xvc2UiLCJyb3RhdGVMZWZ0Iiwicm90YXRlUmlnaHQiLCJmbGlwSG9yaXpvbnRhbCIsImZsaXBWZXJ0aWNhbCIsImF1dG9wbGF5IiwiYXV0b3BsYXlTdGFydCIsImF1dG9wbGF5U3RvcCIsIlpPT01fVFJBTlNJVElPTl9EVVJBVElPTiIsIlpvb20iLCJpbnN0YW5jZSIsIiRMRyIsImNvcmUiLCJzZXR0aW5ncyIsImJ1aWxkVGVtcGxhdGVzIiwiem9vbUljb25zIiwiZ2V0SWROYW1lIiwib3V0ZXIiLCJhZGRDbGFzcyIsIiR0b29sYmFyIiwiZmlyc3QiLCJhcHBlbmQiLCJlbmFibGVab29tIiwiZXZlbnQiLCJfdGhpcyIsIl9zcGVlZCIsImRldGFpbCIsImRlbGF5IiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInpvb21hYmxlVGltZW91dCIsInNldFRpbWVvdXQiLCJpc0ltYWdlU2xpZGUiLCJpbmRleCIsImdldFNsaWRlSXRlbSIsInNldFpvb21Fc3NlbnRpYWxzIiwiZW5hYmxlWm9vbU9uU2xpZGVJdGVtTG9hZCIsIkxHZWwiLCJvbiIsImJpbmQiLCJnZXREcmFnQ29yZHMiLCJlIiwieCIsInBhZ2VYIiwieSIsInBhZ2VZIiwiZ2V0U3dpcGVDb3JkcyIsInRvdWNoZXMiLCJnZXREcmFnQWxsb3dlZEF4aXNlcyIsInNjYWxlRGlmZiIsIiRpbWFnZSIsImZpbmQiLCJnZXQiLCJoZWlnaHQiLCJ3aWR0aCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsImFsbG93WSIsImNvbnRhaW5lclJlY3QiLCJhbGxvd1giLCIkY29udGVudCIsInpvb21JbWFnZSIsInJlcG9zaXRpb24iLCJyZXNldFRvTWF4IiwiTWF0aCIsImFicyIsIm9mZnNldFgiLCJsZWZ0Iiwib2Zmc2V0WSIsInRvcCIsInNjcm9sbFRvcCIsIm9yaWdpbmFsWCIsIm9yaWdpbmFsWSIsInBvc2l0aW9uQ2hhbmdlZCIsImRyYWdBbGxvd2VkQXhpc2VzIiwicG9zc2libGVTd2lwZUNvcmRzIiwiZ2V0UG9zc2libGVTd2lwZURyYWdDb3JkcyIsIl94IiwiX3kiLCJzY2FsZVZhbCIsImlzQmV5b25kUG9zc2libGVMZWZ0IiwibWluWCIsImlzQmV5b25kUG9zc2libGVSaWdodCIsIm1heFgiLCJpc0JleW9uZFBvc3NpYmxlVG9wIiwibWluWSIsImlzQmV5b25kUG9zc2libGVCb3R0b20iLCJtYXhZIiwic2V0Wm9vbVN0eWxlcyIsInNldFpvb21JbWFnZVNpemUiLCJyZXNldEltYWdlVHJhbnNsYXRlIiwiaW1hZ2VSZXNldCIsImNzcyIsImFjdHVhbFNpemVTY2FsZSIsImdldEN1cnJlbnRJbWFnZUFjdHVhbFNpemVTY2FsZSIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJzdHlsZSIsIiRpbWFnZVdyYXAiLCIkZHVtbXlJbWFnZSIsInRyYW5zZm9ybSIsInNldEFjdHVhbFNpemUiLCJ6b29tSW5Qcm9ncmVzcyIsImN1cnJlbnRJdGVtIiwiZ2FsbGVyeUl0ZW1zIiwic3JjIiwicHJldlNjYWxlIiwiZ2V0U2NhbGUiLCJzZXRQYWdlQ29yZHMiLCJiZWdpblpvb20iLCJnZXROYXR1cmFsV2lkdGgiLCJwYXJzZUZsb2F0IiwiZ2V0QWN0dWFsU2l6ZVNjYWxlIiwiX3NjYWxlIiwiZ2V0UGFnZUNvcmRzIiwiY29yZHMiLCJwYWdlQ29yZHMiLCJtYW5hZ2VBY3R1YWxQaXhlbENsYXNzTmFtZXMiLCIkYWN0dWFsU2l6ZSIsImdldEVsZW1lbnRCeUlkIiwicmVzZXRab29tIiwidGFwcGVkIiwidGFyZ2V0IiwiJHRhcmdldCIsImNsZWFyVGltZW91dCIsInByZXZlbnREZWZhdWx0IiwibGdPcGVuZWQiLCJ0b3VjaEFjdGlvbiIsIl9MR2VsIiwic2V0Wm9vbVN3aXBlU3R5bGVzIiwid2luZG93IiwibGdJZCIsInRpbWVvdXQiLCJwcmV2SW5kZXgiLCJ6b29tRHJhZyIsInBpbmNoWm9vbSIsInpvb21Td2lwZSIsIm1pbiIsIiRpdGVtIiwidW5kZWZpbmVkIiwicmVtb3ZlQXR0ciIsImdldFRvdWNoRGlzdGFuY2UiLCJzcXJ0Iiwic3RhcnREaXN0IiwicGluY2hTdGFydGVkIiwiaW5pdFNjYWxlIiwiJGlubmVyIiwiY29udGFpbnMiLCJlbmREaXN0IiwiZGlzdGFuY2UiLCJtYXgiLCJyb3VuZCIsIk51bWJlciIsIkVQU0lMT04iLCJkaWZmIiwidG91Y2hlbmRab29tIiwic3RhcnRDb29yZHMiLCJlbmRDb29yZHMiLCJ0b3VjaER1cmF0aW9uIiwiZGlzdGFuY2VYbmV3IiwiZGlzdGFuY2VZbmV3Iiwic3BlZWRYIiwic3BlZWRZIiwiZ2V0Wm9vbVN3aXBlQ29yZHMiLCJkaWZmTWluWSIsImRpZmZNYXhZIiwiZGlmZk1pblgiLCJkaWZNYXhYIiwiZ2V0U2xpZGVUeXBlIiwiYm90dG9tIiwibWVkaWFDb250YWluZXJQb3NpdGlvbiIsImltZ1JlY3QiLCJpbWFnZUhlaWdodCIsImltYWdlV2lkdGgiLCJpc01vdmVkIiwic3RhcnRUaW1lIiwiRGF0ZSIsImVuZFRpbWUiLCJ2YWx1ZU9mIiwiaXNEcmFnZ2luZyIsImNsb3NlR2FsbGVyeSIsImRlc3Ryb3kiLCJvZmYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/plugins/zoom/lg-zoom.es5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/react/Lightgallery.es5.js":
/*!*************************************************************!*\
  !*** ./node_modules/lightgallery/react/Lightgallery.es5.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */ function __rest(s, e) {\n    var t = {};\n    for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for(var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++){\n        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n}\n/*!\n * lightgallery | 2.7.2 | September 20th 2023\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */ /*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */ var __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n    for(var s = 0, i = 0, il = arguments.length; i < il; i++)s += arguments[i].length;\n    for(var r = Array(s), k = 0, i = 0; i < il; i++)for(var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)r[k] = a[j];\n    return r;\n}\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */ var lGEvents = {\n    afterAppendSlide: \"lgAfterAppendSlide\",\n    init: \"lgInit\",\n    hasVideo: \"lgHasVideo\",\n    containerResize: \"lgContainerResize\",\n    updateSlides: \"lgUpdateSlides\",\n    afterAppendSubHtml: \"lgAfterAppendSubHtml\",\n    beforeOpen: \"lgBeforeOpen\",\n    afterOpen: \"lgAfterOpen\",\n    slideItemLoad: \"lgSlideItemLoad\",\n    beforeSlide: \"lgBeforeSlide\",\n    afterSlide: \"lgAfterSlide\",\n    posterClick: \"lgPosterClick\",\n    dragStart: \"lgDragStart\",\n    dragMove: \"lgDragMove\",\n    dragEnd: \"lgDragEnd\",\n    beforeNextSlide: \"lgBeforeNextSlide\",\n    beforePrevSlide: \"lgBeforePrevSlide\",\n    beforeClose: \"lgBeforeClose\",\n    afterClose: \"lgAfterClose\",\n    rotateLeft: \"lgRotateLeft\",\n    rotateRight: \"lgRotateRight\",\n    flipHorizontal: \"lgFlipHorizontal\",\n    flipVertical: \"lgFlipVertical\",\n    autoplay: \"lgAutoplay\",\n    autoplayStart: \"lgAutoplayStart\",\n    autoplayStop: \"lgAutoplayStop\"\n};\nvar lightGalleryCoreSettings = {\n    mode: \"lg-slide\",\n    easing: \"ease\",\n    speed: 400,\n    licenseKey: \"0000-0000-000-0000\",\n    height: \"100%\",\n    width: \"100%\",\n    addClass: \"\",\n    startClass: \"lg-start-zoom\",\n    backdropDuration: 300,\n    container: \"\",\n    startAnimationDuration: 400,\n    zoomFromOrigin: true,\n    hideBarsDelay: 0,\n    showBarsAfter: 10000,\n    slideDelay: 0,\n    supportLegacyBrowser: true,\n    allowMediaOverlap: false,\n    videoMaxSize: \"1280-720\",\n    loadYouTubePoster: true,\n    defaultCaptionHeight: 0,\n    ariaLabelledby: \"\",\n    ariaDescribedby: \"\",\n    resetScrollPosition: true,\n    hideScrollbar: false,\n    closable: true,\n    swipeToClose: true,\n    closeOnTap: true,\n    showCloseIcon: true,\n    showMaximizeIcon: false,\n    loop: true,\n    escKey: true,\n    keyPress: true,\n    trapFocus: true,\n    controls: true,\n    slideEndAnimation: true,\n    hideControlOnEnd: false,\n    mousewheel: false,\n    getCaptionFromTitleOrAlt: true,\n    appendSubHtmlTo: \".lg-sub-html\",\n    subHtmlSelectorRelative: false,\n    preload: 2,\n    numberOfSlideItemsInDom: 10,\n    selector: \"\",\n    selectWithin: \"\",\n    nextHtml: \"\",\n    prevHtml: \"\",\n    index: 0,\n    iframeWidth: \"100%\",\n    iframeHeight: \"100%\",\n    iframeMaxWidth: \"100%\",\n    iframeMaxHeight: \"100%\",\n    download: true,\n    counter: true,\n    appendCounterTo: \".lg-toolbar\",\n    swipeThreshold: 50,\n    enableSwipe: true,\n    enableDrag: true,\n    dynamic: false,\n    dynamicEl: [],\n    extraProps: [],\n    exThumbImage: \"\",\n    isMobile: undefined,\n    mobileSettings: {\n        controls: false,\n        showCloseIcon: false,\n        download: false\n    },\n    plugins: [],\n    strings: {\n        closeGallery: \"Close gallery\",\n        toggleMaximize: \"Toggle maximize\",\n        previousSlide: \"Previous slide\",\n        nextSlide: \"Next slide\",\n        download: \"Download\",\n        playVideo: \"Play video\",\n        mediaLoadingFailed: \"Oops... Failed to load content...\"\n    }\n};\nfunction initLgPolyfills() {\n    (function() {\n        if (typeof window.CustomEvent === \"function\") return false;\n        function CustomEvent1(event, params) {\n            params = params || {\n                bubbles: false,\n                cancelable: false,\n                detail: null\n            };\n            var evt = document.createEvent(\"CustomEvent\");\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n        window.CustomEvent = CustomEvent1;\n    })();\n    (function() {\n        if (!Element.prototype.matches) {\n            Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n        }\n    })();\n}\nvar lgQuery = /** @class */ function() {\n    function lgQuery(selector) {\n        this.cssVenderPrefixes = [\n            \"TransitionDuration\",\n            \"TransitionTimingFunction\",\n            \"Transform\",\n            \"Transition\"\n        ];\n        this.selector = this._getSelector(selector);\n        this.firstElement = this._getFirstEl();\n        return this;\n    }\n    lgQuery.generateUUID = function() {\n        return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n            var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 0x3 | 0x8;\n            return v.toString(16);\n        });\n    };\n    lgQuery.prototype._getSelector = function(selector, context) {\n        if (context === void 0) {\n            context = document;\n        }\n        if (typeof selector !== \"string\") {\n            return selector;\n        }\n        context = context || document;\n        var fl = selector.substring(0, 1);\n        if (fl === \"#\") {\n            return context.querySelector(selector);\n        } else {\n            return context.querySelectorAll(selector);\n        }\n    };\n    lgQuery.prototype._each = function(func) {\n        if (!this.selector) {\n            return this;\n        }\n        if (this.selector.length !== undefined) {\n            [].forEach.call(this.selector, func);\n        } else {\n            func(this.selector, 0);\n        }\n        return this;\n    };\n    lgQuery.prototype._setCssVendorPrefix = function(el, cssProperty, value) {\n        // prettier-ignore\n        var property = cssProperty.replace(/-([a-z])/gi, function(s, group1) {\n            return group1.toUpperCase();\n        });\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\n            el.style[property.charAt(0).toLowerCase() + property.slice(1)] = value;\n            el.style[\"webkit\" + property] = value;\n            el.style[\"moz\" + property] = value;\n            el.style[\"ms\" + property] = value;\n            el.style[\"o\" + property] = value;\n        } else {\n            el.style[property] = value;\n        }\n    };\n    lgQuery.prototype._getFirstEl = function() {\n        if (this.selector && this.selector.length !== undefined) {\n            return this.selector[0];\n        } else {\n            return this.selector;\n        }\n    };\n    lgQuery.prototype.isEventMatched = function(event, eventName) {\n        var eventNamespace = eventName.split(\".\");\n        return event.split(\".\").filter(function(e) {\n            return e;\n        }).every(function(e) {\n            return eventNamespace.indexOf(e) !== -1;\n        });\n    };\n    lgQuery.prototype.attr = function(attr, value) {\n        if (value === undefined) {\n            if (!this.firstElement) {\n                return \"\";\n            }\n            return this.firstElement.getAttribute(attr);\n        }\n        this._each(function(el) {\n            el.setAttribute(attr, value);\n        });\n        return this;\n    };\n    lgQuery.prototype.find = function(selector) {\n        return $LG(this._getSelector(selector, this.selector));\n    };\n    lgQuery.prototype.first = function() {\n        if (this.selector && this.selector.length !== undefined) {\n            return $LG(this.selector[0]);\n        } else {\n            return $LG(this.selector);\n        }\n    };\n    lgQuery.prototype.eq = function(index) {\n        return $LG(this.selector[index]);\n    };\n    lgQuery.prototype.parent = function() {\n        return $LG(this.selector.parentElement);\n    };\n    lgQuery.prototype.get = function() {\n        return this._getFirstEl();\n    };\n    lgQuery.prototype.removeAttr = function(attributes) {\n        var attrs = attributes.split(\" \");\n        this._each(function(el) {\n            attrs.forEach(function(attr) {\n                return el.removeAttribute(attr);\n            });\n        });\n        return this;\n    };\n    lgQuery.prototype.wrap = function(className) {\n        if (!this.firstElement) {\n            return this;\n        }\n        var wrapper = document.createElement(\"div\");\n        wrapper.className = className;\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\n        this.firstElement.parentNode.removeChild(this.firstElement);\n        wrapper.appendChild(this.firstElement);\n        return this;\n    };\n    lgQuery.prototype.addClass = function(classNames) {\n        if (classNames === void 0) {\n            classNames = \"\";\n        }\n        this._each(function(el) {\n            // IE doesn't support multiple arguments\n            classNames.split(\" \").forEach(function(className) {\n                if (className) {\n                    el.classList.add(className);\n                }\n            });\n        });\n        return this;\n    };\n    lgQuery.prototype.removeClass = function(classNames) {\n        this._each(function(el) {\n            // IE doesn't support multiple arguments\n            classNames.split(\" \").forEach(function(className) {\n                if (className) {\n                    el.classList.remove(className);\n                }\n            });\n        });\n        return this;\n    };\n    lgQuery.prototype.hasClass = function(className) {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.classList.contains(className);\n    };\n    lgQuery.prototype.hasAttribute = function(attribute) {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.hasAttribute(attribute);\n    };\n    lgQuery.prototype.toggleClass = function(className) {\n        if (!this.firstElement) {\n            return this;\n        }\n        if (this.hasClass(className)) {\n            this.removeClass(className);\n        } else {\n            this.addClass(className);\n        }\n        return this;\n    };\n    lgQuery.prototype.css = function(property, value) {\n        var _this = this;\n        this._each(function(el) {\n            _this._setCssVendorPrefix(el, property, value);\n        });\n        return this;\n    };\n    // Need to pass separate namespaces for separate elements\n    lgQuery.prototype.on = function(events, listener) {\n        var _this = this;\n        if (!this.selector) {\n            return this;\n        }\n        events.split(\" \").forEach(function(event) {\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\n                lgQuery.eventListeners[event] = [];\n            }\n            lgQuery.eventListeners[event].push(listener);\n            _this.selector.addEventListener(event.split(\".\")[0], listener);\n        });\n        return this;\n    };\n    // @todo - test this\n    lgQuery.prototype.once = function(event, listener) {\n        var _this = this;\n        this.on(event, function() {\n            _this.off(event);\n            listener(event);\n        });\n        return this;\n    };\n    lgQuery.prototype.off = function(event) {\n        var _this = this;\n        if (!this.selector) {\n            return this;\n        }\n        Object.keys(lgQuery.eventListeners).forEach(function(eventName) {\n            if (_this.isEventMatched(event, eventName)) {\n                lgQuery.eventListeners[eventName].forEach(function(listener) {\n                    _this.selector.removeEventListener(eventName.split(\".\")[0], listener);\n                });\n                lgQuery.eventListeners[eventName] = [];\n            }\n        });\n        return this;\n    };\n    lgQuery.prototype.trigger = function(event, detail) {\n        if (!this.firstElement) {\n            return this;\n        }\n        var customEvent = new CustomEvent(event.split(\".\")[0], {\n            detail: detail || null\n        });\n        this.firstElement.dispatchEvent(customEvent);\n        return this;\n    };\n    // Does not support IE\n    lgQuery.prototype.load = function(url) {\n        var _this = this;\n        fetch(url).then(function(res) {\n            return res.text();\n        }).then(function(html) {\n            _this.selector.innerHTML = html;\n        });\n        return this;\n    };\n    lgQuery.prototype.html = function(html) {\n        if (html === undefined) {\n            if (!this.firstElement) {\n                return \"\";\n            }\n            return this.firstElement.innerHTML;\n        }\n        this._each(function(el) {\n            el.innerHTML = html;\n        });\n        return this;\n    };\n    lgQuery.prototype.append = function(html) {\n        this._each(function(el) {\n            if (typeof html === \"string\") {\n                el.insertAdjacentHTML(\"beforeend\", html);\n            } else {\n                el.appendChild(html);\n            }\n        });\n        return this;\n    };\n    lgQuery.prototype.prepend = function(html) {\n        this._each(function(el) {\n            el.insertAdjacentHTML(\"afterbegin\", html);\n        });\n        return this;\n    };\n    lgQuery.prototype.remove = function() {\n        this._each(function(el) {\n            el.parentNode.removeChild(el);\n        });\n        return this;\n    };\n    lgQuery.prototype.empty = function() {\n        this._each(function(el) {\n            el.innerHTML = \"\";\n        });\n        return this;\n    };\n    lgQuery.prototype.scrollTop = function(scrollTop) {\n        if (scrollTop !== undefined) {\n            document.body.scrollTop = scrollTop;\n            document.documentElement.scrollTop = scrollTop;\n            return this;\n        } else {\n            return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n        }\n    };\n    lgQuery.prototype.scrollLeft = function(scrollLeft) {\n        if (scrollLeft !== undefined) {\n            document.body.scrollLeft = scrollLeft;\n            document.documentElement.scrollLeft = scrollLeft;\n            return this;\n        } else {\n            return window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;\n        }\n    };\n    lgQuery.prototype.offset = function() {\n        if (!this.firstElement) {\n            return {\n                left: 0,\n                top: 0\n            };\n        }\n        var rect = this.firstElement.getBoundingClientRect();\n        var bodyMarginLeft = $LG(\"body\").style().marginLeft;\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\n        return {\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\n            top: rect.top + this.scrollTop()\n        };\n    };\n    lgQuery.prototype.style = function() {\n        if (!this.firstElement) {\n            return {};\n        }\n        return this.firstElement.currentStyle || window.getComputedStyle(this.firstElement);\n    };\n    // Width without padding and border even if box-sizing is used.\n    lgQuery.prototype.width = function() {\n        var style = this.style();\n        return this.firstElement.clientWidth - parseFloat(style.paddingLeft) - parseFloat(style.paddingRight);\n    };\n    // Height without padding and border even if box-sizing is used.\n    lgQuery.prototype.height = function() {\n        var style = this.style();\n        return this.firstElement.clientHeight - parseFloat(style.paddingTop) - parseFloat(style.paddingBottom);\n    };\n    lgQuery.eventListeners = {};\n    return lgQuery;\n}();\nfunction $LG(selector) {\n    initLgPolyfills();\n    return new lgQuery(selector);\n}\nvar defaultDynamicOptions = [\n    \"src\",\n    \"sources\",\n    \"subHtml\",\n    \"subHtmlUrl\",\n    \"html\",\n    \"video\",\n    \"poster\",\n    \"slideName\",\n    \"responsive\",\n    \"srcset\",\n    \"sizes\",\n    \"iframe\",\n    \"downloadUrl\",\n    \"download\",\n    \"width\",\n    \"facebookShareUrl\",\n    \"tweetText\",\n    \"iframeTitle\",\n    \"twitterShareUrl\",\n    \"pinterestShareUrl\",\n    \"pinterestText\",\n    \"fbHtml\",\n    \"disqusIdentifier\",\n    \"disqusUrl\"\n];\n// Convert html data-attribute to camalcase\nfunction convertToData(attr) {\n    // FInd a way for lgsize\n    if (attr === \"href\") {\n        return \"src\";\n    }\n    attr = attr.replace(\"data-\", \"\");\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\n    attr = attr.replace(/-([a-z])/g, function(g) {\n        return g[1].toUpperCase();\n    });\n    return attr;\n}\nvar utils = {\n    /**\r\n     * get possible width and height from the lgSize attribute. Used for ZoomFromOrigin option\r\n     */ getSize: function(el, container, spacing, defaultLgSize) {\n        if (spacing === void 0) {\n            spacing = 0;\n        }\n        var LGel = $LG(el);\n        var lgSize = LGel.attr(\"data-lg-size\") || defaultLgSize;\n        if (!lgSize) {\n            return;\n        }\n        var isResponsiveSizes = lgSize.split(\",\");\n        // if at-least two viewport sizes are available\n        if (isResponsiveSizes[1]) {\n            var wWidth = window.innerWidth;\n            for(var i = 0; i < isResponsiveSizes.length; i++){\n                var size_1 = isResponsiveSizes[i];\n                var responsiveWidth = parseInt(size_1.split(\"-\")[2], 10);\n                if (responsiveWidth > wWidth) {\n                    lgSize = size_1;\n                    break;\n                }\n                // take last item as last option\n                if (i === isResponsiveSizes.length - 1) {\n                    lgSize = size_1;\n                }\n            }\n        }\n        var size = lgSize.split(\"-\");\n        var width = parseInt(size[0], 10);\n        var height = parseInt(size[1], 10);\n        var cWidth = container.width();\n        var cHeight = container.height() - spacing;\n        var maxWidth = Math.min(cWidth, width);\n        var maxHeight = Math.min(cHeight, height);\n        var ratio = Math.min(maxWidth / width, maxHeight / height);\n        return {\n            width: width * ratio,\n            height: height * ratio\n        };\n    },\n    /**\r\n     * @desc Get transform value based on the imageSize. Used for ZoomFromOrigin option\r\n     * @param {jQuery Element}\r\n     * @returns {String} Transform CSS string\r\n     */ getTransform: function(el, container, top, bottom, imageSize) {\n        if (!imageSize) {\n            return;\n        }\n        var LGel = $LG(el).find(\"img\").first();\n        if (!LGel.get()) {\n            return;\n        }\n        var containerRect = container.get().getBoundingClientRect();\n        var wWidth = containerRect.width;\n        // using innerWidth to include mobile safari bottom bar\n        var wHeight = container.height() - (top + bottom);\n        var elWidth = LGel.width();\n        var elHeight = LGel.height();\n        var elStyle = LGel.style();\n        var x = (wWidth - elWidth) / 2 - LGel.offset().left + (parseFloat(elStyle.paddingLeft) || 0) + (parseFloat(elStyle.borderLeft) || 0) + $LG(window).scrollLeft() + containerRect.left;\n        var y = (wHeight - elHeight) / 2 - LGel.offset().top + (parseFloat(elStyle.paddingTop) || 0) + (parseFloat(elStyle.borderTop) || 0) + $LG(window).scrollTop() + top;\n        var scX = elWidth / imageSize.width;\n        var scY = elHeight / imageSize.height;\n        var transform = \"translate3d(\" + (x *= -1) + \"px, \" + (y *= -1) + \"px, 0) scale3d(\" + scX + \", \" + scY + \", 1)\";\n        return transform;\n    },\n    getIframeMarkup: function(iframeWidth, iframeHeight, iframeMaxWidth, iframeMaxHeight, src, iframeTitle) {\n        var title = iframeTitle ? 'title=\"' + iframeTitle + '\"' : \"\";\n        return '<div class=\"lg-video-cont lg-has-iframe\" style=\"width:' + iframeWidth + \"; max-width:\" + iframeMaxWidth + \"; height: \" + iframeHeight + \"; max-height:\" + iframeMaxHeight + '\">\\n                    <iframe class=\"lg-object\" frameborder=\"0\" ' + title + ' src=\"' + src + '\"  allowfullscreen=\"true\"></iframe>\\n                </div>';\n    },\n    getImgMarkup: function(index, src, altAttr, srcset, sizes, sources) {\n        var srcsetAttr = srcset ? 'srcset=\"' + srcset + '\"' : \"\";\n        var sizesAttr = sizes ? 'sizes=\"' + sizes + '\"' : \"\";\n        var imgMarkup = \"<img \" + altAttr + \" \" + srcsetAttr + \"  \" + sizesAttr + ' class=\"lg-object lg-image\" data-index=\"' + index + '\" src=\"' + src + '\" />';\n        var sourceTag = \"\";\n        if (sources) {\n            var sourceObj = typeof sources === \"string\" ? JSON.parse(sources) : sources;\n            sourceTag = sourceObj.map(function(source) {\n                var attrs = \"\";\n                Object.keys(source).forEach(function(key) {\n                    // Do not remove the first space as it is required to separate the attributes\n                    attrs += \" \" + key + '=\"' + source[key] + '\"';\n                });\n                return \"<source \" + attrs + \"></source>\";\n            });\n        }\n        return \"\" + sourceTag + imgMarkup;\n    },\n    // Get src from responsive src\n    getResponsiveSrc: function(srcItms) {\n        var rsWidth = [];\n        var rsSrc = [];\n        var src = \"\";\n        for(var i = 0; i < srcItms.length; i++){\n            var _src = srcItms[i].split(\" \");\n            // Manage empty space\n            if (_src[0] === \"\") {\n                _src.splice(0, 1);\n            }\n            rsSrc.push(_src[0]);\n            rsWidth.push(_src[1]);\n        }\n        var wWidth = window.innerWidth;\n        for(var j = 0; j < rsWidth.length; j++){\n            if (parseInt(rsWidth[j], 10) > wWidth) {\n                src = rsSrc[j];\n                break;\n            }\n        }\n        return src;\n    },\n    isImageLoaded: function(img) {\n        if (!img) return false;\n        // During the onload event, IE correctly identifies any images that\n        // werent downloaded as not complete. Others should too. Gecko-based\n        // browsers act like NS4 in that they report this incorrectly.\n        if (!img.complete) {\n            return false;\n        }\n        // However, they do have two very useful properties: naturalWidth and\n        // naturalHeight. These give the true size of the image. If it failed\n        // to load, either of these should be zero.\n        if (img.naturalWidth === 0) {\n            return false;\n        }\n        // No other way of checking: assume its ok.\n        return true;\n    },\n    getVideoPosterMarkup: function(_poster, dummyImg, videoContStyle, playVideoString, _isVideo) {\n        var videoClass = \"\";\n        if (_isVideo && _isVideo.youtube) {\n            videoClass = \"lg-has-youtube\";\n        } else if (_isVideo && _isVideo.vimeo) {\n            videoClass = \"lg-has-vimeo\";\n        } else {\n            videoClass = \"lg-has-html5\";\n        }\n        return '<div class=\"lg-video-cont ' + videoClass + '\" style=\"' + videoContStyle + '\">\\n                <div class=\"lg-video-play-button\">\\n                <svg\\n                    viewBox=\"0 0 20 20\"\\n                    preserveAspectRatio=\"xMidYMid\"\\n                    focusable=\"false\"\\n                    aria-labelledby=\"' + playVideoString + '\"\\n                    role=\"img\"\\n                    class=\"lg-video-play-icon\"\\n                >\\n                    <title>' + playVideoString + '</title>\\n                    <polygon class=\"lg-video-play-icon-inner\" points=\"1,0 20,10 1,20\"></polygon>\\n                </svg>\\n                <svg class=\"lg-video-play-icon-bg\" viewBox=\"0 0 50 50\" focusable=\"false\">\\n                    <circle cx=\"50%\" cy=\"50%\" r=\"20\"></circle></svg>\\n                <svg class=\"lg-video-play-icon-circle\" viewBox=\"0 0 50 50\" focusable=\"false\">\\n                    <circle cx=\"50%\" cy=\"50%\" r=\"20\"></circle>\\n                </svg>\\n            </div>\\n            ' + (dummyImg || \"\") + '\\n            <img class=\"lg-object lg-video-poster\" src=\"' + _poster + '\" />\\n        </div>';\n    },\n    getFocusableElements: function(container) {\n        var elements = container.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type=\"text\"]:not([disabled]), input[type=\"radio\"]:not([disabled]), input[type=\"checkbox\"]:not([disabled]), select:not([disabled])');\n        var visibleElements = [].filter.call(elements, function(element) {\n            var style = window.getComputedStyle(element);\n            return style.display !== \"none\" && style.visibility !== \"hidden\";\n        });\n        return visibleElements;\n    },\n    /**\r\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\r\n     * It helps to avoid frequent DOM interaction\r\n     * and avoid multiple checks for dynamic elments\r\n     *\r\n     * @returns {Array} dynamicEl\r\n     */ getDynamicOptions: function(items, extraProps, getCaptionFromTitleOrAlt, exThumbImage) {\n        var dynamicElements = [];\n        var availableDynamicOptions = __spreadArrays(defaultDynamicOptions, extraProps);\n        [].forEach.call(items, function(item) {\n            var dynamicEl = {};\n            for(var i = 0; i < item.attributes.length; i++){\n                var attr = item.attributes[i];\n                if (attr.specified) {\n                    var dynamicAttr = convertToData(attr.name);\n                    var label = \"\";\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\n                        label = dynamicAttr;\n                    }\n                    if (label) {\n                        dynamicEl[label] = attr.value;\n                    }\n                }\n            }\n            var currentItem = $LG(item);\n            var alt = currentItem.find(\"img\").first().attr(\"alt\");\n            var title = currentItem.attr(\"title\");\n            var thumb = exThumbImage ? currentItem.attr(exThumbImage) : currentItem.find(\"img\").first().attr(\"src\");\n            dynamicEl.thumb = thumb;\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\n                dynamicEl.subHtml = title || alt || \"\";\n            }\n            dynamicEl.alt = alt || title || \"\";\n            dynamicElements.push(dynamicEl);\n        });\n        return dynamicElements;\n    },\n    isMobile: function() {\n        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n    },\n    /**\r\n     * @desc Check the given src is video\r\n     * @param {String} src\r\n     * @return {Object} video type\r\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\r\n     *\r\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\r\n     */ isVideo: function(src, isHTML5VIdeo, index) {\n        if (!src) {\n            if (isHTML5VIdeo) {\n                return {\n                    html5: true\n                };\n            } else {\n                console.error(\"lightGallery :- data-src is not provided on slide item \" + (index + 1) + \". Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/\");\n                return;\n            }\n        }\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)([\\&|?][\\S]*)*/i);\n        var vimeo = src.match(/\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)(.*)?/i);\n        var wistia = src.match(/https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/);\n        if (youtube) {\n            return {\n                youtube: youtube\n            };\n        } else if (vimeo) {\n            return {\n                vimeo: vimeo\n            };\n        } else if (wistia) {\n            return {\n                wistia: wistia\n            };\n        }\n    }\n};\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\n// Unique id for each gallery\nvar lgId = 0;\nvar LightGallery = /** @class */ function() {\n    function LightGallery(element, options) {\n        this.lgOpened = false;\n        this.index = 0;\n        // lightGallery modules\n        this.plugins = [];\n        // false when lightGallery load first slide content;\n        this.lGalleryOn = false;\n        // True when a slide animation is in progress\n        this.lgBusy = false;\n        this.currentItemsInDom = [];\n        // Scroll top value before lightGallery is opened\n        this.prevScrollTop = 0;\n        this.bodyPaddingRight = 0;\n        this.isDummyImageRemoved = false;\n        this.dragOrSwipeEnabled = false;\n        this.mediaContainerPosition = {\n            top: 0,\n            bottom: 0\n        };\n        if (!element) {\n            return this;\n        }\n        lgId++;\n        this.lgId = lgId;\n        this.el = element;\n        this.LGel = $LG(element);\n        this.generateSettings(options);\n        this.buildModules();\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (this.settings.dynamic && this.settings.dynamicEl !== undefined && !Array.isArray(this.settings.dynamicEl)) {\n            throw \"When using dynamic mode, you must also define dynamicEl as an Array.\";\n        }\n        this.galleryItems = this.getItems();\n        this.normalizeSettings();\n        // Gallery items\n        this.init();\n        this.validateLicense();\n        return this;\n    }\n    LightGallery.prototype.generateSettings = function(options) {\n        // lightGallery settings\n        this.settings = __assign(__assign({}, lightGalleryCoreSettings), options);\n        if (this.settings.isMobile && typeof this.settings.isMobile === \"function\" ? this.settings.isMobile() : utils.isMobile()) {\n            var mobileSettings = __assign(__assign({}, this.settings.mobileSettings), this.settings.mobileSettings);\n            this.settings = __assign(__assign({}, this.settings), mobileSettings);\n        }\n    };\n    LightGallery.prototype.normalizeSettings = function() {\n        if (this.settings.slideEndAnimation) {\n            this.settings.hideControlOnEnd = false;\n        }\n        if (!this.settings.closable) {\n            this.settings.swipeToClose = false;\n        }\n        // And reset it on close to get the correct value next time\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\n        // At the moment, Zoom from image doesn't support dynamic options\n        // @todo add zoomFromOrigin support for dynamic images\n        if (this.settings.dynamic) {\n            this.zoomFromOrigin = false;\n        }\n        if (!this.settings.container) {\n            this.settings.container = document.body;\n        }\n        // settings.preload should not be grater than $item.length\n        this.settings.preload = Math.min(this.settings.preload, this.galleryItems.length);\n    };\n    LightGallery.prototype.init = function() {\n        var _this = this;\n        this.addSlideVideoInfo(this.galleryItems);\n        this.buildStructure();\n        this.LGel.trigger(lGEvents.init, {\n            instance: this\n        });\n        if (this.settings.keyPress) {\n            this.keyPress();\n        }\n        setTimeout(function() {\n            _this.enableDrag();\n            _this.enableSwipe();\n            _this.triggerPosterClick();\n        }, 50);\n        this.arrow();\n        if (this.settings.mousewheel) {\n            this.mousewheel();\n        }\n        if (!this.settings.dynamic) {\n            this.openGalleryOnItemClick();\n        }\n    };\n    LightGallery.prototype.openGalleryOnItemClick = function() {\n        var _this = this;\n        var _loop_1 = function(index) {\n            var element = this_1.items[index];\n            var $element = $LG(element);\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\n            // @todo manage all event listners - should have namespace that represent element\n            var uuid = lgQuery.generateUUID();\n            $element.attr(\"data-lg-id\", uuid).on(\"click.lgcustom-item-\" + uuid, function(e) {\n                e.preventDefault();\n                var currentItemIndex = _this.settings.index || index;\n                _this.openGallery(currentItemIndex, element);\n            });\n        };\n        var this_1 = this;\n        // Using for loop instead of using bubbling as the items can be any html element.\n        for(var index = 0; index < this.items.length; index++){\n            _loop_1(index);\n        }\n    };\n    /**\r\n     * Module constructor\r\n     * Modules are build incrementally.\r\n     * Gallery should be opened only once all the modules are initialized.\r\n     * use moduleBuildTimeout to make sure this\r\n     */ LightGallery.prototype.buildModules = function() {\n        var _this = this;\n        this.settings.plugins.forEach(function(plugin) {\n            _this.plugins.push(new plugin(_this, $LG));\n        });\n    };\n    LightGallery.prototype.validateLicense = function() {\n        if (!this.settings.licenseKey) {\n            console.error(\"Please provide a valid license key\");\n        } else if (this.settings.licenseKey === \"0000-0000-000-0000\") {\n            console.warn(\"lightGallery: \" + this.settings.licenseKey + \" license key is not valid for production use\");\n        }\n    };\n    LightGallery.prototype.getSlideItem = function(index) {\n        return $LG(this.getSlideItemId(index));\n    };\n    LightGallery.prototype.getSlideItemId = function(index) {\n        return \"#lg-item-\" + this.lgId + \"-\" + index;\n    };\n    LightGallery.prototype.getIdName = function(id) {\n        return id + \"-\" + this.lgId;\n    };\n    LightGallery.prototype.getElementById = function(id) {\n        return $LG(\"#\" + this.getIdName(id));\n    };\n    LightGallery.prototype.manageSingleSlideClassName = function() {\n        if (this.galleryItems.length < 2) {\n            this.outer.addClass(\"lg-single-item\");\n        } else {\n            this.outer.removeClass(\"lg-single-item\");\n        }\n    };\n    LightGallery.prototype.buildStructure = function() {\n        var _this = this;\n        var container = this.$container && this.$container.get();\n        if (container) {\n            return;\n        }\n        var controls = \"\";\n        var subHtmlCont = \"\";\n        // Create controls\n        if (this.settings.controls) {\n            controls = '<button type=\"button\" id=\"' + this.getIdName(\"lg-prev\") + '\" aria-label=\"' + this.settings.strings[\"previousSlide\"] + '\" class=\"lg-prev lg-icon\"> ' + this.settings.prevHtml + ' </button>\\n                <button type=\"button\" id=\"' + this.getIdName(\"lg-next\") + '\" aria-label=\"' + this.settings.strings[\"nextSlide\"] + '\" class=\"lg-next lg-icon\"> ' + this.settings.nextHtml + \" </button>\";\n        }\n        if (this.settings.appendSubHtmlTo !== \".lg-item\") {\n            subHtmlCont = '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\n        }\n        var addClasses = \"\";\n        if (this.settings.allowMediaOverlap) {\n            // Do not remove space before last single quote\n            addClasses += \"lg-media-overlap \";\n        }\n        var ariaLabelledby = this.settings.ariaLabelledby ? 'aria-labelledby=\"' + this.settings.ariaLabelledby + '\"' : \"\";\n        var ariaDescribedby = this.settings.ariaDescribedby ? 'aria-describedby=\"' + this.settings.ariaDescribedby + '\"' : \"\";\n        var containerClassName = \"lg-container \" + this.settings.addClass + \" \" + (document.body !== this.settings.container ? \"lg-inline\" : \"\");\n        var closeIcon = this.settings.closable && this.settings.showCloseIcon ? '<button type=\"button\" aria-label=\"' + this.settings.strings[\"closeGallery\"] + '\" id=\"' + this.getIdName(\"lg-close\") + '\" class=\"lg-close lg-icon\"></button>' : \"\";\n        var maximizeIcon = this.settings.showMaximizeIcon ? '<button type=\"button\" aria-label=\"' + this.settings.strings[\"toggleMaximize\"] + '\" id=\"' + this.getIdName(\"lg-maximize\") + '\" class=\"lg-maximize lg-icon\"></button>' : \"\";\n        var template = '\\n        <div class=\"' + containerClassName + '\" id=\"' + this.getIdName(\"lg-container\") + '\" tabindex=\"-1\" aria-modal=\"true\" ' + ariaLabelledby + \" \" + ariaDescribedby + ' role=\"dialog\"\\n        >\\n            <div id=\"' + this.getIdName(\"lg-backdrop\") + '\" class=\"lg-backdrop\"></div>\\n\\n            <div id=\"' + this.getIdName(\"lg-outer\") + '\" class=\"lg-outer lg-use-css3 lg-css3 lg-hide-items ' + addClasses + ' \">\\n\\n              <div id=\"' + this.getIdName(\"lg-content\") + '\" class=\"lg-content\">\\n                <div id=\"' + this.getIdName(\"lg-inner\") + '\" class=\"lg-inner\">\\n                </div>\\n                ' + controls + '\\n              </div>\\n                <div id=\"' + this.getIdName(\"lg-toolbar\") + '\" class=\"lg-toolbar lg-group\">\\n                    ' + maximizeIcon + \"\\n                    \" + closeIcon + \"\\n                    </div>\\n                    \" + (this.settings.appendSubHtmlTo === \".lg-outer\" ? subHtmlCont : \"\") + '\\n                <div id=\"' + this.getIdName(\"lg-components\") + '\" class=\"lg-components\">\\n                    ' + (this.settings.appendSubHtmlTo === \".lg-sub-html\" ? subHtmlCont : \"\") + \"\\n                </div>\\n            </div>\\n        </div>\\n        \";\n        $LG(this.settings.container).append(template);\n        if (document.body !== this.settings.container) {\n            $LG(this.settings.container).css(\"position\", \"relative\");\n        }\n        this.outer = this.getElementById(\"lg-outer\");\n        this.$lgComponents = this.getElementById(\"lg-components\");\n        this.$backdrop = this.getElementById(\"lg-backdrop\");\n        this.$container = this.getElementById(\"lg-container\");\n        this.$inner = this.getElementById(\"lg-inner\");\n        this.$content = this.getElementById(\"lg-content\");\n        this.$toolbar = this.getElementById(\"lg-toolbar\");\n        this.$backdrop.css(\"transition-duration\", this.settings.backdropDuration + \"ms\");\n        var outerClassNames = this.settings.mode + \" \";\n        this.manageSingleSlideClassName();\n        if (this.settings.enableDrag) {\n            outerClassNames += \"lg-grab \";\n        }\n        this.outer.addClass(outerClassNames);\n        this.$inner.css(\"transition-timing-function\", this.settings.easing);\n        this.$inner.css(\"transition-duration\", this.settings.speed + \"ms\");\n        if (this.settings.download) {\n            this.$toolbar.append('<a id=\"' + this.getIdName(\"lg-download\") + '\" target=\"_blank\" rel=\"noopener\" aria-label=\"' + this.settings.strings[\"download\"] + '\" download class=\"lg-download lg-icon\"></a>');\n        }\n        this.counter();\n        $LG(window).on(\"resize.lg.global\" + this.lgId + \" orientationchange.lg.global\" + this.lgId, function() {\n            _this.refreshOnResize();\n        });\n        this.hideBars();\n        this.manageCloseGallery();\n        this.toggleMaximize();\n        this.initModules();\n    };\n    LightGallery.prototype.refreshOnResize = function() {\n        if (this.lgOpened) {\n            var currentGalleryItem = this.galleryItems[this.index];\n            var __slideVideoInfo = currentGalleryItem.__slideVideoInfo;\n            this.mediaContainerPosition = this.getMediaContainerPosition();\n            var _a = this.mediaContainerPosition, top_1 = _a.top, bottom = _a.bottom;\n            this.currentImageSize = utils.getSize(this.items[this.index], this.outer, top_1 + bottom, __slideVideoInfo && this.settings.videoMaxSize);\n            if (__slideVideoInfo) {\n                this.resizeVideoSlide(this.index, this.currentImageSize);\n            }\n            if (this.zoomFromOrigin && !this.isDummyImageRemoved) {\n                var imgStyle = this.getDummyImgStyles(this.currentImageSize);\n                this.outer.find(\".lg-current .lg-dummy-img\").first().attr(\"style\", imgStyle);\n            }\n            this.LGel.trigger(lGEvents.containerResize);\n        }\n    };\n    LightGallery.prototype.resizeVideoSlide = function(index, imageSize) {\n        var lgVideoStyle = this.getVideoContStyle(imageSize);\n        var currentSlide = this.getSlideItem(index);\n        currentSlide.find(\".lg-video-cont\").attr(\"style\", lgVideoStyle);\n    };\n    /**\r\n     * Update slides dynamically.\r\n     * Add, edit or delete slides dynamically when lightGallery is opened.\r\n     * Modify the current gallery items and pass it via updateSlides method\r\n     * @note\r\n     * - Do not mutate existing lightGallery items directly.\r\n     * - Always pass new list of gallery items\r\n     * - You need to take care of thumbnails outside the gallery if any\r\n     * - user this method only if you want to update slides when the gallery is opened. Otherwise, use `refresh()` method.\r\n     * @param items Gallery items\r\n     * @param index After the update operation, which slide gallery should navigate to\r\n     * @category lGPublicMethods\r\n     * @example\r\n     * const plugin = lightGallery();\r\n     *\r\n     * // Adding slides dynamically\r\n     * let galleryItems = [\r\n     * // Access existing lightGallery items\r\n     * // galleryItems are automatically generated internally from the gallery HTML markup\r\n     * // or directly from galleryItems when dynamic gallery is used\r\n     *   ...plugin.galleryItems,\r\n     *     ...[\r\n     *       {\r\n     *         src: 'img/img-1.png',\r\n     *           thumb: 'img/thumb1.png',\r\n     *         },\r\n     *     ],\r\n     *   ];\r\n     *   plugin.updateSlides(\r\n     *     galleryItems,\r\n     *     plugin.index,\r\n     *   );\r\n     *\r\n     *\r\n     * // Remove slides dynamically\r\n     * galleryItems = JSON.parse(\r\n     *   JSON.stringify(updateSlideInstance.galleryItems),\r\n     * );\r\n     * galleryItems.shift();\r\n     * updateSlideInstance.updateSlides(galleryItems, 1);\r\n     * @see <a href=\"/demos/update-slides/\">Demo</a>\r\n     */ LightGallery.prototype.updateSlides = function(items, index) {\n        if (this.index > items.length - 1) {\n            this.index = items.length - 1;\n        }\n        if (items.length === 1) {\n            this.index = 0;\n        }\n        if (!items.length) {\n            this.closeGallery();\n            return;\n        }\n        var currentSrc = this.galleryItems[index].src;\n        this.galleryItems = items;\n        this.updateControls();\n        this.$inner.empty();\n        this.currentItemsInDom = [];\n        var _index = 0;\n        // Find the current index based on source value of the slide\n        this.galleryItems.some(function(galleryItem, itemIndex) {\n            if (galleryItem.src === currentSrc) {\n                _index = itemIndex;\n                return true;\n            }\n            return false;\n        });\n        this.currentItemsInDom = this.organizeSlideItems(_index, -1);\n        this.loadContent(_index, true);\n        this.getSlideItem(_index).addClass(\"lg-current\");\n        this.index = _index;\n        this.updateCurrentCounter(_index);\n        this.LGel.trigger(lGEvents.updateSlides);\n    };\n    // Get gallery items based on multiple conditions\n    LightGallery.prototype.getItems = function() {\n        // Gallery items\n        this.items = [];\n        if (!this.settings.dynamic) {\n            if (this.settings.selector === \"this\") {\n                this.items.push(this.el);\n            } else if (this.settings.selector) {\n                if (typeof this.settings.selector === \"string\") {\n                    if (this.settings.selectWithin) {\n                        var selectWithin = $LG(this.settings.selectWithin);\n                        this.items = selectWithin.find(this.settings.selector).get();\n                    } else {\n                        this.items = this.el.querySelectorAll(this.settings.selector);\n                    }\n                } else {\n                    this.items = this.settings.selector;\n                }\n            } else {\n                this.items = this.el.children;\n            }\n            return utils.getDynamicOptions(this.items, this.settings.extraProps, this.settings.getCaptionFromTitleOrAlt, this.settings.exThumbImage);\n        } else {\n            return this.settings.dynamicEl || [];\n        }\n    };\n    LightGallery.prototype.shouldHideScrollbar = function() {\n        return this.settings.hideScrollbar && document.body === this.settings.container;\n    };\n    LightGallery.prototype.hideScrollbar = function() {\n        if (!this.shouldHideScrollbar()) {\n            return;\n        }\n        this.bodyPaddingRight = parseFloat($LG(\"body\").style().paddingRight);\n        var bodyRect = document.documentElement.getBoundingClientRect();\n        var scrollbarWidth = window.innerWidth - bodyRect.width;\n        $LG(document.body).css(\"padding-right\", scrollbarWidth + this.bodyPaddingRight + \"px\");\n        $LG(document.body).addClass(\"lg-overlay-open\");\n    };\n    LightGallery.prototype.resetScrollBar = function() {\n        if (!this.shouldHideScrollbar()) {\n            return;\n        }\n        $LG(document.body).css(\"padding-right\", this.bodyPaddingRight + \"px\");\n        $LG(document.body).removeClass(\"lg-overlay-open\");\n    };\n    /**\r\n     * Open lightGallery.\r\n     * Open gallery with specific slide by passing index of the slide as parameter.\r\n     * @category lGPublicMethods\r\n     * @param {Number} index  - index of the slide\r\n     * @param {HTMLElement} element - Which image lightGallery should zoom from\r\n     *\r\n     * @example\r\n     * const $dynamicGallery = document.getElementById('dynamic-gallery-demo');\r\n     * const dynamicGallery = lightGallery($dynamicGallery, {\r\n     *     dynamic: true,\r\n     *     dynamicEl: [\r\n     *         {\r\n     *              src: 'img/1.jpg',\r\n     *              thumb: 'img/thumb-1.jpg',\r\n     *              subHtml: '<h4>Image 1 title</h4><p>Image 1 descriptions.</p>',\r\n     *         },\r\n     *         ...\r\n     *     ],\r\n     * });\r\n     * $dynamicGallery.addEventListener('click', function () {\r\n     *     // Starts with third item.(Optional).\r\n     *     // This is useful if you want use dynamic mode with\r\n     *     // custom thumbnails (thumbnails outside gallery),\r\n     *     dynamicGallery.openGallery(2);\r\n     * });\r\n     *\r\n     */ LightGallery.prototype.openGallery = function(index, element) {\n        var _this = this;\n        if (index === void 0) {\n            index = this.settings.index;\n        }\n        // prevent accidental double execution\n        if (this.lgOpened) return;\n        this.lgOpened = true;\n        this.outer.removeClass(\"lg-hide-items\");\n        this.hideScrollbar();\n        // Add display block, but still has opacity 0\n        this.$container.addClass(\"lg-show\");\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, index);\n        this.currentItemsInDom = itemsToBeInsertedToDom;\n        var items = \"\";\n        itemsToBeInsertedToDom.forEach(function(item) {\n            items = items + ('<div id=\"' + item + '\" class=\"lg-item\"></div>');\n        });\n        this.$inner.append(items);\n        this.addHtml(index);\n        var transform = \"\";\n        this.mediaContainerPosition = this.getMediaContainerPosition();\n        var _a = this.mediaContainerPosition, top = _a.top, bottom = _a.bottom;\n        if (!this.settings.allowMediaOverlap) {\n            this.setMediaContainerPosition(top, bottom);\n        }\n        var __slideVideoInfo = this.galleryItems[index].__slideVideoInfo;\n        if (this.zoomFromOrigin && element) {\n            this.currentImageSize = utils.getSize(element, this.outer, top + bottom, __slideVideoInfo && this.settings.videoMaxSize);\n            transform = utils.getTransform(element, this.outer, top, bottom, this.currentImageSize);\n        }\n        if (!this.zoomFromOrigin || !transform) {\n            this.outer.addClass(this.settings.startClass);\n            this.getSlideItem(index).removeClass(\"lg-complete\");\n        }\n        var timeout = this.settings.zoomFromOrigin ? 100 : this.settings.backdropDuration;\n        setTimeout(function() {\n            _this.outer.addClass(\"lg-components-open\");\n        }, timeout);\n        this.index = index;\n        this.LGel.trigger(lGEvents.beforeOpen);\n        // add class lg-current to remove initial transition\n        this.getSlideItem(index).addClass(\"lg-current\");\n        this.lGalleryOn = false;\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = $LG(window).scrollTop();\n        setTimeout(function() {\n            // Need to check both zoomFromOrigin and transform values as we need to set set the\n            // default opening animation if user missed to add the lg-size attribute\n            if (_this.zoomFromOrigin && transform) {\n                var currentSlide_1 = _this.getSlideItem(index);\n                currentSlide_1.css(\"transform\", transform);\n                setTimeout(function() {\n                    currentSlide_1.addClass(\"lg-start-progress lg-start-end-progress\").css(\"transition-duration\", _this.settings.startAnimationDuration + \"ms\");\n                    _this.outer.addClass(\"lg-zoom-from-image\");\n                });\n                setTimeout(function() {\n                    currentSlide_1.css(\"transform\", \"translate3d(0, 0, 0)\");\n                }, 100);\n            }\n            setTimeout(function() {\n                _this.$backdrop.addClass(\"in\");\n                _this.$container.addClass(\"lg-show-in\");\n            }, 10);\n            setTimeout(function() {\n                if (_this.settings.trapFocus && document.body === _this.settings.container) {\n                    _this.trapFocus();\n                }\n            }, _this.settings.backdropDuration + 50);\n            // lg-visible class resets gallery opacity to 1\n            if (!_this.zoomFromOrigin || !transform) {\n                setTimeout(function() {\n                    _this.outer.addClass(\"lg-visible\");\n                }, _this.settings.backdropDuration);\n            }\n            // initiate slide function\n            _this.slide(index, false, false, false);\n            _this.LGel.trigger(lGEvents.afterOpen);\n        });\n        if (document.body === this.settings.container) {\n            $LG(\"html\").addClass(\"lg-on\");\n        }\n    };\n    /**\r\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\r\n     * Therefore,The height of the caption is calculated dynamically, only once based on the first slide caption.\r\n     * if you have dynamic captions for each media,\r\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\r\n     */ LightGallery.prototype.getMediaContainerPosition = function() {\n        if (this.settings.allowMediaOverlap) {\n            return {\n                top: 0,\n                bottom: 0\n            };\n        }\n        var top = this.$toolbar.get().clientHeight || 0;\n        var subHtml = this.outer.find(\".lg-components .lg-sub-html\").get();\n        var captionHeight = this.settings.defaultCaptionHeight || subHtml && subHtml.clientHeight || 0;\n        var thumbContainer = this.outer.find(\".lg-thumb-outer\").get();\n        var thumbHeight = thumbContainer ? thumbContainer.clientHeight : 0;\n        var bottom = thumbHeight + captionHeight;\n        return {\n            top: top,\n            bottom: bottom\n        };\n    };\n    LightGallery.prototype.setMediaContainerPosition = function(top, bottom) {\n        if (top === void 0) {\n            top = 0;\n        }\n        if (bottom === void 0) {\n            bottom = 0;\n        }\n        this.$content.css(\"top\", top + \"px\").css(\"bottom\", bottom + \"px\");\n    };\n    LightGallery.prototype.hideBars = function() {\n        var _this = this;\n        // Hide controllers if mouse doesn't move for some period\n        setTimeout(function() {\n            _this.outer.removeClass(\"lg-hide-items\");\n            if (_this.settings.hideBarsDelay > 0) {\n                _this.outer.on(\"mousemove.lg click.lg touchstart.lg\", function() {\n                    _this.outer.removeClass(\"lg-hide-items\");\n                    clearTimeout(_this.hideBarTimeout);\n                    // Timeout will be cleared on each slide movement also\n                    _this.hideBarTimeout = setTimeout(function() {\n                        _this.outer.addClass(\"lg-hide-items\");\n                    }, _this.settings.hideBarsDelay);\n                });\n                _this.outer.trigger(\"mousemove.lg\");\n            }\n        }, this.settings.showBarsAfter);\n    };\n    LightGallery.prototype.initPictureFill = function($img) {\n        if (this.settings.supportLegacyBrowser) {\n            try {\n                picturefill({\n                    elements: [\n                        $img.get()\n                    ]\n                });\n            } catch (e) {\n                console.warn(\"lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.\");\n            }\n        }\n    };\n    /**\r\n     *  @desc Create image counter\r\n     *  Ex: 1/10\r\n     */ LightGallery.prototype.counter = function() {\n        if (this.settings.counter) {\n            var counterHtml = '<div class=\"lg-counter\" role=\"status\" aria-live=\"polite\">\\n                <span id=\"' + this.getIdName(\"lg-counter-current\") + '\" class=\"lg-counter-current\">' + (this.index + 1) + ' </span> /\\n                <span id=\"' + this.getIdName(\"lg-counter-all\") + '\" class=\"lg-counter-all\">' + this.galleryItems.length + \" </span></div>\";\n            this.outer.find(this.settings.appendCounterTo).append(counterHtml);\n        }\n    };\n    /**\r\n     *  @desc add sub-html into the slide\r\n     *  @param {Number} index - index of the slide\r\n     */ LightGallery.prototype.addHtml = function(index) {\n        var subHtml;\n        var subHtmlUrl;\n        if (this.galleryItems[index].subHtmlUrl) {\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\n        } else {\n            subHtml = this.galleryItems[index].subHtml;\n        }\n        if (!subHtmlUrl) {\n            if (subHtml) {\n                // get first letter of sub-html\n                // if first letter starts with . or # get the html form the jQuery object\n                var fL = subHtml.substring(0, 1);\n                if (fL === \".\" || fL === \"#\") {\n                    if (this.settings.subHtmlSelectorRelative && !this.settings.dynamic) {\n                        subHtml = $LG(this.items).eq(index).find(subHtml).first().html();\n                    } else {\n                        subHtml = $LG(subHtml).first().html();\n                    }\n                }\n            } else {\n                subHtml = \"\";\n            }\n        }\n        if (this.settings.appendSubHtmlTo !== \".lg-item\") {\n            if (subHtmlUrl) {\n                this.outer.find(\".lg-sub-html\").load(subHtmlUrl);\n            } else {\n                this.outer.find(\".lg-sub-html\").html(subHtml);\n            }\n        } else {\n            var currentSlide = $LG(this.getSlideItemId(index));\n            if (subHtmlUrl) {\n                currentSlide.load(subHtmlUrl);\n            } else {\n                currentSlide.append('<div class=\"lg-sub-html\">' + subHtml + \"</div>\");\n            }\n        }\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== \"undefined\" && subHtml !== null) {\n            if (subHtml === \"\") {\n                this.outer.find(this.settings.appendSubHtmlTo).addClass(\"lg-empty-html\");\n            } else {\n                this.outer.find(this.settings.appendSubHtmlTo).removeClass(\"lg-empty-html\");\n            }\n        }\n        this.LGel.trigger(lGEvents.afterAppendSubHtml, {\n            index: index\n        });\n    };\n    /**\r\n     *  @desc Preload slides\r\n     *  @param {Number} index - index of the slide\r\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\r\n     */ LightGallery.prototype.preload = function(index) {\n        for(var i = 1; i <= this.settings.preload; i++){\n            if (i >= this.galleryItems.length - index) {\n                break;\n            }\n            this.loadContent(index + i, false);\n        }\n        for(var j = 1; j <= this.settings.preload; j++){\n            if (index - j < 0) {\n                break;\n            }\n            this.loadContent(index - j, false);\n        }\n    };\n    LightGallery.prototype.getDummyImgStyles = function(imageSize) {\n        if (!imageSize) return \"\";\n        return \"width:\" + imageSize.width + \"px;\\n                margin-left: -\" + imageSize.width / 2 + \"px;\\n                margin-top: -\" + imageSize.height / 2 + \"px;\\n                height:\" + imageSize.height + \"px\";\n    };\n    LightGallery.prototype.getVideoContStyle = function(imageSize) {\n        if (!imageSize) return \"\";\n        return \"width:\" + imageSize.width + \"px;\\n                height:\" + imageSize.height + \"px\";\n    };\n    LightGallery.prototype.getDummyImageContent = function($currentSlide, index, alt) {\n        var $currentItem;\n        if (!this.settings.dynamic) {\n            $currentItem = $LG(this.items).eq(index);\n        }\n        if ($currentItem) {\n            var _dummyImgSrc = void 0;\n            if (!this.settings.exThumbImage) {\n                _dummyImgSrc = $currentItem.find(\"img\").first().attr(\"src\");\n            } else {\n                _dummyImgSrc = $currentItem.attr(this.settings.exThumbImage);\n            }\n            if (!_dummyImgSrc) return \"\";\n            var imgStyle = this.getDummyImgStyles(this.currentImageSize);\n            var dummyImgContent = \"<img \" + alt + ' style=\"' + imgStyle + '\" class=\"lg-dummy-img\" src=\"' + _dummyImgSrc + '\" />';\n            $currentSlide.addClass(\"lg-first-slide\");\n            this.outer.addClass(\"lg-first-slide-loading\");\n            return dummyImgContent;\n        }\n        return \"\";\n    };\n    LightGallery.prototype.setImgMarkup = function(src, $currentSlide, index) {\n        var currentGalleryItem = this.galleryItems[index];\n        var alt = currentGalleryItem.alt, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\n        // Use the thumbnail as dummy image which will be resized to actual image size and\n        // displayed on top of actual image\n        var imgContent = \"\";\n        var altAttr = alt ? 'alt=\"' + alt + '\"' : \"\";\n        if (this.isFirstSlideWithZoomAnimation()) {\n            imgContent = this.getDummyImageContent($currentSlide, index, altAttr);\n        } else {\n            imgContent = utils.getImgMarkup(index, src, altAttr, srcset, sizes, sources);\n        }\n        var imgMarkup = '<picture class=\"lg-img-wrap\"> ' + imgContent + \"</picture>\";\n        $currentSlide.prepend(imgMarkup);\n    };\n    LightGallery.prototype.onSlideObjectLoad = function($slide, isHTML5VideoWithoutPoster, onLoad, onError) {\n        var mediaObject = $slide.find(\".lg-object\").first();\n        if (utils.isImageLoaded(mediaObject.get()) || isHTML5VideoWithoutPoster) {\n            onLoad();\n        } else {\n            mediaObject.on(\"load.lg error.lg\", function() {\n                onLoad && onLoad();\n            });\n            mediaObject.on(\"error.lg\", function() {\n                onError && onError();\n            });\n        }\n    };\n    /**\r\n     *\r\n     * @param $el Current slide item\r\n     * @param index\r\n     * @param delay Delay is 0 except first time\r\n     * @param speed Speed is same as delay, except it is 0 if gallery is opened via hash plugin\r\n     * @param isFirstSlide\r\n     */ LightGallery.prototype.onLgObjectLoad = function(currentSlide, index, delay, speed, isFirstSlide, isHTML5VideoWithoutPoster) {\n        var _this = this;\n        this.onSlideObjectLoad(currentSlide, isHTML5VideoWithoutPoster, function() {\n            _this.triggerSlideItemLoad(currentSlide, index, delay, speed, isFirstSlide);\n        }, function() {\n            currentSlide.addClass(\"lg-complete lg-complete_\");\n            currentSlide.html('<span class=\"lg-error-msg\">' + _this.settings.strings[\"mediaLoadingFailed\"] + \"</span>\");\n        });\n    };\n    LightGallery.prototype.triggerSlideItemLoad = function($currentSlide, index, delay, speed, isFirstSlide) {\n        var _this = this;\n        var currentGalleryItem = this.galleryItems[index];\n        // Adding delay for video slides without poster for better performance and user experience\n        // Videos should start playing once once the gallery is completely loaded\n        var _speed = isFirstSlide && this.getSlideType(currentGalleryItem) === \"video\" && !currentGalleryItem.poster ? speed : 0;\n        setTimeout(function() {\n            $currentSlide.addClass(\"lg-complete lg-complete_\");\n            _this.LGel.trigger(lGEvents.slideItemLoad, {\n                index: index,\n                delay: delay || 0,\n                isFirstSlide: isFirstSlide\n            });\n        }, _speed);\n    };\n    LightGallery.prototype.isFirstSlideWithZoomAnimation = function() {\n        return !!(!this.lGalleryOn && this.zoomFromOrigin && this.currentImageSize);\n    };\n    // Add video slideInfo\n    LightGallery.prototype.addSlideVideoInfo = function(items) {\n        var _this = this;\n        items.forEach(function(element, index) {\n            element.__slideVideoInfo = utils.isVideo(element.src, !!element.video, index);\n            if (element.__slideVideoInfo && _this.settings.loadYouTubePoster && !element.poster && element.__slideVideoInfo.youtube) {\n                element.poster = \"//img.youtube.com/vi/\" + element.__slideVideoInfo.youtube[1] + \"/maxresdefault.jpg\";\n            }\n        });\n    };\n    /**\r\n     *  Load slide content into slide.\r\n     *  This is used to load content into slides that is not visible too\r\n     *  @param {Number} index - index of the slide.\r\n     *  @param {Boolean} rec - if true call loadcontent() function again.\r\n     */ LightGallery.prototype.loadContent = function(index, rec) {\n        var _this = this;\n        var currentGalleryItem = this.galleryItems[index];\n        var $currentSlide = $LG(this.getSlideItemId(index));\n        var poster = currentGalleryItem.poster, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\n        var src = currentGalleryItem.src;\n        var video = currentGalleryItem.video;\n        var _html5Video = video && typeof video === \"string\" ? JSON.parse(video) : video;\n        if (currentGalleryItem.responsive) {\n            var srcDyItms = currentGalleryItem.responsive.split(\",\");\n            src = utils.getResponsiveSrc(srcDyItms) || src;\n        }\n        var videoInfo = currentGalleryItem.__slideVideoInfo;\n        var lgVideoStyle = \"\";\n        var iframe = !!currentGalleryItem.iframe;\n        var isFirstSlide = !this.lGalleryOn;\n        // delay for adding complete class. it is 0 except first time.\n        var delay = 0;\n        if (isFirstSlide) {\n            if (this.zoomFromOrigin && this.currentImageSize) {\n                delay = this.settings.startAnimationDuration + 10;\n            } else {\n                delay = this.settings.backdropDuration + 10;\n            }\n        }\n        if (!$currentSlide.hasClass(\"lg-loaded\")) {\n            if (videoInfo) {\n                var _a = this.mediaContainerPosition, top_2 = _a.top, bottom = _a.bottom;\n                var videoSize = utils.getSize(this.items[index], this.outer, top_2 + bottom, videoInfo && this.settings.videoMaxSize);\n                lgVideoStyle = this.getVideoContStyle(videoSize);\n            }\n            if (iframe) {\n                var markup = utils.getIframeMarkup(this.settings.iframeWidth, this.settings.iframeHeight, this.settings.iframeMaxWidth, this.settings.iframeMaxHeight, src, currentGalleryItem.iframeTitle);\n                $currentSlide.prepend(markup);\n            } else if (poster) {\n                var dummyImg = \"\";\n                var hasStartAnimation = isFirstSlide && this.zoomFromOrigin && this.currentImageSize;\n                if (hasStartAnimation) {\n                    dummyImg = this.getDummyImageContent($currentSlide, index, \"\");\n                }\n                var markup = utils.getVideoPosterMarkup(poster, dummyImg || \"\", lgVideoStyle, this.settings.strings[\"playVideo\"], videoInfo);\n                $currentSlide.prepend(markup);\n            } else if (videoInfo) {\n                var markup = '<div class=\"lg-video-cont \" style=\"' + lgVideoStyle + '\"></div>';\n                $currentSlide.prepend(markup);\n            } else {\n                this.setImgMarkup(src, $currentSlide, index);\n                if (srcset || sources) {\n                    var $img = $currentSlide.find(\".lg-object\");\n                    this.initPictureFill($img);\n                }\n            }\n            if (poster || videoInfo) {\n                this.LGel.trigger(lGEvents.hasVideo, {\n                    index: index,\n                    src: src,\n                    html5Video: _html5Video,\n                    hasPoster: !!poster\n                });\n            }\n            this.LGel.trigger(lGEvents.afterAppendSlide, {\n                index: index\n            });\n            if (this.lGalleryOn && this.settings.appendSubHtmlTo === \".lg-item\") {\n                this.addHtml(index);\n            }\n        }\n        // For first time add some delay for displaying the start animation.\n        var _speed = 0;\n        // Do not change the delay value because it is required for zoom plugin.\n        // If gallery opened from direct url (hash) speed value should be 0\n        if (delay && !$LG(document.body).hasClass(\"lg-from-hash\")) {\n            _speed = delay;\n        }\n        // Only for first slide and zoomFromOrigin is enabled\n        if (this.isFirstSlideWithZoomAnimation()) {\n            setTimeout(function() {\n                $currentSlide.removeClass(\"lg-start-end-progress lg-start-progress\").removeAttr(\"style\");\n            }, this.settings.startAnimationDuration + 100);\n            if (!$currentSlide.hasClass(\"lg-loaded\")) {\n                setTimeout(function() {\n                    if (_this.getSlideType(currentGalleryItem) === \"image\") {\n                        var alt = currentGalleryItem.alt;\n                        var altAttr = alt ? 'alt=\"' + alt + '\"' : \"\";\n                        $currentSlide.find(\".lg-img-wrap\").append(utils.getImgMarkup(index, src, altAttr, srcset, sizes, currentGalleryItem.sources));\n                        if (srcset || sources) {\n                            var $img = $currentSlide.find(\".lg-object\");\n                            _this.initPictureFill($img);\n                        }\n                    }\n                    if (_this.getSlideType(currentGalleryItem) === \"image\" || _this.getSlideType(currentGalleryItem) === \"video\" && poster) {\n                        _this.onLgObjectLoad($currentSlide, index, delay, _speed, true, false);\n                        // load remaining slides once the slide is completely loaded\n                        _this.onSlideObjectLoad($currentSlide, !!(videoInfo && videoInfo.html5 && !poster), function() {\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\n                        }, function() {\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\n                        });\n                    }\n                }, this.settings.startAnimationDuration + 100);\n            }\n        }\n        // SLide content has been added to dom\n        $currentSlide.addClass(\"lg-loaded\");\n        if (!this.isFirstSlideWithZoomAnimation() || this.getSlideType(currentGalleryItem) === \"video\" && !poster) {\n            this.onLgObjectLoad($currentSlide, index, delay, _speed, isFirstSlide, !!(videoInfo && videoInfo.html5 && !poster));\n        }\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\n        if ((!this.zoomFromOrigin || !this.currentImageSize) && $currentSlide.hasClass(\"lg-complete_\") && !this.lGalleryOn) {\n            setTimeout(function() {\n                $currentSlide.addClass(\"lg-complete\");\n            }, this.settings.backdropDuration);\n        }\n        // Content loaded\n        // Need to set lGalleryOn before calling preload function\n        this.lGalleryOn = true;\n        if (rec === true) {\n            if (!$currentSlide.hasClass(\"lg-complete_\")) {\n                $currentSlide.find(\".lg-object\").first().on(\"load.lg error.lg\", function() {\n                    _this.preload(index);\n                });\n            } else {\n                this.preload(index);\n            }\n        }\n    };\n    /**\r\n     * @desc Remove dummy image content and load next slides\r\n     * Called only for the first time if zoomFromOrigin animation is enabled\r\n     * @param index\r\n     * @param $currentSlide\r\n     * @param speed\r\n     */ LightGallery.prototype.loadContentOnFirstSlideLoad = function(index, $currentSlide, speed) {\n        var _this = this;\n        setTimeout(function() {\n            $currentSlide.find(\".lg-dummy-img\").remove();\n            $currentSlide.removeClass(\"lg-first-slide\");\n            _this.outer.removeClass(\"lg-first-slide-loading\");\n            _this.isDummyImageRemoved = true;\n            _this.preload(index);\n        }, speed + 300);\n    };\n    LightGallery.prototype.getItemsToBeInsertedToDom = function(index, prevIndex, numberOfItems) {\n        var _this = this;\n        if (numberOfItems === void 0) {\n            numberOfItems = 0;\n        }\n        var itemsToBeInsertedToDom = [];\n        // Minimum 2 items should be there\n        var possibleNumberOfItems = Math.max(numberOfItems, 3);\n        possibleNumberOfItems = Math.min(possibleNumberOfItems, this.galleryItems.length);\n        var prevIndexItem = \"lg-item-\" + this.lgId + \"-\" + prevIndex;\n        if (this.galleryItems.length <= 3) {\n            this.galleryItems.forEach(function(_element, index) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + _this.lgId + \"-\" + index);\n            });\n            return itemsToBeInsertedToDom;\n        }\n        if (index < (this.galleryItems.length - 1) / 2) {\n            for(var idx = index; idx > index - possibleNumberOfItems / 2 && idx >= 0; idx--){\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\n            }\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for(var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++){\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index + idx + 1));\n            }\n        } else {\n            for(var idx = index; idx <= this.galleryItems.length - 1 && idx < index + possibleNumberOfItems / 2; idx++){\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\n            }\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for(var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++){\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index - idx - 1));\n            }\n        }\n        if (this.settings.loop) {\n            if (index === this.galleryItems.length - 1) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + 0);\n            } else if (index === 0) {\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (this.galleryItems.length - 1));\n            }\n        }\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\n            itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + prevIndex);\n        }\n        return itemsToBeInsertedToDom;\n    };\n    LightGallery.prototype.organizeSlideItems = function(index, prevIndex) {\n        var _this = this;\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, prevIndex, this.settings.numberOfSlideItemsInDom);\n        itemsToBeInsertedToDom.forEach(function(item) {\n            if (_this.currentItemsInDom.indexOf(item) === -1) {\n                _this.$inner.append('<div id=\"' + item + '\" class=\"lg-item\"></div>');\n            }\n        });\n        this.currentItemsInDom.forEach(function(item) {\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\n                $LG(\"#\" + item).remove();\n            }\n        });\n        return itemsToBeInsertedToDom;\n    };\n    /**\r\n     * Get previous index of the slide\r\n     */ LightGallery.prototype.getPreviousSlideIndex = function() {\n        var prevIndex = 0;\n        try {\n            var currentItemId = this.outer.find(\".lg-current\").first().attr(\"id\");\n            prevIndex = parseInt(currentItemId.split(\"-\")[3]) || 0;\n        } catch (error) {\n            prevIndex = 0;\n        }\n        return prevIndex;\n    };\n    LightGallery.prototype.setDownloadValue = function(index) {\n        if (this.settings.download) {\n            var currentGalleryItem = this.galleryItems[index];\n            var hideDownloadBtn = currentGalleryItem.downloadUrl === false || currentGalleryItem.downloadUrl === \"false\";\n            if (hideDownloadBtn) {\n                this.outer.addClass(\"lg-hide-download\");\n            } else {\n                var $download = this.getElementById(\"lg-download\");\n                this.outer.removeClass(\"lg-hide-download\");\n                $download.attr(\"href\", currentGalleryItem.downloadUrl || currentGalleryItem.src);\n                if (currentGalleryItem.download) {\n                    $download.attr(\"download\", currentGalleryItem.download);\n                }\n            }\n        }\n    };\n    LightGallery.prototype.makeSlideAnimation = function(direction, currentSlideItem, previousSlideItem) {\n        var _this = this;\n        if (this.lGalleryOn) {\n            previousSlideItem.addClass(\"lg-slide-progress\");\n        }\n        setTimeout(function() {\n            // remove all transitions\n            _this.outer.addClass(\"lg-no-trans\");\n            _this.outer.find(\".lg-item\").removeClass(\"lg-prev-slide lg-next-slide\");\n            if (direction === \"prev\") {\n                //prevslide\n                currentSlideItem.addClass(\"lg-prev-slide\");\n                previousSlideItem.addClass(\"lg-next-slide\");\n            } else {\n                // next slide\n                currentSlideItem.addClass(\"lg-next-slide\");\n                previousSlideItem.addClass(\"lg-prev-slide\");\n            }\n            // give 50 ms for browser to add/remove class\n            setTimeout(function() {\n                _this.outer.find(\".lg-item\").removeClass(\"lg-current\");\n                currentSlideItem.addClass(\"lg-current\");\n                // reset all transitions\n                _this.outer.removeClass(\"lg-no-trans\");\n            }, 50);\n        }, this.lGalleryOn ? this.settings.slideDelay : 0);\n    };\n    /**\r\n     * Goto a specific slide.\r\n     * @param {Number} index - index of the slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\r\n     * @param {Boolean} fromThumb - true if slide function called via thumbnail click\r\n     * @param {String} direction - Direction of the slide(next/prev)\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // to go to 3rd slide\r\n     *  plugin.slide(2);\r\n     *\r\n     */ LightGallery.prototype.slide = function(index, fromTouch, fromThumb, direction) {\n        var _this = this;\n        var prevIndex = this.getPreviousSlideIndex();\n        this.currentItemsInDom = this.organizeSlideItems(index, prevIndex);\n        // Prevent multiple call, Required for hsh plugin\n        if (this.lGalleryOn && prevIndex === index) {\n            return;\n        }\n        var numberOfGalleryItems = this.galleryItems.length;\n        if (!this.lgBusy) {\n            if (this.settings.counter) {\n                this.updateCurrentCounter(index);\n            }\n            var currentSlideItem = this.getSlideItem(index);\n            var previousSlideItem_1 = this.getSlideItem(prevIndex);\n            var currentGalleryItem = this.galleryItems[index];\n            var videoInfo = currentGalleryItem.__slideVideoInfo;\n            this.outer.attr(\"data-lg-slide-type\", this.getSlideType(currentGalleryItem));\n            this.setDownloadValue(index);\n            if (videoInfo) {\n                var _a = this.mediaContainerPosition, top_3 = _a.top, bottom = _a.bottom;\n                var videoSize = utils.getSize(this.items[index], this.outer, top_3 + bottom, videoInfo && this.settings.videoMaxSize);\n                this.resizeVideoSlide(index, videoSize);\n            }\n            this.LGel.trigger(lGEvents.beforeSlide, {\n                prevIndex: prevIndex,\n                index: index,\n                fromTouch: !!fromTouch,\n                fromThumb: !!fromThumb\n            });\n            this.lgBusy = true;\n            clearTimeout(this.hideBarTimeout);\n            this.arrowDisable(index);\n            if (!direction) {\n                if (index < prevIndex) {\n                    direction = \"prev\";\n                } else if (index > prevIndex) {\n                    direction = \"next\";\n                }\n            }\n            if (!fromTouch) {\n                this.makeSlideAnimation(direction, currentSlideItem, previousSlideItem_1);\n            } else {\n                this.outer.find(\".lg-item\").removeClass(\"lg-prev-slide lg-current lg-next-slide\");\n                var touchPrev = void 0;\n                var touchNext = void 0;\n                if (numberOfGalleryItems > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n                    if (index === 0 && prevIndex === numberOfGalleryItems - 1) {\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = numberOfGalleryItems - 1;\n                    } else if (index === numberOfGalleryItems - 1 && prevIndex === 0) {\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = numberOfGalleryItems - 1;\n                    }\n                } else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n                if (direction === \"prev\") {\n                    this.getSlideItem(touchNext).addClass(\"lg-next-slide\");\n                } else {\n                    this.getSlideItem(touchPrev).addClass(\"lg-prev-slide\");\n                }\n                currentSlideItem.addClass(\"lg-current\");\n            }\n            // Do not put load content in set timeout as it needs to load immediately when the gallery is opened\n            if (!this.lGalleryOn) {\n                this.loadContent(index, true);\n            } else {\n                setTimeout(function() {\n                    _this.loadContent(index, true);\n                    // Add title if this.settings.appendSubHtmlTo === lg-sub-html\n                    if (_this.settings.appendSubHtmlTo !== \".lg-item\") {\n                        _this.addHtml(index);\n                    }\n                }, this.settings.speed + 50 + (fromTouch ? 0 : this.settings.slideDelay));\n            }\n            setTimeout(function() {\n                _this.lgBusy = false;\n                previousSlideItem_1.removeClass(\"lg-slide-progress\");\n                _this.LGel.trigger(lGEvents.afterSlide, {\n                    prevIndex: prevIndex,\n                    index: index,\n                    fromTouch: fromTouch,\n                    fromThumb: fromThumb\n                });\n            }, (this.lGalleryOn ? this.settings.speed + 100 : 100) + (fromTouch ? 0 : this.settings.slideDelay));\n        }\n        this.index = index;\n    };\n    LightGallery.prototype.updateCurrentCounter = function(index) {\n        this.getElementById(\"lg-counter-current\").html(index + 1 + \"\");\n    };\n    LightGallery.prototype.updateCounterTotal = function() {\n        this.getElementById(\"lg-counter-all\").html(this.galleryItems.length + \"\");\n    };\n    LightGallery.prototype.getSlideType = function(item) {\n        if (item.__slideVideoInfo) {\n            return \"video\";\n        } else if (item.iframe) {\n            return \"iframe\";\n        } else {\n            return \"image\";\n        }\n    };\n    LightGallery.prototype.touchMove = function(startCoords, endCoords, e) {\n        var distanceX = endCoords.pageX - startCoords.pageX;\n        var distanceY = endCoords.pageY - startCoords.pageY;\n        var allowSwipe = false;\n        if (this.swipeDirection) {\n            allowSwipe = true;\n        } else {\n            if (Math.abs(distanceX) > 15) {\n                this.swipeDirection = \"horizontal\";\n                allowSwipe = true;\n            } else if (Math.abs(distanceY) > 15) {\n                this.swipeDirection = \"vertical\";\n                allowSwipe = true;\n            }\n        }\n        if (!allowSwipe) {\n            return;\n        }\n        var $currentSlide = this.getSlideItem(this.index);\n        if (this.swipeDirection === \"horizontal\") {\n            e === null || e === void 0 ? void 0 : e.preventDefault();\n            // reset opacity and transition duration\n            this.outer.addClass(\"lg-dragging\");\n            // move current slide\n            this.setTranslate($currentSlide, distanceX, 0);\n            // move next and prev slide with current slide\n            var width = $currentSlide.get().offsetWidth;\n            var slideWidthAmount = width * 15 / 100;\n            var gutter = slideWidthAmount - Math.abs(distanceX * 10 / 100);\n            this.setTranslate(this.outer.find(\".lg-prev-slide\").first(), -width + distanceX - gutter, 0);\n            this.setTranslate(this.outer.find(\".lg-next-slide\").first(), width + distanceX + gutter, 0);\n        } else if (this.swipeDirection === \"vertical\") {\n            if (this.settings.swipeToClose) {\n                e === null || e === void 0 ? void 0 : e.preventDefault();\n                this.$container.addClass(\"lg-dragging-vertical\");\n                var opacity = 1 - Math.abs(distanceY) / window.innerHeight;\n                this.$backdrop.css(\"opacity\", opacity);\n                var scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\n                this.setTranslate($currentSlide, 0, distanceY, scale, scale);\n                if (Math.abs(distanceY) > 100) {\n                    this.outer.addClass(\"lg-hide-items\").removeClass(\"lg-components-open\");\n                }\n            }\n        }\n    };\n    LightGallery.prototype.touchEnd = function(endCoords, startCoords, event) {\n        var _this = this;\n        var distance;\n        // keep slide animation for any mode while dragg/swipe\n        if (this.settings.mode !== \"lg-slide\") {\n            this.outer.addClass(\"lg-slide\");\n        }\n        // set transition duration\n        setTimeout(function() {\n            _this.$container.removeClass(\"lg-dragging-vertical\");\n            _this.outer.removeClass(\"lg-dragging lg-hide-items\").addClass(\"lg-components-open\");\n            var triggerClick = true;\n            if (_this.swipeDirection === \"horizontal\") {\n                distance = endCoords.pageX - startCoords.pageX;\n                var distanceAbs = Math.abs(endCoords.pageX - startCoords.pageX);\n                if (distance < 0 && distanceAbs > _this.settings.swipeThreshold) {\n                    _this.goToNextSlide(true);\n                    triggerClick = false;\n                } else if (distance > 0 && distanceAbs > _this.settings.swipeThreshold) {\n                    _this.goToPrevSlide(true);\n                    triggerClick = false;\n                }\n            } else if (_this.swipeDirection === \"vertical\") {\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\n                if (_this.settings.closable && _this.settings.swipeToClose && distance > 100) {\n                    _this.closeGallery();\n                    return;\n                } else {\n                    _this.$backdrop.css(\"opacity\", 1);\n                }\n            }\n            _this.outer.find(\".lg-item\").removeAttr(\"style\");\n            if (triggerClick && Math.abs(endCoords.pageX - startCoords.pageX) < 5) {\n                // Trigger click if distance is less than 5 pix\n                var target = $LG(event.target);\n                if (_this.isPosterElement(target)) {\n                    _this.LGel.trigger(lGEvents.posterClick);\n                }\n            }\n            _this.swipeDirection = undefined;\n        });\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(function() {\n            if (!_this.outer.hasClass(\"lg-dragging\") && _this.settings.mode !== \"lg-slide\") {\n                _this.outer.removeClass(\"lg-slide\");\n            }\n        }, this.settings.speed + 100);\n    };\n    LightGallery.prototype.enableSwipe = function() {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isMoved = false;\n        var isSwiping = false;\n        if (this.settings.enableSwipe) {\n            this.$inner.on(\"touchstart.lg\", function(e) {\n                _this.dragOrSwipeEnabled = true;\n                var $item = _this.getSlideItem(_this.index);\n                if (($LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target)) && !_this.outer.hasClass(\"lg-zoomed\") && !_this.lgBusy && e.touches.length === 1) {\n                    isSwiping = true;\n                    _this.touchAction = \"swipe\";\n                    _this.manageSwipeClass();\n                    startCoords = {\n                        pageX: e.touches[0].pageX,\n                        pageY: e.touches[0].pageY\n                    };\n                }\n            });\n            this.$inner.on(\"touchmove.lg\", function(e) {\n                if (isSwiping && _this.touchAction === \"swipe\" && e.touches.length === 1) {\n                    endCoords = {\n                        pageX: e.touches[0].pageX,\n                        pageY: e.touches[0].pageY\n                    };\n                    _this.touchMove(startCoords, endCoords, e);\n                    isMoved = true;\n                }\n            });\n            this.$inner.on(\"touchend.lg\", function(event) {\n                if (_this.touchAction === \"swipe\") {\n                    if (isMoved) {\n                        isMoved = false;\n                        _this.touchEnd(endCoords, startCoords, event);\n                    } else if (isSwiping) {\n                        var target = $LG(event.target);\n                        if (_this.isPosterElement(target)) {\n                            _this.LGel.trigger(lGEvents.posterClick);\n                        }\n                    }\n                    _this.touchAction = undefined;\n                    isSwiping = false;\n                }\n            });\n        }\n    };\n    LightGallery.prototype.enableDrag = function() {\n        var _this = this;\n        var startCoords = {};\n        var endCoords = {};\n        var isDraging = false;\n        var isMoved = false;\n        if (this.settings.enableDrag) {\n            this.outer.on(\"mousedown.lg\", function(e) {\n                _this.dragOrSwipeEnabled = true;\n                var $item = _this.getSlideItem(_this.index);\n                if ($LG(e.target).hasClass(\"lg-item\") || $item.get().contains(e.target)) {\n                    if (!_this.outer.hasClass(\"lg-zoomed\") && !_this.lgBusy) {\n                        e.preventDefault();\n                        if (!_this.lgBusy) {\n                            _this.manageSwipeClass();\n                            startCoords = {\n                                pageX: e.pageX,\n                                pageY: e.pageY\n                            };\n                            isDraging = true;\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                            _this.outer.get().scrollLeft += 1;\n                            _this.outer.get().scrollLeft -= 1;\n                            // *\n                            _this.outer.removeClass(\"lg-grab\").addClass(\"lg-grabbing\");\n                            _this.LGel.trigger(lGEvents.dragStart);\n                        }\n                    }\n                }\n            });\n            $LG(window).on(\"mousemove.lg.global\" + this.lgId, function(e) {\n                if (isDraging && _this.lgOpened) {\n                    isMoved = true;\n                    endCoords = {\n                        pageX: e.pageX,\n                        pageY: e.pageY\n                    };\n                    _this.touchMove(startCoords, endCoords);\n                    _this.LGel.trigger(lGEvents.dragMove);\n                }\n            });\n            $LG(window).on(\"mouseup.lg.global\" + this.lgId, function(event) {\n                if (!_this.lgOpened) {\n                    return;\n                }\n                var target = $LG(event.target);\n                if (isMoved) {\n                    isMoved = false;\n                    _this.touchEnd(endCoords, startCoords, event);\n                    _this.LGel.trigger(lGEvents.dragEnd);\n                } else if (_this.isPosterElement(target)) {\n                    _this.LGel.trigger(lGEvents.posterClick);\n                }\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    _this.outer.removeClass(\"lg-grabbing\").addClass(\"lg-grab\");\n                }\n            });\n        }\n    };\n    LightGallery.prototype.triggerPosterClick = function() {\n        var _this = this;\n        this.$inner.on(\"click.lg\", function(event) {\n            if (!_this.dragOrSwipeEnabled && _this.isPosterElement($LG(event.target))) {\n                _this.LGel.trigger(lGEvents.posterClick);\n            }\n        });\n    };\n    LightGallery.prototype.manageSwipeClass = function() {\n        var _touchNext = this.index + 1;\n        var _touchPrev = this.index - 1;\n        if (this.settings.loop && this.galleryItems.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.galleryItems.length - 1;\n            } else if (this.index === this.galleryItems.length - 1) {\n                _touchNext = 0;\n            }\n        }\n        this.outer.find(\".lg-item\").removeClass(\"lg-next-slide lg-prev-slide\");\n        if (_touchPrev > -1) {\n            this.getSlideItem(_touchPrev).addClass(\"lg-prev-slide\");\n        }\n        this.getSlideItem(_touchNext).addClass(\"lg-next-slide\");\n    };\n    /**\r\n     * Go to next slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.goToNextSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     */ LightGallery.prototype.goToNextSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = this.settings.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n        if (!this.lgBusy) {\n            if (this.index + 1 < this.galleryItems.length) {\n                this.index++;\n                this.LGel.trigger(lGEvents.beforeNextSlide, {\n                    index: this.index\n                });\n                this.slide(this.index, !!fromTouch, false, \"next\");\n            } else {\n                if (_loop) {\n                    this.index = 0;\n                    this.LGel.trigger(lGEvents.beforeNextSlide, {\n                        index: this.index\n                    });\n                    this.slide(this.index, !!fromTouch, false, \"next\");\n                } else if (this.settings.slideEndAnimation && !fromTouch) {\n                    this.outer.addClass(\"lg-right-end\");\n                    setTimeout(function() {\n                        _this.outer.removeClass(\"lg-right-end\");\n                    }, 400);\n                }\n            }\n        }\n    };\n    /**\r\n     * Go to previous slides\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery({});\r\n     *  plugin.goToPrevSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     *\r\n     */ LightGallery.prototype.goToPrevSlide = function(fromTouch) {\n        var _this = this;\n        var _loop = this.settings.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n        if (!this.lgBusy) {\n            if (this.index > 0) {\n                this.index--;\n                this.LGel.trigger(lGEvents.beforePrevSlide, {\n                    index: this.index,\n                    fromTouch: fromTouch\n                });\n                this.slide(this.index, !!fromTouch, false, \"prev\");\n            } else {\n                if (_loop) {\n                    this.index = this.galleryItems.length - 1;\n                    this.LGel.trigger(lGEvents.beforePrevSlide, {\n                        index: this.index,\n                        fromTouch: fromTouch\n                    });\n                    this.slide(this.index, !!fromTouch, false, \"prev\");\n                } else if (this.settings.slideEndAnimation && !fromTouch) {\n                    this.outer.addClass(\"lg-left-end\");\n                    setTimeout(function() {\n                        _this.outer.removeClass(\"lg-left-end\");\n                    }, 400);\n                }\n            }\n        }\n    };\n    LightGallery.prototype.keyPress = function() {\n        var _this = this;\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function(e) {\n            if (_this.lgOpened && _this.settings.escKey === true && e.keyCode === 27) {\n                e.preventDefault();\n                if (_this.settings.allowMediaOverlap && _this.outer.hasClass(\"lg-can-toggle\") && _this.outer.hasClass(\"lg-components-open\")) {\n                    _this.outer.removeClass(\"lg-components-open\");\n                } else {\n                    _this.closeGallery();\n                }\n            }\n            if (_this.lgOpened && _this.galleryItems.length > 1) {\n                if (e.keyCode === 37) {\n                    e.preventDefault();\n                    _this.goToPrevSlide();\n                }\n                if (e.keyCode === 39) {\n                    e.preventDefault();\n                    _this.goToNextSlide();\n                }\n            }\n        });\n    };\n    LightGallery.prototype.arrow = function() {\n        var _this = this;\n        this.getElementById(\"lg-prev\").on(\"click.lg\", function() {\n            _this.goToPrevSlide();\n        });\n        this.getElementById(\"lg-next\").on(\"click.lg\", function() {\n            _this.goToNextSlide();\n        });\n    };\n    LightGallery.prototype.arrowDisable = function(index) {\n        // Disable arrows if settings.hideControlOnEnd is true\n        if (!this.settings.loop && this.settings.hideControlOnEnd) {\n            var $prev = this.getElementById(\"lg-prev\");\n            var $next = this.getElementById(\"lg-next\");\n            if (index + 1 === this.galleryItems.length) {\n                $next.attr(\"disabled\", \"disabled\").addClass(\"disabled\");\n            } else {\n                $next.removeAttr(\"disabled\").removeClass(\"disabled\");\n            }\n            if (index === 0) {\n                $prev.attr(\"disabled\", \"disabled\").addClass(\"disabled\");\n            } else {\n                $prev.removeAttr(\"disabled\").removeClass(\"disabled\");\n            }\n        }\n    };\n    LightGallery.prototype.setTranslate = function($el, xValue, yValue, scaleX, scaleY) {\n        if (scaleX === void 0) {\n            scaleX = 1;\n        }\n        if (scaleY === void 0) {\n            scaleY = 1;\n        }\n        $el.css(\"transform\", \"translate3d(\" + xValue + \"px, \" + yValue + \"px, 0px) scale3d(\" + scaleX + \", \" + scaleY + \", 1)\");\n    };\n    LightGallery.prototype.mousewheel = function() {\n        var _this = this;\n        var lastCall = 0;\n        this.outer.on(\"wheel.lg\", function(e) {\n            if (!e.deltaY || _this.galleryItems.length < 2) {\n                return;\n            }\n            e.preventDefault();\n            var now = new Date().getTime();\n            if (now - lastCall < 1000) {\n                return;\n            }\n            lastCall = now;\n            if (e.deltaY > 0) {\n                _this.goToNextSlide();\n            } else if (e.deltaY < 0) {\n                _this.goToPrevSlide();\n            }\n        });\n    };\n    LightGallery.prototype.isSlideElement = function(target) {\n        return target.hasClass(\"lg-outer\") || target.hasClass(\"lg-item\") || target.hasClass(\"lg-img-wrap\");\n    };\n    LightGallery.prototype.isPosterElement = function(target) {\n        var playButton = this.getSlideItem(this.index).find(\".lg-video-play-button\").get();\n        return target.hasClass(\"lg-video-poster\") || target.hasClass(\"lg-video-play-button\") || playButton && playButton.contains(target.get());\n    };\n    /**\r\n     * Maximize minimize inline gallery.\r\n     * @category lGPublicMethods\r\n     */ LightGallery.prototype.toggleMaximize = function() {\n        var _this = this;\n        this.getElementById(\"lg-maximize\").on(\"click.lg\", function() {\n            _this.$container.toggleClass(\"lg-inline\");\n            _this.refreshOnResize();\n        });\n    };\n    LightGallery.prototype.invalidateItems = function() {\n        for(var index = 0; index < this.items.length; index++){\n            var element = this.items[index];\n            var $element = $LG(element);\n            $element.off(\"click.lgcustom-item-\" + $element.attr(\"data-lg-id\"));\n        }\n    };\n    LightGallery.prototype.trapFocus = function() {\n        var _this = this;\n        this.$container.get().focus({\n            preventScroll: true\n        });\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function(e) {\n            if (!_this.lgOpened) {\n                return;\n            }\n            var isTabPressed = e.key === \"Tab\" || e.keyCode === 9;\n            if (!isTabPressed) {\n                return;\n            }\n            var focusableEls = utils.getFocusableElements(_this.$container.get());\n            var firstFocusableEl = focusableEls[0];\n            var lastFocusableEl = focusableEls[focusableEls.length - 1];\n            if (e.shiftKey) {\n                if (document.activeElement === firstFocusableEl) {\n                    lastFocusableEl.focus();\n                    e.preventDefault();\n                }\n            } else {\n                if (document.activeElement === lastFocusableEl) {\n                    firstFocusableEl.focus();\n                    e.preventDefault();\n                }\n            }\n        });\n    };\n    LightGallery.prototype.manageCloseGallery = function() {\n        var _this = this;\n        if (!this.settings.closable) return;\n        var mousedown = false;\n        this.getElementById(\"lg-close\").on(\"click.lg\", function() {\n            _this.closeGallery();\n        });\n        if (this.settings.closeOnTap) {\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            this.outer.on(\"mousedown.lg\", function(e) {\n                var target = $LG(e.target);\n                if (_this.isSlideElement(target)) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n            });\n            this.outer.on(\"mousemove.lg\", function() {\n                mousedown = false;\n            });\n            this.outer.on(\"mouseup.lg\", function(e) {\n                var target = $LG(e.target);\n                if (_this.isSlideElement(target) && mousedown) {\n                    if (!_this.outer.hasClass(\"lg-dragging\")) {\n                        _this.closeGallery();\n                    }\n                }\n            });\n        }\n    };\n    /**\r\n     * Close lightGallery if it is opened.\r\n     *\r\n     * @description If closable is false in the settings, you need to pass true via closeGallery method to force close gallery\r\n     * @return returns the estimated time to close gallery completely including the close animation duration\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.closeGallery();\r\n     *\r\n     */ LightGallery.prototype.closeGallery = function(force) {\n        var _this = this;\n        if (!this.lgOpened || !this.settings.closable && !force) {\n            return 0;\n        }\n        this.LGel.trigger(lGEvents.beforeClose);\n        if (this.settings.resetScrollPosition && !this.settings.hideScrollbar) {\n            $LG(window).scrollTop(this.prevScrollTop);\n        }\n        var currentItem = this.items[this.index];\n        var transform;\n        if (this.zoomFromOrigin && currentItem) {\n            var _a = this.mediaContainerPosition, top_4 = _a.top, bottom = _a.bottom;\n            var _b = this.galleryItems[this.index], __slideVideoInfo = _b.__slideVideoInfo, poster = _b.poster;\n            var imageSize = utils.getSize(currentItem, this.outer, top_4 + bottom, __slideVideoInfo && poster && this.settings.videoMaxSize);\n            transform = utils.getTransform(currentItem, this.outer, top_4, bottom, imageSize);\n        }\n        if (this.zoomFromOrigin && transform) {\n            this.outer.addClass(\"lg-closing lg-zoom-from-image\");\n            this.getSlideItem(this.index).addClass(\"lg-start-end-progress\").css(\"transition-duration\", this.settings.startAnimationDuration + \"ms\").css(\"transform\", transform);\n        } else {\n            this.outer.addClass(\"lg-hide-items\");\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromOrigin is true\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\n            this.outer.removeClass(\"lg-zoom-from-image\");\n        }\n        // Unbind all events added by lightGallery\n        // @todo\n        //this.$el.off('.lg.tm');\n        this.destroyModules();\n        this.lGalleryOn = false;\n        this.isDummyImageRemoved = false;\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\n        clearTimeout(this.hideBarTimeout);\n        this.hideBarTimeout = false;\n        $LG(\"html\").removeClass(\"lg-on\");\n        this.outer.removeClass(\"lg-visible lg-components-open\");\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\n        this.$backdrop.removeClass(\"in\").css(\"opacity\", 0);\n        var removeTimeout = this.zoomFromOrigin && transform ? Math.max(this.settings.startAnimationDuration, this.settings.backdropDuration) : this.settings.backdropDuration;\n        this.$container.removeClass(\"lg-show-in\");\n        // Once the closign animation is completed and gallery is invisible\n        setTimeout(function() {\n            if (_this.zoomFromOrigin && transform) {\n                _this.outer.removeClass(\"lg-zoom-from-image\");\n            }\n            _this.$container.removeClass(\"lg-show\");\n            // Reset scrollbar\n            _this.resetScrollBar();\n            // Need to remove inline opacity as it is used in the stylesheet as well\n            _this.$backdrop.removeAttr(\"style\").css(\"transition-duration\", _this.settings.backdropDuration + \"ms\");\n            _this.outer.removeClass(\"lg-closing \" + _this.settings.startClass);\n            _this.getSlideItem(_this.index).removeClass(\"lg-start-end-progress\");\n            _this.$inner.empty();\n            if (_this.lgOpened) {\n                _this.LGel.trigger(lGEvents.afterClose, {\n                    instance: _this\n                });\n            }\n            if (_this.$container.get()) {\n                _this.$container.get().blur();\n            }\n            _this.lgOpened = false;\n        }, removeTimeout + 100);\n        return removeTimeout + 100;\n    };\n    LightGallery.prototype.initModules = function() {\n        this.plugins.forEach(function(module) {\n            try {\n                module.init();\n            } catch (err) {\n                console.warn(\"lightGallery:- make sure lightGallery module is properly initiated\");\n            }\n        });\n    };\n    LightGallery.prototype.destroyModules = function(destroy) {\n        this.plugins.forEach(function(module) {\n            try {\n                if (destroy) {\n                    module.destroy();\n                } else {\n                    module.closeGallery && module.closeGallery();\n                }\n            } catch (err) {\n                console.warn(\"lightGallery:- make sure lightGallery module is properly destroyed\");\n            }\n        });\n    };\n    /**\r\n     * Refresh lightGallery with new set of children.\r\n     *\r\n     * @description This is useful to update the gallery when the child elements are changed without calling destroy method.\r\n     *\r\n     * If you are using dynamic mode, you can pass the modified array of dynamicEl as the first parameter to refresh the dynamic gallery\r\n     * @see <a href=\"/demos/dynamic-mode/\">Demo</a>\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // Delete or add children, then call\r\n     *  plugin.refresh();\r\n     *\r\n     */ LightGallery.prototype.refresh = function(galleryItems) {\n        if (!this.settings.dynamic) {\n            this.invalidateItems();\n        }\n        if (galleryItems) {\n            this.galleryItems = galleryItems;\n        } else {\n            this.galleryItems = this.getItems();\n        }\n        this.updateControls();\n        this.openGalleryOnItemClick();\n        this.LGel.trigger(lGEvents.updateSlides);\n    };\n    LightGallery.prototype.updateControls = function() {\n        this.addSlideVideoInfo(this.galleryItems);\n        this.updateCounterTotal();\n        this.manageSingleSlideClassName();\n    };\n    LightGallery.prototype.destroyGallery = function() {\n        this.destroyModules(true);\n        if (!this.settings.dynamic) {\n            this.invalidateItems();\n        }\n        $LG(window).off(\".lg.global\" + this.lgId);\n        this.LGel.off(\".lg\");\n        this.$container.remove();\n    };\n    /**\r\n     * Destroy lightGallery.\r\n     * Destroy lightGallery and its plugin instances completely\r\n     *\r\n     * @description This method also calls CloseGallery function internally. Returns the time takes to completely close and destroy the instance.\r\n     * In case if you want to re-initialize lightGallery right after destroying it, initialize it only once the destroy process is completed.\r\n     * You can use refresh method most of the times.\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.destroy();\r\n     *\r\n     */ LightGallery.prototype.destroy = function() {\n        var closeTimeout = this.closeGallery(true);\n        if (closeTimeout) {\n            setTimeout(this.destroyGallery.bind(this), closeTimeout);\n        } else {\n            this.destroyGallery();\n        }\n        return closeTimeout;\n    };\n    return LightGallery;\n}();\nfunction lightGallery(el, options) {\n    return new LightGallery(el, options);\n}\nvar LgMethods = {\n    onAfterAppendSlide: \"lgAfterAppendSlide\",\n    onInit: \"lgInit\",\n    onHasVideo: \"lgHasVideo\",\n    onContainerResize: \"lgContainerResize\",\n    onUpdateSlides: \"lgUpdateSlides\",\n    onAfterAppendSubHtml: \"lgAfterAppendSubHtml\",\n    onBeforeOpen: \"lgBeforeOpen\",\n    onAfterOpen: \"lgAfterOpen\",\n    onSlideItemLoad: \"lgSlideItemLoad\",\n    onBeforeSlide: \"lgBeforeSlide\",\n    onAfterSlide: \"lgAfterSlide\",\n    onPosterClick: \"lgPosterClick\",\n    onDragStart: \"lgDragStart\",\n    onDragMove: \"lgDragMove\",\n    onDragEnd: \"lgDragEnd\",\n    onBeforeNextSlide: \"lgBeforeNextSlide\",\n    onBeforePrevSlide: \"lgBeforePrevSlide\",\n    onBeforeClose: \"lgBeforeClose\",\n    onAfterClose: \"lgAfterClose\",\n    onRotateLeft: \"lgRotateLeft\",\n    onRotateRight: \"lgRotateRight\",\n    onFlipHorizontal: \"lgFlipHorizontal\",\n    onFlipVertical: \"lgFlipVertical\"\n};\nvar LG = function(_a) {\n    var children = _a.children, elementClassNames = _a.elementClassNames, onAfterAppendSlide = _a.onAfterAppendSlide, onInit = _a.onInit, onHasVideo = _a.onHasVideo, onContainerResize = _a.onContainerResize, onAfterAppendSubHtml = _a.onAfterAppendSubHtml, onBeforeOpen = _a.onBeforeOpen, onAfterOpen = _a.onAfterOpen, onSlideItemLoad = _a.onSlideItemLoad, onBeforeSlide = _a.onBeforeSlide, onAfterSlide = _a.onAfterSlide, onPosterClick = _a.onPosterClick, onDragStart = _a.onDragStart, onDragMove = _a.onDragMove, onDragEnd = _a.onDragEnd, onBeforeNextSlide = _a.onBeforeNextSlide, onBeforePrevSlide = _a.onBeforePrevSlide, onBeforeClose = _a.onBeforeClose, onAfterClose = _a.onAfterClose, onRotateLeft = _a.onRotateLeft, onRotateRight = _a.onRotateRight, onFlipHorizontal = _a.onFlipHorizontal, onFlipVertical = _a.onFlipVertical, restProps = __rest(_a, [\n        \"children\",\n        \"elementClassNames\",\n        \"onAfterAppendSlide\",\n        \"onInit\",\n        \"onHasVideo\",\n        \"onContainerResize\",\n        \"onAfterAppendSubHtml\",\n        \"onBeforeOpen\",\n        \"onAfterOpen\",\n        \"onSlideItemLoad\",\n        \"onBeforeSlide\",\n        \"onAfterSlide\",\n        \"onPosterClick\",\n        \"onDragStart\",\n        \"onDragMove\",\n        \"onDragEnd\",\n        \"onBeforeNextSlide\",\n        \"onBeforePrevSlide\",\n        \"onBeforeClose\",\n        \"onAfterClose\",\n        \"onRotateLeft\",\n        \"onRotateRight\",\n        \"onFlipHorizontal\",\n        \"onFlipVertical\"\n    ]);\n    var $lg = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    var registerEvents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function() {\n        if (onAfterAppendSlide && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onAfterAppendSlide, function(event) {\n                onAfterAppendSlide(event.detail);\n            });\n        }\n        if (onInit && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onInit, function(event) {\n                onInit(event.detail);\n            });\n        }\n        if (onHasVideo && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onHasVideo, function(event) {\n                onHasVideo(event.detail);\n            });\n        }\n        if (onContainerResize && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onContainerResize, function(event) {\n                onContainerResize(event.detail);\n            });\n        }\n        if (onAfterAppendSubHtml && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onAfterAppendSubHtml, function(event) {\n                onAfterAppendSubHtml(event.detail);\n            });\n        }\n        if (onBeforeOpen && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onBeforeOpen, function(event) {\n                onBeforeOpen(event.detail);\n            });\n        }\n        if (onAfterOpen && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onAfterOpen, function(event) {\n                onAfterOpen(event.detail);\n            });\n        }\n        if (onSlideItemLoad && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onSlideItemLoad, function(event) {\n                onSlideItemLoad(event.detail);\n            });\n        }\n        if (onBeforeSlide && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onBeforeSlide, function(event) {\n                onBeforeSlide(event.detail);\n            });\n        }\n        if (onAfterSlide && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onAfterSlide, function(event) {\n                onAfterSlide(event.detail);\n            });\n        }\n        if (onPosterClick && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onPosterClick, function(event) {\n                onPosterClick(event.detail);\n            });\n        }\n        if (onDragStart && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onDragStart, function(event) {\n                onDragStart(event.detail);\n            });\n        }\n        if (onDragMove && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onDragMove, function(event) {\n                onDragMove(event.detail);\n            });\n        }\n        if (onDragEnd && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onDragEnd, function(event) {\n                onDragEnd(event.detail);\n            });\n        }\n        if (onBeforeNextSlide && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onBeforeNextSlide, function(event) {\n                onBeforeNextSlide(event.detail);\n            });\n        }\n        if (onBeforePrevSlide && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onBeforePrevSlide, function(event) {\n                onBeforePrevSlide(event.detail);\n            });\n        }\n        if (onBeforeClose && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onBeforeClose, function(event) {\n                onBeforeClose(event.detail);\n            });\n        }\n        if (onAfterClose && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onAfterClose, function(event) {\n                onAfterClose(event.detail);\n            });\n        }\n        if (onRotateLeft && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onRotateLeft, function(event) {\n                onRotateLeft(event.detail);\n            });\n        }\n        if (onRotateRight && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onRotateRight, function(event) {\n                onRotateRight(event.detail);\n            });\n        }\n        if (onFlipHorizontal && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onFlipHorizontal, function(event) {\n                onFlipHorizontal(event.detail);\n            });\n        }\n        if (onFlipVertical && $lg && $lg.current) {\n            $lg.current.addEventListener(LgMethods.onFlipVertical, function(event) {\n                onFlipVertical(event.detail);\n            });\n        }\n    }, [\n        onAfterAppendSlide,\n        onAfterAppendSubHtml,\n        onAfterClose,\n        onRotateLeft,\n        onRotateRight,\n        onFlipHorizontal,\n        onFlipVertical,\n        onAfterOpen,\n        onAfterSlide,\n        onBeforeClose,\n        onBeforeNextSlide,\n        onBeforeOpen,\n        onBeforePrevSlide,\n        onBeforeSlide,\n        onContainerResize,\n        onDragEnd,\n        onDragMove,\n        onDragStart,\n        onHasVideo,\n        onInit,\n        onPosterClick,\n        onSlideItemLoad\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function() {\n        registerEvents();\n        var lightGallery$1 = lightGallery($lg.current, restProps);\n        return function cleanup() {\n            lightGallery$1.destroy();\n        };\n    }, [\n        registerEvents,\n        restProps\n    ]);\n    return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(\"div\", {\n        className: \"lg-react-element \" + (elementClassNames ? elementClassNames : \"\"),\n        ref: $lg\n    }, children);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LG); //# sourceMappingURL=Lightgallery.es5.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3JlYWN0L0xpZ2h0Z2FsbGVyeS5lczUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNFO0FBRXRFOzs7Ozs7Ozs7Ozs7OzhFQWE4RSxHQUU5RSxTQUFTSSxPQUFPQyxDQUFDLEVBQUVDLENBQUM7SUFDaEIsSUFBSUMsSUFBSSxDQUFDO0lBQ1QsSUFBSyxJQUFJQyxLQUFLSCxFQUFHLElBQUlJLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNQLEdBQUdHLE1BQU1GLEVBQUVPLE9BQU8sQ0FBQ0wsS0FBSyxHQUM5RUQsQ0FBQyxDQUFDQyxFQUFFLEdBQUdILENBQUMsQ0FBQ0csRUFBRTtJQUNmLElBQUlILEtBQUssUUFBUSxPQUFPSSxPQUFPSyxxQkFBcUIsS0FBSyxZQUNyRCxJQUFLLElBQUlDLElBQUksR0FBR1AsSUFBSUMsT0FBT0sscUJBQXFCLENBQUNULElBQUlVLElBQUlQLEVBQUVRLE1BQU0sRUFBRUQsSUFBSztRQUNwRSxJQUFJVCxFQUFFTyxPQUFPLENBQUNMLENBQUMsQ0FBQ08sRUFBRSxJQUFJLEtBQUtOLE9BQU9DLFNBQVMsQ0FBQ08sb0JBQW9CLENBQUNMLElBQUksQ0FBQ1AsR0FBR0csQ0FBQyxDQUFDTyxFQUFFLEdBQ3pFUixDQUFDLENBQUNDLENBQUMsQ0FBQ08sRUFBRSxDQUFDLEdBQUdWLENBQUMsQ0FBQ0csQ0FBQyxDQUFDTyxFQUFFLENBQUM7SUFDekI7SUFDSixPQUFPUjtBQUNYO0FBRUE7Ozs7O0NBS0MsR0FFRDs7Ozs7Ozs7Ozs7Ozs4RUFhOEUsR0FFOUUsSUFBSVcsV0FBVztJQUNYQSxXQUFXVCxPQUFPVSxNQUFNLElBQUksU0FBU0QsU0FBU1gsQ0FBQztRQUMzQyxJQUFLLElBQUlGLEdBQUdVLElBQUksR0FBR0ssSUFBSUMsVUFBVUwsTUFBTSxFQUFFRCxJQUFJSyxHQUFHTCxJQUFLO1lBQ2pEVixJQUFJZ0IsU0FBUyxDQUFDTixFQUFFO1lBQ2hCLElB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QzFCO0lBQ0osR0FBRztRQUFDa0M7UUFBZ0JGO0tBQVU7SUFDOUIscUJBQVF2bkIsb0RBQWFBLENBQUMsT0FBTztRQUFFb00sV0FBVyxzQkFBdUJrYixDQUFBQSxvQkFBb0JBLG9CQUFvQixFQUFDO1FBQUlPLEtBQUtMO0lBQUksR0FBRzFMO0FBQzlIO0FBRUEsaUVBQWV1TCxFQUFFQSxFQUFDLENBQ2xCLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL21hcnRmdXJ5X3JlYWN0Ly4vbm9kZV9tb2R1bGVzL2xpZ2h0Z2FsbGVyeS9yZWFjdC9MaWdodGdhbGxlcnkuZXM1LmpzP2UzYjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCBjcmVhdGVFbGVtZW50IH0gZnJvbSAncmVhY3QnO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XG5cbi8qIVxuICogbGlnaHRnYWxsZXJ5IHwgMi43LjIgfCBTZXB0ZW1iZXIgMjB0aCAyMDIzXG4gKiBodHRwOi8vd3d3LmxpZ2h0Z2FsbGVyeWpzLmNvbS9cbiAqIENvcHlyaWdodCAoYykgMjAyMCBTYWNoaW4gTmVyYXZhdGg7XG4gKiBAbGljZW5zZSBHUEx2M1xuICovXG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG52YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxuXG4vKipcclxuICogTGlzdCBvZiBsaWdodEdhbGxlcnkgZXZlbnRzXHJcbiAqIEFsbCBldmVudHMgc2hvdWxkIGJlIGRvY3VtZW50ZWQgaGVyZVxyXG4gKiBCZWxvdyBpbnRlcmZhY2VzIGFyZSB1c2VkIHRvIGJ1aWxkIHRoZSB3ZWJzaXRlIGRvY3VtZW50YXRpb25zXHJcbiAqICovXHJcbnZhciBsR0V2ZW50cyA9IHtcclxuICAgIGFmdGVyQXBwZW5kU2xpZGU6ICdsZ0FmdGVyQXBwZW5kU2xpZGUnLFxyXG4gICAgaW5pdDogJ2xnSW5pdCcsXHJcbiAgICBoYXNWaWRlbzogJ2xnSGFzVmlkZW8nLFxyXG4gICAgY29udGFpbmVyUmVzaXplOiAnbGdDb250YWluZXJSZXNpemUnLFxyXG4gICAgdXBkYXRlU2xpZGVzOiAnbGdVcGRhdGVTbGlkZXMnLFxyXG4gICAgYWZ0ZXJBcHBlbmRTdWJIdG1sOiAnbGdBZnRlckFwcGVuZFN1Ykh0bWwnLFxyXG4gICAgYmVmb3JlT3BlbjogJ2xnQmVmb3JlT3BlbicsXHJcbiAgICBhZnRlck9wZW46ICdsZ0FmdGVyT3BlbicsXHJcbiAgICBzbGlkZUl0ZW1Mb2FkOiAnbGdTbGlkZUl0ZW1Mb2FkJyxcclxuICAgIGJlZm9yZVNsaWRlOiAnbGdCZWZvcmVTbGlkZScsXHJcbiAgICBhZnRlclNsaWRlOiAnbGdBZnRlclNsaWRlJyxcclxuICAgIHBvc3RlckNsaWNrOiAnbGdQb3N0ZXJDbGljaycsXHJcbiAgICBkcmFnU3RhcnQ6ICdsZ0RyYWdTdGFydCcsXHJcbiAgICBkcmFnTW92ZTogJ2xnRHJhZ01vdmUnLFxyXG4gICAgZHJhZ0VuZDogJ2xnRHJhZ0VuZCcsXHJcbiAgICBiZWZvcmVOZXh0U2xpZGU6ICdsZ0JlZm9yZU5leHRTbGlkZScsXHJcbiAgICBiZWZvcmVQcmV2U2xpZGU6ICdsZ0JlZm9yZVByZXZTbGlkZScsXHJcbiAgICBiZWZvcmVDbG9zZTogJ2xnQmVmb3JlQ2xvc2UnLFxyXG4gICAgYWZ0ZXJDbG9zZTogJ2xnQWZ0ZXJDbG9zZScsXHJcbiAgICByb3RhdGVMZWZ0OiAnbGdSb3RhdGVMZWZ0JyxcclxuICAgIHJvdGF0ZVJpZ2h0OiAnbGdSb3RhdGVSaWdodCcsXHJcbiAgICBmbGlwSG9yaXpvbnRhbDogJ2xnRmxpcEhvcml6b250YWwnLFxyXG4gICAgZmxpcFZlcnRpY2FsOiAnbGdGbGlwVmVydGljYWwnLFxyXG4gICAgYXV0b3BsYXk6ICdsZ0F1dG9wbGF5JyxcclxuICAgIGF1dG9wbGF5U3RhcnQ6ICdsZ0F1dG9wbGF5U3RhcnQnLFxyXG4gICAgYXV0b3BsYXlTdG9wOiAnbGdBdXRvcGxheVN0b3AnLFxyXG59O1xuXG52YXIgbGlnaHRHYWxsZXJ5Q29yZVNldHRpbmdzID0ge1xyXG4gICAgbW9kZTogJ2xnLXNsaWRlJyxcclxuICAgIGVhc2luZzogJ2Vhc2UnLFxyXG4gICAgc3BlZWQ6IDQwMCxcclxuICAgIGxpY2Vuc2VLZXk6ICcwMDAwLTAwMDAtMDAwLTAwMDAnLFxyXG4gICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgYWRkQ2xhc3M6ICcnLFxyXG4gICAgc3RhcnRDbGFzczogJ2xnLXN0YXJ0LXpvb20nLFxyXG4gICAgYmFja2Ryb3BEdXJhdGlvbjogMzAwLFxyXG4gICAgY29udGFpbmVyOiAnJyxcclxuICAgIHN0YXJ0QW5pbWF0aW9uRHVyYXRpb246IDQwMCxcclxuICAgIHpvb21Gcm9tT3JpZ2luOiB0cnVlLFxyXG4gICAgaGlkZUJhcnNEZWxheTogMCxcclxuICAgIHNob3dCYXJzQWZ0ZXI6IDEwMDAwLFxyXG4gICAgc2xpZGVEZWxheTogMCxcclxuICAgIHN1cHBvcnRMZWdhY3lCcm93c2VyOiB0cnVlLFxyXG4gICAgYWxsb3dNZWRpYU92ZXJsYXA6IGZhbHNlLFxyXG4gICAgdmlkZW9NYXhTaXplOiAnMTI4MC03MjAnLFxyXG4gICAgbG9hZFlvdVR1YmVQb3N0ZXI6IHRydWUsXHJcbiAgICBkZWZhdWx0Q2FwdGlvbkhlaWdodDogMCxcclxuICAgIGFyaWFMYWJlbGxlZGJ5OiAnJyxcclxuICAgIGFyaWFEZXNjcmliZWRieTogJycsXHJcbiAgICByZXNldFNjcm9sbFBvc2l0aW9uOiB0cnVlLFxyXG4gICAgaGlkZVNjcm9sbGJhcjogZmFsc2UsXHJcbiAgICBjbG9zYWJsZTogdHJ1ZSxcclxuICAgIHN3aXBlVG9DbG9zZTogdHJ1ZSxcclxuICAgIGNsb3NlT25UYXA6IHRydWUsXHJcbiAgICBzaG93Q2xvc2VJY29uOiB0cnVlLFxyXG4gICAgc2hvd01heGltaXplSWNvbjogZmFsc2UsXHJcbiAgICBsb29wOiB0cnVlLFxyXG4gICAgZXNjS2V5OiB0cnVlLFxyXG4gICAga2V5UHJlc3M6IHRydWUsXHJcbiAgICB0cmFwRm9jdXM6IHRydWUsXHJcbiAgICBjb250cm9sczogdHJ1ZSxcclxuICAgIHNsaWRlRW5kQW5pbWF0aW9uOiB0cnVlLFxyXG4gICAgaGlkZUNvbnRyb2xPbkVuZDogZmFsc2UsXHJcbiAgICBtb3VzZXdoZWVsOiBmYWxzZSxcclxuICAgIGdldENhcHRpb25Gcm9tVGl0bGVPckFsdDogdHJ1ZSxcclxuICAgIGFwcGVuZFN1Ykh0bWxUbzogJy5sZy1zdWItaHRtbCcsXHJcbiAgICBzdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZTogZmFsc2UsXHJcbiAgICBwcmVsb2FkOiAyLFxyXG4gICAgbnVtYmVyT2ZTbGlkZUl0ZW1zSW5Eb206IDEwLFxyXG4gICAgc2VsZWN0b3I6ICcnLFxyXG4gICAgc2VsZWN0V2l0aGluOiAnJyxcclxuICAgIG5leHRIdG1sOiAnJyxcclxuICAgIHByZXZIdG1sOiAnJyxcclxuICAgIGluZGV4OiAwLFxyXG4gICAgaWZyYW1lV2lkdGg6ICcxMDAlJyxcclxuICAgIGlmcmFtZUhlaWdodDogJzEwMCUnLFxyXG4gICAgaWZyYW1lTWF4V2lkdGg6ICcxMDAlJyxcclxuICAgIGlmcmFtZU1heEhlaWdodDogJzEwMCUnLFxyXG4gICAgZG93bmxvYWQ6IHRydWUsXHJcbiAgICBjb3VudGVyOiB0cnVlLFxyXG4gICAgYXBwZW5kQ291bnRlclRvOiAnLmxnLXRvb2xiYXInLFxyXG4gICAgc3dpcGVUaHJlc2hvbGQ6IDUwLFxyXG4gICAgZW5hYmxlU3dpcGU6IHRydWUsXHJcbiAgICBlbmFibGVEcmFnOiB0cnVlLFxyXG4gICAgZHluYW1pYzogZmFsc2UsXHJcbiAgICBkeW5hbWljRWw6IFtdLFxyXG4gICAgZXh0cmFQcm9wczogW10sXHJcbiAgICBleFRodW1iSW1hZ2U6ICcnLFxyXG4gICAgaXNNb2JpbGU6IHVuZGVmaW5lZCxcclxuICAgIG1vYmlsZVNldHRpbmdzOiB7XHJcbiAgICAgICAgY29udHJvbHM6IGZhbHNlLFxyXG4gICAgICAgIHNob3dDbG9zZUljb246IGZhbHNlLFxyXG4gICAgICAgIGRvd25sb2FkOiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICBwbHVnaW5zOiBbXSxcclxuICAgIHN0cmluZ3M6IHtcclxuICAgICAgICBjbG9zZUdhbGxlcnk6ICdDbG9zZSBnYWxsZXJ5JyxcclxuICAgICAgICB0b2dnbGVNYXhpbWl6ZTogJ1RvZ2dsZSBtYXhpbWl6ZScsXHJcbiAgICAgICAgcHJldmlvdXNTbGlkZTogJ1ByZXZpb3VzIHNsaWRlJyxcclxuICAgICAgICBuZXh0U2xpZGU6ICdOZXh0IHNsaWRlJyxcclxuICAgICAgICBkb3dubG9hZDogJ0Rvd25sb2FkJyxcclxuICAgICAgICBwbGF5VmlkZW86ICdQbGF5IHZpZGVvJyxcclxuICAgICAgICBtZWRpYUxvYWRpbmdGYWlsZWQ6ICdPb3BzLi4uIEZhaWxlZCB0byBsb2FkIGNvbnRlbnQuLi4nLFxyXG4gICAgfSxcclxufTtcblxuZnVuY3Rpb24gaW5pdExnUG9seWZpbGxzKCkge1xyXG4gICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcclxuICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zIHx8IHtcclxuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkZXRhaWw6IG51bGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcclxuICAgICAgICAgICAgZXZ0LmluaXRDdXN0b21FdmVudChldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcclxuICAgICAgICAgICAgcmV0dXJuIGV2dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LkN1c3RvbUV2ZW50ID0gQ3VzdG9tRXZlbnQ7XHJcbiAgICB9KSgpO1xyXG4gICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9XHJcbiAgICAgICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgICAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG59XHJcbnZhciBsZ1F1ZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gbGdRdWVyeShzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuY3NzVmVuZGVyUHJlZml4ZXMgPSBbXHJcbiAgICAgICAgICAgICdUcmFuc2l0aW9uRHVyYXRpb24nLFxyXG4gICAgICAgICAgICAnVHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uJyxcclxuICAgICAgICAgICAgJ1RyYW5zZm9ybScsXHJcbiAgICAgICAgICAgICdUcmFuc2l0aW9uJyxcclxuICAgICAgICBdO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSB0aGlzLl9nZXRTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5maXJzdEVsZW1lbnQgPSB0aGlzLl9nZXRGaXJzdEVsKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBsZ1F1ZXJ5LmdlbmVyYXRlVVVJRCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICB2YXIgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLl9nZXRTZWxlY3RvciA9IGZ1bmN0aW9uIChzZWxlY3RvciwgY29udGV4dCkge1xyXG4gICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHsgY29udGV4dCA9IGRvY3VtZW50OyB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcclxuICAgICAgICB2YXIgZmwgPSBzZWxlY3Rvci5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgaWYgKGZsID09PSAnIycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuX2VhY2ggPSBmdW5jdGlvbiAoZnVuYykge1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0b3IubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHRoaXMuc2VsZWN0b3IsIGZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZnVuYyh0aGlzLnNlbGVjdG9yLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuX3NldENzc1ZlbmRvclByZWZpeCA9IGZ1bmN0aW9uIChlbCwgY3NzUHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgLy8gcHJldHRpZXItaWdub3JlXHJcbiAgICAgICAgdmFyIHByb3BlcnR5ID0gY3NzUHJvcGVydHkucmVwbGFjZSgvLShbYS16XSkvZ2ksIGZ1bmN0aW9uIChzLCBncm91cDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwMS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmNzc1ZlbmRlclByZWZpeGVzLmluZGV4T2YocHJvcGVydHkpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBlbC5zdHlsZVtwcm9wZXJ0eS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBlbC5zdHlsZVsnd2Via2l0JyArIHByb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBlbC5zdHlsZVsnbW96JyArIHByb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBlbC5zdHlsZVsnbXMnICsgcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlWydvJyArIHByb3BlcnR5XSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZWwuc3R5bGVbcHJvcGVydHldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLl9nZXRGaXJzdEVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdG9yICYmIHRoaXMuc2VsZWN0b3IubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0b3JbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RvcjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuaXNFdmVudE1hdGNoZWQgPSBmdW5jdGlvbiAoZXZlbnQsIGV2ZW50TmFtZSkge1xyXG4gICAgICAgIHZhciBldmVudE5hbWVzcGFjZSA9IGV2ZW50TmFtZS5zcGxpdCgnLicpO1xyXG4gICAgICAgIHJldHVybiBldmVudFxyXG4gICAgICAgICAgICAuc3BsaXQoJy4nKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChlKSB7IHJldHVybiBlOyB9KVxyXG4gICAgICAgICAgICAuZXZlcnkoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50TmFtZXNwYWNlLmluZGV4T2YoZSkgIT09IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbiAoYXR0ciwgdmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZmlyc3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RFbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuICRMRyh0aGlzLl9nZXRTZWxlY3RvcihzZWxlY3RvciwgdGhpcy5zZWxlY3RvcikpO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdG9yICYmIHRoaXMuc2VsZWN0b3IubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRMRyh0aGlzLnNlbGVjdG9yWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkTEcodGhpcy5zZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuICRMRyh0aGlzLnNlbGVjdG9yW2luZGV4XSk7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUucGFyZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAkTEcodGhpcy5zZWxlY3Rvci5wYXJlbnRFbGVtZW50KTtcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEZpcnN0RWwoKTtcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5yZW1vdmVBdHRyID0gZnVuY3Rpb24gKGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB2YXIgYXR0cnMgPSBhdHRyaWJ1dGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgdGhpcy5fZWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgYXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikgeyByZXR1cm4gZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5maXJzdEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICAgICAgdGhpcy5maXJzdEVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgdGhpcy5maXJzdEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuZmlyc3RFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5maXJzdEVsZW1lbnQpO1xyXG4gICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5maXJzdEVsZW1lbnQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZXMpIHtcclxuICAgICAgICBpZiAoY2xhc3NOYW1lcyA9PT0gdm9pZCAwKSB7IGNsYXNzTmFtZXMgPSAnJzsgfVxyXG4gICAgICAgIHRoaXMuX2VhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIC8vIElFIGRvZXNuJ3Qgc3VwcG9ydCBtdWx0aXBsZSBhcmd1bWVudHNcclxuICAgICAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lcykge1xyXG4gICAgICAgIHRoaXMuX2VhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIC8vIElFIGRvZXNuJ3Qgc3VwcG9ydCBtdWx0aXBsZSBhcmd1bWVudHNcclxuICAgICAgICAgICAgY2xhc3NOYW1lcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuaGFzQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0RWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5oYXNBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0RWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0RWxlbWVudC5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKTtcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZmlyc3RFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oYXNDbGFzcyhjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuY3NzID0gZnVuY3Rpb24gKHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgX3RoaXMuX3NldENzc1ZlbmRvclByZWZpeChlbCwgcHJvcGVydHksIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICAvLyBOZWVkIHRvIHBhc3Mgc2VwYXJhdGUgbmFtZXNwYWNlcyBmb3Igc2VwYXJhdGUgZWxlbWVudHNcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50cywgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnRzLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGxnUXVlcnkuZXZlbnRMaXN0ZW5lcnNbZXZlbnRdKSkge1xyXG4gICAgICAgICAgICAgICAgbGdRdWVyeS5ldmVudExpc3RlbmVyc1tldmVudF0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZ1F1ZXJ5LmV2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgX3RoaXMuc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihldmVudC5zcGxpdCgnLicpWzBdLCBsaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLy8gQHRvZG8gLSB0ZXN0IHRoaXNcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9uKGV2ZW50LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9mZihldmVudCk7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmtleXMobGdRdWVyeS5ldmVudExpc3RlbmVycykuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0V2ZW50TWF0Y2hlZChldmVudCwgZXZlbnROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbGdRdWVyeS5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUuc3BsaXQoJy4nKVswXSwgbGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZ1F1ZXJ5LmV2ZW50TGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGRldGFpbCkge1xyXG4gICAgICAgIGlmICghdGhpcy5maXJzdEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudC5zcGxpdCgnLicpWzBdLCB7XHJcbiAgICAgICAgICAgIGRldGFpbDogZGV0YWlsIHx8IG51bGwsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5maXJzdEVsZW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLy8gRG9lcyBub3Qgc3VwcG9ydCBJRVxyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGZldGNoKHVybClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLnRleHQoKTsgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2VsZWN0b3IuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5odG1sID0gZnVuY3Rpb24gKGh0bWwpIHtcclxuICAgICAgICBpZiAoaHRtbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maXJzdEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnQuaW5uZXJIVE1MO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9lYWNoKGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgdGhpcy5fZWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBodG1sID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkKGh0bWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uIChodG1sKSB7XHJcbiAgICAgICAgdGhpcy5fZWFjaChmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgaHRtbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2VhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLmVtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2VhY2goZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkucHJvdG90eXBlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uIChzY3JvbGxUb3ApIHtcclxuICAgICAgICBpZiAoc2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICh3aW5kb3cucGFnZVlPZmZzZXQgfHxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8XHJcbiAgICAgICAgICAgICAgICAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuc2Nyb2xsTGVmdCA9IGZ1bmN0aW9uIChzY3JvbGxMZWZ0KSB7XHJcbiAgICAgICAgaWYgKHNjcm9sbExlZnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICh3aW5kb3cucGFnZVhPZmZzZXQgfHxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHxcclxuICAgICAgICAgICAgICAgIDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0RWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLmZpcnN0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICB2YXIgYm9keU1hcmdpbkxlZnQgPSAkTEcoJ2JvZHknKS5zdHlsZSgpLm1hcmdpbkxlZnQ7XHJcbiAgICAgICAgLy8gTWludXMgYm9keSBtYXJnaW4gLSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDcxMTU0OC9pcy1nZXRib3VuZGluZ2NsaWVudHJlY3QtbGVmdC1yZXR1cm5pbmctYS13cm9uZy12YWx1ZVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCAtIHBhcnNlRmxvYXQoYm9keU1hcmdpbkxlZnQpICsgdGhpcy5zY3JvbGxMZWZ0KCksXHJcbiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgKyB0aGlzLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgbGdRdWVyeS5wcm90b3R5cGUuc3R5bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0RWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAodGhpcy5maXJzdEVsZW1lbnQuY3VycmVudFN0eWxlIHx8XHJcbiAgICAgICAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZmlyc3RFbGVtZW50KSk7XHJcbiAgICB9O1xyXG4gICAgLy8gV2lkdGggd2l0aG91dCBwYWRkaW5nIGFuZCBib3JkZXIgZXZlbiBpZiBib3gtc2l6aW5nIGlzIHVzZWQuXHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlKCk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpcnN0RWxlbWVudC5jbGllbnRXaWR0aCAtXHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0xlZnQpIC1cclxuICAgICAgICAgICAgcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nUmlnaHQpKTtcclxuICAgIH07XHJcbiAgICAvLyBIZWlnaHQgd2l0aG91dCBwYWRkaW5nIGFuZCBib3JkZXIgZXZlbiBpZiBib3gtc2l6aW5nIGlzIHVzZWQuXHJcbiAgICBsZ1F1ZXJ5LnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5zdHlsZSgpO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5maXJzdEVsZW1lbnQuY2xpZW50SGVpZ2h0IC1cclxuICAgICAgICAgICAgcGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSAtXHJcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSkpO1xyXG4gICAgfTtcclxuICAgIGxnUXVlcnkuZXZlbnRMaXN0ZW5lcnMgPSB7fTtcclxuICAgIHJldHVybiBsZ1F1ZXJ5O1xyXG59KCkpO1xyXG5mdW5jdGlvbiAkTEcoc2VsZWN0b3IpIHtcclxuICAgIGluaXRMZ1BvbHlmaWxscygpO1xyXG4gICAgcmV0dXJuIG5ldyBsZ1F1ZXJ5KHNlbGVjdG9yKTtcclxufVxuXG52YXIgZGVmYXVsdER5bmFtaWNPcHRpb25zID0gW1xyXG4gICAgJ3NyYycsXHJcbiAgICAnc291cmNlcycsXHJcbiAgICAnc3ViSHRtbCcsXHJcbiAgICAnc3ViSHRtbFVybCcsXHJcbiAgICAnaHRtbCcsXHJcbiAgICAndmlkZW8nLFxyXG4gICAgJ3Bvc3RlcicsXHJcbiAgICAnc2xpZGVOYW1lJyxcclxuICAgICdyZXNwb25zaXZlJyxcclxuICAgICdzcmNzZXQnLFxyXG4gICAgJ3NpemVzJyxcclxuICAgICdpZnJhbWUnLFxyXG4gICAgJ2Rvd25sb2FkVXJsJyxcclxuICAgICdkb3dubG9hZCcsXHJcbiAgICAnd2lkdGgnLFxyXG4gICAgJ2ZhY2Vib29rU2hhcmVVcmwnLFxyXG4gICAgJ3R3ZWV0VGV4dCcsXHJcbiAgICAnaWZyYW1lVGl0bGUnLFxyXG4gICAgJ3R3aXR0ZXJTaGFyZVVybCcsXHJcbiAgICAncGludGVyZXN0U2hhcmVVcmwnLFxyXG4gICAgJ3BpbnRlcmVzdFRleHQnLFxyXG4gICAgJ2ZiSHRtbCcsXHJcbiAgICAnZGlzcXVzSWRlbnRpZmllcicsXHJcbiAgICAnZGlzcXVzVXJsJyxcclxuXTtcclxuLy8gQ29udmVydCBodG1sIGRhdGEtYXR0cmlidXRlIHRvIGNhbWFsY2FzZVxyXG5mdW5jdGlvbiBjb252ZXJ0VG9EYXRhKGF0dHIpIHtcclxuICAgIC8vIEZJbmQgYSB3YXkgZm9yIGxnc2l6ZVxyXG4gICAgaWYgKGF0dHIgPT09ICdocmVmJykge1xyXG4gICAgICAgIHJldHVybiAnc3JjJztcclxuICAgIH1cclxuICAgIGF0dHIgPSBhdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xyXG4gICAgYXR0ciA9IGF0dHIuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBhdHRyLnNsaWNlKDEpO1xyXG4gICAgYXR0ciA9IGF0dHIucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24gKGcpIHsgcmV0dXJuIGdbMV0udG9VcHBlckNhc2UoKTsgfSk7XHJcbiAgICByZXR1cm4gYXR0cjtcclxufVxyXG52YXIgdXRpbHMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIGdldCBwb3NzaWJsZSB3aWR0aCBhbmQgaGVpZ2h0IGZyb20gdGhlIGxnU2l6ZSBhdHRyaWJ1dGUuIFVzZWQgZm9yIFpvb21Gcm9tT3JpZ2luIG9wdGlvblxyXG4gICAgICovXHJcbiAgICBnZXRTaXplOiBmdW5jdGlvbiAoZWwsIGNvbnRhaW5lciwgc3BhY2luZywgZGVmYXVsdExnU2l6ZSkge1xyXG4gICAgICAgIGlmIChzcGFjaW5nID09PSB2b2lkIDApIHsgc3BhY2luZyA9IDA7IH1cclxuICAgICAgICB2YXIgTEdlbCA9ICRMRyhlbCk7XHJcbiAgICAgICAgdmFyIGxnU2l6ZSA9IExHZWwuYXR0cignZGF0YS1sZy1zaXplJykgfHwgZGVmYXVsdExnU2l6ZTtcclxuICAgICAgICBpZiAoIWxnU2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpc1Jlc3BvbnNpdmVTaXplcyA9IGxnU2l6ZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgIC8vIGlmIGF0LWxlYXN0IHR3byB2aWV3cG9ydCBzaXplcyBhcmUgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKGlzUmVzcG9uc2l2ZVNpemVzWzFdKSB7XHJcbiAgICAgICAgICAgIHZhciB3V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpc1Jlc3BvbnNpdmVTaXplcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpemVfMSA9IGlzUmVzcG9uc2l2ZVNpemVzW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNpdmVXaWR0aCA9IHBhcnNlSW50KHNpemVfMS5zcGxpdCgnLScpWzJdLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2l2ZVdpZHRoID4gd1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGdTaXplID0gc2l6ZV8xO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdGFrZSBsYXN0IGl0ZW0gYXMgbGFzdCBvcHRpb25cclxuICAgICAgICAgICAgICAgIGlmIChpID09PSBpc1Jlc3BvbnNpdmVTaXplcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGdTaXplID0gc2l6ZV8xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzaXplID0gbGdTaXplLnNwbGl0KCctJyk7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gcGFyc2VJbnQoc2l6ZVswXSwgMTApO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSBwYXJzZUludChzaXplWzFdLCAxMCk7XHJcbiAgICAgICAgdmFyIGNXaWR0aCA9IGNvbnRhaW5lci53aWR0aCgpO1xyXG4gICAgICAgIHZhciBjSGVpZ2h0ID0gY29udGFpbmVyLmhlaWdodCgpIC0gc3BhY2luZztcclxuICAgICAgICB2YXIgbWF4V2lkdGggPSBNYXRoLm1pbihjV2lkdGgsIHdpZHRoKTtcclxuICAgICAgICB2YXIgbWF4SGVpZ2h0ID0gTWF0aC5taW4oY0hlaWdodCwgaGVpZ2h0KTtcclxuICAgICAgICB2YXIgcmF0aW8gPSBNYXRoLm1pbihtYXhXaWR0aCAvIHdpZHRoLCBtYXhIZWlnaHQgLyBoZWlnaHQpO1xyXG4gICAgICAgIHJldHVybiB7IHdpZHRoOiB3aWR0aCAqIHJhdGlvLCBoZWlnaHQ6IGhlaWdodCAqIHJhdGlvIH07XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzYyBHZXQgdHJhbnNmb3JtIHZhbHVlIGJhc2VkIG9uIHRoZSBpbWFnZVNpemUuIFVzZWQgZm9yIFpvb21Gcm9tT3JpZ2luIG9wdGlvblxyXG4gICAgICogQHBhcmFtIHtqUXVlcnkgRWxlbWVudH1cclxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IFRyYW5zZm9ybSBDU1Mgc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIGdldFRyYW5zZm9ybTogZnVuY3Rpb24gKGVsLCBjb250YWluZXIsIHRvcCwgYm90dG9tLCBpbWFnZVNpemUpIHtcclxuICAgICAgICBpZiAoIWltYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBMR2VsID0gJExHKGVsKS5maW5kKCdpbWcnKS5maXJzdCgpO1xyXG4gICAgICAgIGlmICghTEdlbC5nZXQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHZhciB3V2lkdGggPSBjb250YWluZXJSZWN0LndpZHRoO1xyXG4gICAgICAgIC8vIHVzaW5nIGlubmVyV2lkdGggdG8gaW5jbHVkZSBtb2JpbGUgc2FmYXJpIGJvdHRvbSBiYXJcclxuICAgICAgICB2YXIgd0hlaWdodCA9IGNvbnRhaW5lci5oZWlnaHQoKSAtICh0b3AgKyBib3R0b20pO1xyXG4gICAgICAgIHZhciBlbFdpZHRoID0gTEdlbC53aWR0aCgpO1xyXG4gICAgICAgIHZhciBlbEhlaWdodCA9IExHZWwuaGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIGVsU3R5bGUgPSBMR2VsLnN0eWxlKCk7XHJcbiAgICAgICAgdmFyIHggPSAod1dpZHRoIC0gZWxXaWR0aCkgLyAyIC1cclxuICAgICAgICAgICAgTEdlbC5vZmZzZXQoKS5sZWZ0ICtcclxuICAgICAgICAgICAgKHBhcnNlRmxvYXQoZWxTdHlsZS5wYWRkaW5nTGVmdCkgfHwgMCkgK1xyXG4gICAgICAgICAgICAocGFyc2VGbG9hdChlbFN0eWxlLmJvcmRlckxlZnQpIHx8IDApICtcclxuICAgICAgICAgICAgJExHKHdpbmRvdykuc2Nyb2xsTGVmdCgpICtcclxuICAgICAgICAgICAgY29udGFpbmVyUmVjdC5sZWZ0O1xyXG4gICAgICAgIHZhciB5ID0gKHdIZWlnaHQgLSBlbEhlaWdodCkgLyAyIC1cclxuICAgICAgICAgICAgTEdlbC5vZmZzZXQoKS50b3AgK1xyXG4gICAgICAgICAgICAocGFyc2VGbG9hdChlbFN0eWxlLnBhZGRpbmdUb3ApIHx8IDApICtcclxuICAgICAgICAgICAgKHBhcnNlRmxvYXQoZWxTdHlsZS5ib3JkZXJUb3ApIHx8IDApICtcclxuICAgICAgICAgICAgJExHKHdpbmRvdykuc2Nyb2xsVG9wKCkgK1xyXG4gICAgICAgICAgICB0b3A7XHJcbiAgICAgICAgdmFyIHNjWCA9IGVsV2lkdGggLyBpbWFnZVNpemUud2lkdGg7XHJcbiAgICAgICAgdmFyIHNjWSA9IGVsSGVpZ2h0IC8gaW1hZ2VTaXplLmhlaWdodDtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgK1xyXG4gICAgICAgICAgICAoeCAqPSAtMSkgK1xyXG4gICAgICAgICAgICAncHgsICcgK1xyXG4gICAgICAgICAgICAoeSAqPSAtMSkgK1xyXG4gICAgICAgICAgICAncHgsIDApIHNjYWxlM2QoJyArXHJcbiAgICAgICAgICAgIHNjWCArXHJcbiAgICAgICAgICAgICcsICcgK1xyXG4gICAgICAgICAgICBzY1kgK1xyXG4gICAgICAgICAgICAnLCAxKSc7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcclxuICAgIH0sXHJcbiAgICBnZXRJZnJhbWVNYXJrdXA6IGZ1bmN0aW9uIChpZnJhbWVXaWR0aCwgaWZyYW1lSGVpZ2h0LCBpZnJhbWVNYXhXaWR0aCwgaWZyYW1lTWF4SGVpZ2h0LCBzcmMsIGlmcmFtZVRpdGxlKSB7XHJcbiAgICAgICAgdmFyIHRpdGxlID0gaWZyYW1lVGl0bGUgPyAndGl0bGU9XCInICsgaWZyYW1lVGl0bGUgKyAnXCInIDogJyc7XHJcbiAgICAgICAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwibGctdmlkZW8tY29udCBsZy1oYXMtaWZyYW1lXFxcIiBzdHlsZT1cXFwid2lkdGg6XCIgKyBpZnJhbWVXaWR0aCArIFwiOyBtYXgtd2lkdGg6XCIgKyBpZnJhbWVNYXhXaWR0aCArIFwiOyBoZWlnaHQ6IFwiICsgaWZyYW1lSGVpZ2h0ICsgXCI7IG1heC1oZWlnaHQ6XCIgKyBpZnJhbWVNYXhIZWlnaHQgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIGNsYXNzPVxcXCJsZy1vYmplY3RcXFwiIGZyYW1lYm9yZGVyPVxcXCIwXFxcIiBcIiArIHRpdGxlICsgXCIgc3JjPVxcXCJcIiArIHNyYyArIFwiXFxcIiAgYWxsb3dmdWxsc2NyZWVuPVxcXCJ0cnVlXFxcIj48L2lmcmFtZT5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XCI7XHJcbiAgICB9LFxyXG4gICAgZ2V0SW1nTWFya3VwOiBmdW5jdGlvbiAoaW5kZXgsIHNyYywgYWx0QXR0ciwgc3Jjc2V0LCBzaXplcywgc291cmNlcykge1xyXG4gICAgICAgIHZhciBzcmNzZXRBdHRyID0gc3Jjc2V0ID8gXCJzcmNzZXQ9XFxcIlwiICsgc3Jjc2V0ICsgXCJcXFwiXCIgOiAnJztcclxuICAgICAgICB2YXIgc2l6ZXNBdHRyID0gc2l6ZXMgPyBcInNpemVzPVxcXCJcIiArIHNpemVzICsgXCJcXFwiXCIgOiAnJztcclxuICAgICAgICB2YXIgaW1nTWFya3VwID0gXCI8aW1nIFwiICsgYWx0QXR0ciArIFwiIFwiICsgc3Jjc2V0QXR0ciArIFwiICBcIiArIHNpemVzQXR0ciArIFwiIGNsYXNzPVxcXCJsZy1vYmplY3QgbGctaW1hZ2VcXFwiIGRhdGEtaW5kZXg9XFxcIlwiICsgaW5kZXggKyBcIlxcXCIgc3JjPVxcXCJcIiArIHNyYyArIFwiXFxcIiAvPlwiO1xyXG4gICAgICAgIHZhciBzb3VyY2VUYWcgPSAnJztcclxuICAgICAgICBpZiAoc291cmNlcykge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlT2JqID0gdHlwZW9mIHNvdXJjZXMgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShzb3VyY2VzKSA6IHNvdXJjZXM7XHJcbiAgICAgICAgICAgIHNvdXJjZVRhZyA9IHNvdXJjZU9iai5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF0dHJzID0gJyc7XHJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCByZW1vdmUgdGhlIGZpcnN0IHNwYWNlIGFzIGl0IGlzIHJlcXVpcmVkIHRvIHNlcGFyYXRlIHRoZSBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cnMgKz0gXCIgXCIgKyBrZXkgKyBcIj1cXFwiXCIgKyBzb3VyY2Vba2V5XSArIFwiXFxcIlwiO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8c291cmNlIFwiICsgYXR0cnMgKyBcIj48L3NvdXJjZT5cIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIlwiICsgc291cmNlVGFnICsgaW1nTWFya3VwO1xyXG4gICAgfSxcclxuICAgIC8vIEdldCBzcmMgZnJvbSByZXNwb25zaXZlIHNyY1xyXG4gICAgZ2V0UmVzcG9uc2l2ZVNyYzogZnVuY3Rpb24gKHNyY0l0bXMpIHtcclxuICAgICAgICB2YXIgcnNXaWR0aCA9IFtdO1xyXG4gICAgICAgIHZhciByc1NyYyA9IFtdO1xyXG4gICAgICAgIHZhciBzcmMgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNyY0l0bXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIF9zcmMgPSBzcmNJdG1zW2ldLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIC8vIE1hbmFnZSBlbXB0eSBzcGFjZVxyXG4gICAgICAgICAgICBpZiAoX3NyY1swXSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIF9zcmMuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJzU3JjLnB1c2goX3NyY1swXSk7XHJcbiAgICAgICAgICAgIHJzV2lkdGgucHVzaChfc3JjWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHdXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcnNXaWR0aC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBpZiAocGFyc2VJbnQocnNXaWR0aFtqXSwgMTApID4gd1dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBzcmMgPSByc1NyY1tqXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzcmM7XHJcbiAgICB9LFxyXG4gICAgaXNJbWFnZUxvYWRlZDogZnVuY3Rpb24gKGltZykge1xyXG4gICAgICAgIGlmICghaW1nKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gRHVyaW5nIHRoZSBvbmxvYWQgZXZlbnQsIElFIGNvcnJlY3RseSBpZGVudGlmaWVzIGFueSBpbWFnZXMgdGhhdFxyXG4gICAgICAgIC8vIHdlcmVu4oCZdCBkb3dubG9hZGVkIGFzIG5vdCBjb21wbGV0ZS4gT3RoZXJzIHNob3VsZCB0b28uIEdlY2tvLWJhc2VkXHJcbiAgICAgICAgLy8gYnJvd3NlcnMgYWN0IGxpa2UgTlM0IGluIHRoYXQgdGhleSByZXBvcnQgdGhpcyBpbmNvcnJlY3RseS5cclxuICAgICAgICBpZiAoIWltZy5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhvd2V2ZXIsIHRoZXkgZG8gaGF2ZSB0d28gdmVyeSB1c2VmdWwgcHJvcGVydGllczogbmF0dXJhbFdpZHRoIGFuZFxyXG4gICAgICAgIC8vIG5hdHVyYWxIZWlnaHQuIFRoZXNlIGdpdmUgdGhlIHRydWUgc2l6ZSBvZiB0aGUgaW1hZ2UuIElmIGl0IGZhaWxlZFxyXG4gICAgICAgIC8vIHRvIGxvYWQsIGVpdGhlciBvZiB0aGVzZSBzaG91bGQgYmUgemVyby5cclxuICAgICAgICBpZiAoaW1nLm5hdHVyYWxXaWR0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vIG90aGVyIHdheSBvZiBjaGVja2luZzogYXNzdW1lIGl04oCZcyBvay5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICBnZXRWaWRlb1Bvc3Rlck1hcmt1cDogZnVuY3Rpb24gKF9wb3N0ZXIsIGR1bW15SW1nLCB2aWRlb0NvbnRTdHlsZSwgcGxheVZpZGVvU3RyaW5nLCBfaXNWaWRlbykge1xyXG4gICAgICAgIHZhciB2aWRlb0NsYXNzID0gJyc7XHJcbiAgICAgICAgaWYgKF9pc1ZpZGVvICYmIF9pc1ZpZGVvLnlvdXR1YmUpIHtcclxuICAgICAgICAgICAgdmlkZW9DbGFzcyA9ICdsZy1oYXMteW91dHViZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF9pc1ZpZGVvICYmIF9pc1ZpZGVvLnZpbWVvKSB7XHJcbiAgICAgICAgICAgIHZpZGVvQ2xhc3MgPSAnbGctaGFzLXZpbWVvJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZpZGVvQ2xhc3MgPSAnbGctaGFzLWh0bWw1JztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwibGctdmlkZW8tY29udCBcIiArIHZpZGVvQ2xhc3MgKyBcIlxcXCIgc3R5bGU9XFxcIlwiICsgdmlkZW9Db250U3R5bGUgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxnLXZpZGVvLXBsYXktYnV0dG9uXFxcIj5cXG4gICAgICAgICAgICAgICAgPHN2Z1xcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD1cXFwiMCAwIDIwIDIwXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbz1cXFwieE1pZFlNaWRcXFwiXFxuICAgICAgICAgICAgICAgICAgICBmb2N1c2FibGU9XFxcImZhbHNlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PVxcXCJcIiArIHBsYXlWaWRlb1N0cmluZyArIFwiXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgcm9sZT1cXFwiaW1nXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImxnLXZpZGVvLXBsYXktaWNvblxcXCJcXG4gICAgICAgICAgICAgICAgPlxcbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlwiICsgcGxheVZpZGVvU3RyaW5nICsgXCI8L3RpdGxlPlxcbiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gY2xhc3M9XFxcImxnLXZpZGVvLXBsYXktaWNvbi1pbm5lclxcXCIgcG9pbnRzPVxcXCIxLDAgMjAsMTAgMSwyMFxcXCI+PC9wb2x5Z29uPlxcbiAgICAgICAgICAgICAgICA8L3N2Zz5cXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cXFwibGctdmlkZW8tcGxheS1pY29uLWJnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNTAgNTBcXFwiIGZvY3VzYWJsZT1cXFwiZmFsc2VcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBjeD1cXFwiNTAlXFxcIiBjeT1cXFwiNTAlXFxcIiByPVxcXCIyMFxcXCI+PC9jaXJjbGU+PC9zdmc+XFxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XFxcImxnLXZpZGVvLXBsYXktaWNvbi1jaXJjbGVcXFwiIHZpZXdCb3g9XFxcIjAgMCA1MCA1MFxcXCIgZm9jdXNhYmxlPVxcXCJmYWxzZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVxcXCI1MCVcXFwiIGN5PVxcXCI1MCVcXFwiIHI9XFxcIjIwXFxcIj48L2NpcmNsZT5cXG4gICAgICAgICAgICAgICAgPC9zdmc+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgXCIgKyAoZHVtbXlJbWcgfHwgJycpICsgXCJcXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJsZy1vYmplY3QgbGctdmlkZW8tcG9zdGVyXFxcIiBzcmM9XFxcIlwiICsgX3Bvc3RlciArIFwiXFxcIiAvPlxcbiAgICAgICAgPC9kaXY+XCI7XHJcbiAgICB9LFxyXG4gICAgZ2V0Rm9jdXNhYmxlRWxlbWVudHM6IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICB2YXIgZWxlbWVudHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmXTpub3QoW2Rpc2FibGVkXSksIGJ1dHRvbjpub3QoW2Rpc2FibGVkXSksIHRleHRhcmVhOm5vdChbZGlzYWJsZWRdKSwgaW5wdXRbdHlwZT1cInRleHRcIl06bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwicmFkaW9cIl06bm90KFtkaXNhYmxlZF0pLCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06bm90KFtkaXNhYmxlZF0pLCBzZWxlY3Q6bm90KFtkaXNhYmxlZF0pJyk7XHJcbiAgICAgICAgdmFyIHZpc2libGVFbGVtZW50cyA9IFtdLmZpbHRlci5jYWxsKGVsZW1lbnRzLCBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlLmRpc3BsYXkgIT09ICdub25lJyAmJiBzdHlsZS52aXNpYmlsaXR5ICE9PSAnaGlkZGVuJztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdmlzaWJsZUVsZW1lbnRzO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlc2MgQ3JlYXRlIGR5bmFtaWMgZWxlbWVudHMgYXJyYXkgZnJvbSBnYWxsZXJ5IGl0ZW1zIHdoZW4gZHluYW1pYyBvcHRpb24gaXMgZmFsc2VcclxuICAgICAqIEl0IGhlbHBzIHRvIGF2b2lkIGZyZXF1ZW50IERPTSBpbnRlcmFjdGlvblxyXG4gICAgICogYW5kIGF2b2lkIG11bHRpcGxlIGNoZWNrcyBmb3IgZHluYW1pYyBlbG1lbnRzXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBkeW5hbWljRWxcclxuICAgICAqL1xyXG4gICAgZ2V0RHluYW1pY09wdGlvbnM6IGZ1bmN0aW9uIChpdGVtcywgZXh0cmFQcm9wcywgZ2V0Q2FwdGlvbkZyb21UaXRsZU9yQWx0LCBleFRodW1iSW1hZ2UpIHtcclxuICAgICAgICB2YXIgZHluYW1pY0VsZW1lbnRzID0gW107XHJcbiAgICAgICAgdmFyIGF2YWlsYWJsZUR5bmFtaWNPcHRpb25zID0gX19zcHJlYWRBcnJheXMoZGVmYXVsdER5bmFtaWNPcHRpb25zLCBleHRyYVByb3BzKTtcclxuICAgICAgICBbXS5mb3JFYWNoLmNhbGwoaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBkeW5hbWljRWwgPSB7fTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gaXRlbS5hdHRyaWJ1dGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGF0dHIuc3BlY2lmaWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR5bmFtaWNBdHRyID0gY29udmVydFRvRGF0YShhdHRyLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdmFpbGFibGVEeW5hbWljT3B0aW9ucy5pbmRleE9mKGR5bmFtaWNBdHRyKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gZHluYW1pY0F0dHI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljRWxbbGFiZWxdID0gYXR0ci52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gJExHKGl0ZW0pO1xyXG4gICAgICAgICAgICB2YXIgYWx0ID0gY3VycmVudEl0ZW0uZmluZCgnaW1nJykuZmlyc3QoKS5hdHRyKCdhbHQnKTtcclxuICAgICAgICAgICAgdmFyIHRpdGxlID0gY3VycmVudEl0ZW0uYXR0cigndGl0bGUnKTtcclxuICAgICAgICAgICAgdmFyIHRodW1iID0gZXhUaHVtYkltYWdlXHJcbiAgICAgICAgICAgICAgICA/IGN1cnJlbnRJdGVtLmF0dHIoZXhUaHVtYkltYWdlKVxyXG4gICAgICAgICAgICAgICAgOiBjdXJyZW50SXRlbS5maW5kKCdpbWcnKS5maXJzdCgpLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgICAgICBkeW5hbWljRWwudGh1bWIgPSB0aHVtYjtcclxuICAgICAgICAgICAgaWYgKGdldENhcHRpb25Gcm9tVGl0bGVPckFsdCAmJiAhZHluYW1pY0VsLnN1Ykh0bWwpIHtcclxuICAgICAgICAgICAgICAgIGR5bmFtaWNFbC5zdWJIdG1sID0gdGl0bGUgfHwgYWx0IHx8ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGR5bmFtaWNFbC5hbHQgPSBhbHQgfHwgdGl0bGUgfHwgJyc7XHJcbiAgICAgICAgICAgIGR5bmFtaWNFbGVtZW50cy5wdXNoKGR5bmFtaWNFbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGR5bmFtaWNFbGVtZW50cztcclxuICAgIH0sXHJcbiAgICBpc01vYmlsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAvaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjIENoZWNrIHRoZSBnaXZlbiBzcmMgaXMgdmlkZW9cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzcmNcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gdmlkZW8gdHlwZVxyXG4gICAgICogRXg6eyB5b3V0dWJlICA6ICBbXCIvL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PWMwYXNKZ1N5eGNZXCIsIFwiYzBhc0pnU3l4Y1lcIl0gfVxyXG4gICAgICpcclxuICAgICAqIEB0b2RvIC0gdGhpcyBpbmZvcm1hdGlvbiBjYW4gYmUgbW92ZWQgdG8gZHluYW1pY0VsIHRvIGF2b2lkIGZyZXF1ZW50IGNhbGxzXHJcbiAgICAgKi9cclxuICAgIGlzVmlkZW86IGZ1bmN0aW9uIChzcmMsIGlzSFRNTDVWSWRlbywgaW5kZXgpIHtcclxuICAgICAgICBpZiAoIXNyYykge1xyXG4gICAgICAgICAgICBpZiAoaXNIVE1MNVZJZGVvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWw1OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2xpZ2h0R2FsbGVyeSA6LSBkYXRhLXNyYyBpcyBub3QgcHJvdmlkZWQgb24gc2xpZGUgaXRlbSAnICtcclxuICAgICAgICAgICAgICAgICAgICAoaW5kZXggKyAxKSArXHJcbiAgICAgICAgICAgICAgICAgICAgJy4gUGxlYXNlIG1ha2Ugc3VyZSB0aGUgc2VsZWN0b3IgcHJvcGVydHkgaXMgcHJvcGVybHkgY29uZmlndXJlZC4gTW9yZSBpbmZvIC0gaHR0cHM6Ly93d3cubGlnaHRnYWxsZXJ5anMuY29tL2RlbW9zL2h0bWwtbWFya3VwLycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB5b3V0dWJlID0gc3JjLm1hdGNoKC9cXC9cXC8oPzp3d3dcXC4pP3lvdXR1KD86XFwuYmV8YmVcXC5jb218YmUtbm9jb29raWVcXC5jb20pXFwvKD86d2F0Y2hcXD92PXxlbWJlZFxcLyk/KFthLXowLTlcXC1cXF9cXCVdKykoW1xcJnw/XVtcXFNdKikqL2kpO1xyXG4gICAgICAgIHZhciB2aW1lbyA9IHNyYy5tYXRjaCgvXFwvXFwvKD86d3d3XFwuKT8oPzpwbGF5ZXJcXC4pP3ZpbWVvLmNvbVxcLyg/OnZpZGVvXFwvKT8oWzAtOWEtelxcLV9dKykoLiopPy9pKTtcclxuICAgICAgICB2YXIgd2lzdGlhID0gc3JjLm1hdGNoKC9odHRwcz86XFwvXFwvKC4rKT8od2lzdGlhXFwuY29tfHdpXFwuc3QpXFwvKG1lZGlhc3xlbWJlZClcXC8oWzAtOWEtelxcLV9dKykoLiopLyk7XHJcbiAgICAgICAgaWYgKHlvdXR1YmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHlvdXR1YmU6IHlvdXR1YmUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZpbWVvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB2aW1lbzogdmltZW8sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHdpc3RpYSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgd2lzdGlhOiB3aXN0aWEsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufTtcblxuLy8gQHJlZiAtIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NzE4NDEvaG93LXRvLXJlc2l6ZS1pbWFnZXMtcHJvcG9ydGlvbmFsbHkta2VlcGluZy10aGUtYXNwZWN0LXJhdGlvXHJcbi8vIEByZWYgLSBodHRwczovLzJhbGl0eS5jb20vMjAxNy8wNC9zZXR0aW5nLXVwLW11bHRpLXBsYXRmb3JtLXBhY2thZ2VzLmh0bWxcclxuLy8gVW5pcXVlIGlkIGZvciBlYWNoIGdhbGxlcnlcclxudmFyIGxnSWQgPSAwO1xyXG52YXIgTGlnaHRHYWxsZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTGlnaHRHYWxsZXJ5KGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmxnT3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAgICAgLy8gbGlnaHRHYWxsZXJ5IG1vZHVsZXNcclxuICAgICAgICB0aGlzLnBsdWdpbnMgPSBbXTtcclxuICAgICAgICAvLyBmYWxzZSB3aGVuIGxpZ2h0R2FsbGVyeSBsb2FkIGZpcnN0IHNsaWRlIGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5sR2FsbGVyeU9uID0gZmFsc2U7XHJcbiAgICAgICAgLy8gVHJ1ZSB3aGVuIGEgc2xpZGUgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzXHJcbiAgICAgICAgdGhpcy5sZ0J1c3kgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJdGVtc0luRG9tID0gW107XHJcbiAgICAgICAgLy8gU2Nyb2xsIHRvcCB2YWx1ZSBiZWZvcmUgbGlnaHRHYWxsZXJ5IGlzIG9wZW5lZFxyXG4gICAgICAgIHRoaXMucHJldlNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgdGhpcy5ib2R5UGFkZGluZ1JpZ2h0ID0gMDtcclxuICAgICAgICB0aGlzLmlzRHVtbXlJbWFnZVJlbW92ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRyYWdPclN3aXBlRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubWVkaWFDb250YWluZXJQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICBib3R0b206IDAsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxnSWQrKztcclxuICAgICAgICB0aGlzLmxnSWQgPSBsZ0lkO1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuTEdlbCA9ICRMRyhlbGVtZW50KTtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlU2V0dGluZ3Mob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5idWlsZE1vZHVsZXMoKTtcclxuICAgICAgICAvLyBXaGVuIHVzaW5nIGR5bmFtaWMgbW9kZSwgZW5zdXJlIGR5bmFtaWNFbCBpcyBhbiBhcnJheVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmR5bmFtaWMgJiZcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5keW5hbWljRWwgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAhQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLmR5bmFtaWNFbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgJ1doZW4gdXNpbmcgZHluYW1pYyBtb2RlLCB5b3UgbXVzdCBhbHNvIGRlZmluZSBkeW5hbWljRWwgYXMgYW4gQXJyYXkuJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYWxsZXJ5SXRlbXMgPSB0aGlzLmdldEl0ZW1zKCk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxpemVTZXR0aW5ncygpO1xyXG4gICAgICAgIC8vIEdhbGxlcnkgaXRlbXNcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlTGljZW5zZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5nZW5lcmF0ZVNldHRpbmdzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAvLyBsaWdodEdhbGxlcnkgc2V0dGluZ3NcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGxpZ2h0R2FsbGVyeUNvcmVTZXR0aW5ncyksIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmlzTW9iaWxlICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnNldHRpbmdzLmlzTW9iaWxlID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgID8gdGhpcy5zZXR0aW5ncy5pc01vYmlsZSgpXHJcbiAgICAgICAgICAgIDogdXRpbHMuaXNNb2JpbGUoKSkge1xyXG4gICAgICAgICAgICB2YXIgbW9iaWxlU2V0dGluZ3MgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zZXR0aW5ncy5tb2JpbGVTZXR0aW5ncyksIHRoaXMuc2V0dGluZ3MubW9iaWxlU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCBtb2JpbGVTZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUubm9ybWFsaXplU2V0dGluZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2xpZGVFbmRBbmltYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5oaWRlQ29udHJvbE9uRW5kID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5jbG9zYWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnN3aXBlVG9DbG9zZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBbmQgcmVzZXQgaXQgb24gY2xvc2UgdG8gZ2V0IHRoZSBjb3JyZWN0IHZhbHVlIG5leHQgdGltZVxyXG4gICAgICAgIHRoaXMuem9vbUZyb21PcmlnaW4gPSB0aGlzLnNldHRpbmdzLnpvb21Gcm9tT3JpZ2luO1xyXG4gICAgICAgIC8vIEF0IHRoZSBtb21lbnQsIFpvb20gZnJvbSBpbWFnZSBkb2Vzbid0IHN1cHBvcnQgZHluYW1pYyBvcHRpb25zXHJcbiAgICAgICAgLy8gQHRvZG8gYWRkIHpvb21Gcm9tT3JpZ2luIHN1cHBvcnQgZm9yIGR5bmFtaWMgaW1hZ2VzXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZHluYW1pYykge1xyXG4gICAgICAgICAgICB0aGlzLnpvb21Gcm9tT3JpZ2luID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jb250YWluZXIgPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzZXR0aW5ncy5wcmVsb2FkIHNob3VsZCBub3QgYmUgZ3JhdGVyIHRoYW4gJGl0ZW0ubGVuZ3RoXHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5wcmVsb2FkID0gTWF0aC5taW4odGhpcy5zZXR0aW5ncy5wcmVsb2FkLCB0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGgpO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYWRkU2xpZGVWaWRlb0luZm8odGhpcy5nYWxsZXJ5SXRlbXMpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRTdHJ1Y3R1cmUoKTtcclxuICAgICAgICB0aGlzLkxHZWwudHJpZ2dlcihsR0V2ZW50cy5pbml0LCB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmtleVByZXNzKSB7XHJcbiAgICAgICAgICAgIHRoaXMua2V5UHJlc3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVuYWJsZURyYWcoKTtcclxuICAgICAgICAgICAgX3RoaXMuZW5hYmxlU3dpcGUoKTtcclxuICAgICAgICAgICAgX3RoaXMudHJpZ2dlclBvc3RlckNsaWNrKCk7XHJcbiAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIHRoaXMuYXJyb3coKTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb3VzZXdoZWVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2V3aGVlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZHluYW1pYykge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5HYWxsZXJ5T25JdGVtQ2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5vcGVuR2FsbGVyeU9uSXRlbUNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzXzEuaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAkTEcoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIFVzaW5nIGRpZmZlcmVudCBuYW1lc3BhY2UgZm9yIGNsaWNrIGJlY2F1c2UgY2xpY2sgZXZlbnQgc2hvdWxkIG5vdCB1bmJpbmQgaWYgc2VsZWN0b3IgaXMgc2FtZSBvYmplY3QoJ3RoaXMnKVxyXG4gICAgICAgICAgICAvLyBAdG9kbyBtYW5hZ2UgYWxsIGV2ZW50IGxpc3RuZXJzIC0gc2hvdWxkIGhhdmUgbmFtZXNwYWNlIHRoYXQgcmVwcmVzZW50IGVsZW1lbnRcclxuICAgICAgICAgICAgdmFyIHV1aWQgPSBsZ1F1ZXJ5LmdlbmVyYXRlVVVJRCgpO1xyXG4gICAgICAgICAgICAkZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2RhdGEtbGctaWQnLCB1dWlkKVxyXG4gICAgICAgICAgICAgICAgLm9uKFwiY2xpY2subGdjdXN0b20taXRlbS1cIiArIHV1aWQsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW1JbmRleCA9IF90aGlzLnNldHRpbmdzLmluZGV4IHx8IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3BlbkdhbGxlcnkoY3VycmVudEl0ZW1JbmRleCwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XHJcbiAgICAgICAgLy8gVXNpbmcgZm9yIGxvb3AgaW5zdGVhZCBvZiB1c2luZyBidWJibGluZyBhcyB0aGUgaXRlbXMgY2FuIGJlIGFueSBodG1sIGVsZW1lbnQuXHJcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIF9sb29wXzEoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE1vZHVsZSBjb25zdHJ1Y3RvclxyXG4gICAgICogTW9kdWxlcyBhcmUgYnVpbGQgaW5jcmVtZW50YWxseS5cclxuICAgICAqIEdhbGxlcnkgc2hvdWxkIGJlIG9wZW5lZCBvbmx5IG9uY2UgYWxsIHRoZSBtb2R1bGVzIGFyZSBpbml0aWFsaXplZC5cclxuICAgICAqIHVzZSBtb2R1bGVCdWlsZFRpbWVvdXQgdG8gbWFrZSBzdXJlIHRoaXNcclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5idWlsZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnNldHRpbmdzLnBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnBsdWdpbnMucHVzaChuZXcgcGx1Z2luKF90aGlzLCAkTEcpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLnZhbGlkYXRlTGljZW5zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGljZW5zZUtleSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGxpY2Vuc2Uga2V5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2V0dGluZ3MubGljZW5zZUtleSA9PT0gJzAwMDAtMDAwMC0wMDAtMDAwMCcpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwibGlnaHRHYWxsZXJ5OiBcIiArIHRoaXMuc2V0dGluZ3MubGljZW5zZUtleSArIFwiIGxpY2Vuc2Uga2V5IGlzIG5vdCB2YWxpZCBmb3IgcHJvZHVjdGlvbiB1c2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0U2xpZGVJdGVtID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuICRMRyh0aGlzLmdldFNsaWRlSXRlbUlkKGluZGV4KSk7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5nZXRTbGlkZUl0ZW1JZCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiBcIiNsZy1pdGVtLVwiICsgdGhpcy5sZ0lkICsgXCItXCIgKyBpbmRleDtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmdldElkTmFtZSA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHJldHVybiBpZCArIFwiLVwiICsgdGhpcy5sZ0lkO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0RWxlbWVudEJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICByZXR1cm4gJExHKFwiI1wiICsgdGhpcy5nZXRJZE5hbWUoaWQpKTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLm1hbmFnZVNpbmdsZVNsaWRlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLXNpbmdsZS1pdGVtJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1zaW5nbGUtaXRlbScpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmJ1aWxkU3RydWN0dXJlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuJGNvbnRhaW5lciAmJiB0aGlzLiRjb250YWluZXIuZ2V0KCk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb250cm9scyA9ICcnO1xyXG4gICAgICAgIHZhciBzdWJIdG1sQ29udCA9ICcnO1xyXG4gICAgICAgIC8vIENyZWF0ZSBjb250cm9sc1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNvbnRyb2xzKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xzID0gXCI8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgaWQ9XFxcIlwiICsgdGhpcy5nZXRJZE5hbWUoJ2xnLXByZXYnKSArIFwiXFxcIiBhcmlhLWxhYmVsPVxcXCJcIiArIHRoaXMuc2V0dGluZ3Muc3RyaW5nc1sncHJldmlvdXNTbGlkZSddICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1wcmV2IGxnLWljb25cXFwiPiBcIiArIHRoaXMuc2V0dGluZ3MucHJldkh0bWwgKyBcIiA8L2J1dHRvbj5cXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGlkPVxcXCJcIiArIHRoaXMuZ2V0SWROYW1lKCdsZy1uZXh0JykgKyBcIlxcXCIgYXJpYS1sYWJlbD1cXFwiXCIgKyB0aGlzLnNldHRpbmdzLnN0cmluZ3NbJ25leHRTbGlkZSddICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1uZXh0IGxnLWljb25cXFwiPiBcIiArIHRoaXMuc2V0dGluZ3MubmV4dEh0bWwgKyBcIiA8L2J1dHRvbj5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXBwZW5kU3ViSHRtbFRvICE9PSAnLmxnLWl0ZW0nKSB7XHJcbiAgICAgICAgICAgIHN1Ykh0bWxDb250ID1cclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibGctc3ViLWh0bWxcIiByb2xlPVwic3RhdHVzXCIgYXJpYS1saXZlPVwicG9saXRlXCI+PC9kaXY+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFkZENsYXNzZXMgPSAnJztcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hbGxvd01lZGlhT3ZlcmxhcCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgcmVtb3ZlIHNwYWNlIGJlZm9yZSBsYXN0IHNpbmdsZSBxdW90ZVxyXG4gICAgICAgICAgICBhZGRDbGFzc2VzICs9ICdsZy1tZWRpYS1vdmVybGFwICc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhcmlhTGFiZWxsZWRieSA9IHRoaXMuc2V0dGluZ3MuYXJpYUxhYmVsbGVkYnlcclxuICAgICAgICAgICAgPyAnYXJpYS1sYWJlbGxlZGJ5PVwiJyArIHRoaXMuc2V0dGluZ3MuYXJpYUxhYmVsbGVkYnkgKyAnXCInXHJcbiAgICAgICAgICAgIDogJyc7XHJcbiAgICAgICAgdmFyIGFyaWFEZXNjcmliZWRieSA9IHRoaXMuc2V0dGluZ3MuYXJpYURlc2NyaWJlZGJ5XHJcbiAgICAgICAgICAgID8gJ2FyaWEtZGVzY3JpYmVkYnk9XCInICsgdGhpcy5zZXR0aW5ncy5hcmlhRGVzY3JpYmVkYnkgKyAnXCInXHJcbiAgICAgICAgICAgIDogJyc7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckNsYXNzTmFtZSA9IFwibGctY29udGFpbmVyIFwiICsgdGhpcy5zZXR0aW5ncy5hZGRDbGFzcyArIFwiIFwiICsgKGRvY3VtZW50LmJvZHkgIT09IHRoaXMuc2V0dGluZ3MuY29udGFpbmVyID8gJ2xnLWlubGluZScgOiAnJyk7XHJcbiAgICAgICAgdmFyIGNsb3NlSWNvbiA9IHRoaXMuc2V0dGluZ3MuY2xvc2FibGUgJiYgdGhpcy5zZXR0aW5ncy5zaG93Q2xvc2VJY29uXHJcbiAgICAgICAgICAgID8gXCI8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgYXJpYS1sYWJlbD1cXFwiXCIgKyB0aGlzLnNldHRpbmdzLnN0cmluZ3NbJ2Nsb3NlR2FsbGVyeSddICsgXCJcXFwiIGlkPVxcXCJcIiArIHRoaXMuZ2V0SWROYW1lKCdsZy1jbG9zZScpICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1jbG9zZSBsZy1pY29uXFxcIj48L2J1dHRvbj5cIlxyXG4gICAgICAgICAgICA6ICcnO1xyXG4gICAgICAgIHZhciBtYXhpbWl6ZUljb24gPSB0aGlzLnNldHRpbmdzLnNob3dNYXhpbWl6ZUljb25cclxuICAgICAgICAgICAgPyBcIjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBhcmlhLWxhYmVsPVxcXCJcIiArIHRoaXMuc2V0dGluZ3Muc3RyaW5nc1sndG9nZ2xlTWF4aW1pemUnXSArIFwiXFxcIiBpZD1cXFwiXCIgKyB0aGlzLmdldElkTmFtZSgnbGctbWF4aW1pemUnKSArIFwiXFxcIiBjbGFzcz1cXFwibGctbWF4aW1pemUgbGctaWNvblxcXCI+PC9idXR0b24+XCJcclxuICAgICAgICAgICAgOiAnJztcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSBcIlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiXCIgKyBjb250YWluZXJDbGFzc05hbWUgKyBcIlxcXCIgaWQ9XFxcIlwiICsgdGhpcy5nZXRJZE5hbWUoJ2xnLWNvbnRhaW5lcicpICsgXCJcXFwiIHRhYmluZGV4PVxcXCItMVxcXCIgYXJpYS1tb2RhbD1cXFwidHJ1ZVxcXCIgXCIgKyBhcmlhTGFiZWxsZWRieSArIFwiIFwiICsgYXJpYURlc2NyaWJlZGJ5ICsgXCIgcm9sZT1cXFwiZGlhbG9nXFxcIlxcbiAgICAgICAgPlxcbiAgICAgICAgICAgIDxkaXYgaWQ9XFxcIlwiICsgdGhpcy5nZXRJZE5hbWUoJ2xnLWJhY2tkcm9wJykgKyBcIlxcXCIgY2xhc3M9XFxcImxnLWJhY2tkcm9wXFxcIj48L2Rpdj5cXG5cXG4gICAgICAgICAgICA8ZGl2IGlkPVxcXCJcIiArIHRoaXMuZ2V0SWROYW1lKCdsZy1vdXRlcicpICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1vdXRlciBsZy11c2UtY3NzMyBsZy1jc3MzIGxnLWhpZGUtaXRlbXMgXCIgKyBhZGRDbGFzc2VzICsgXCIgXFxcIj5cXG5cXG4gICAgICAgICAgICAgIDxkaXYgaWQ9XFxcIlwiICsgdGhpcy5nZXRJZE5hbWUoJ2xnLWNvbnRlbnQnKSArIFwiXFxcIiBjbGFzcz1cXFwibGctY29udGVudFxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XFxcIlwiICsgdGhpcy5nZXRJZE5hbWUoJ2xnLWlubmVyJykgKyBcIlxcXCIgY2xhc3M9XFxcImxnLWlubmVyXFxcIj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIFwiICsgY29udHJvbHMgKyBcIlxcbiAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XFxcIlwiICsgdGhpcy5nZXRJZE5hbWUoJ2xnLXRvb2xiYXInKSArIFwiXFxcIiBjbGFzcz1cXFwibGctdG9vbGJhciBsZy1ncm91cFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIiArIG1heGltaXplSWNvbiArIFwiXFxuICAgICAgICAgICAgICAgICAgICBcIiArIGNsb3NlSWNvbiArIFwiXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIFwiICsgKHRoaXMuc2V0dGluZ3MuYXBwZW5kU3ViSHRtbFRvID09PSAnLmxnLW91dGVyJ1xyXG4gICAgICAgICAgICA/IHN1Ykh0bWxDb250XHJcbiAgICAgICAgICAgIDogJycpICsgXCJcXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cXFwiXCIgKyB0aGlzLmdldElkTmFtZSgnbGctY29tcG9uZW50cycpICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1jb21wb25lbnRzXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiICsgKHRoaXMuc2V0dGluZ3MuYXBwZW5kU3ViSHRtbFRvID09PSAnLmxnLXN1Yi1odG1sJ1xyXG4gICAgICAgICAgICA/IHN1Ykh0bWxDb250XHJcbiAgICAgICAgICAgIDogJycpICsgXCJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIFwiO1xyXG4gICAgICAgICRMRyh0aGlzLnNldHRpbmdzLmNvbnRhaW5lcikuYXBwZW5kKHRlbXBsYXRlKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSAhPT0gdGhpcy5zZXR0aW5ncy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgJExHKHRoaXMuc2V0dGluZ3MuY29udGFpbmVyKS5jc3MoJ3Bvc2l0aW9uJywgJ3JlbGF0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3V0ZXIgPSB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1vdXRlcicpO1xyXG4gICAgICAgIHRoaXMuJGxnQ29tcG9uZW50cyA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoJ2xnLWNvbXBvbmVudHMnKTtcclxuICAgICAgICB0aGlzLiRiYWNrZHJvcCA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoJ2xnLWJhY2tkcm9wJyk7XHJcbiAgICAgICAgdGhpcy4kY29udGFpbmVyID0gdGhpcy5nZXRFbGVtZW50QnlJZCgnbGctY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy4kaW5uZXIgPSB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1pbm5lcicpO1xyXG4gICAgICAgIHRoaXMuJGNvbnRlbnQgPSB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1jb250ZW50Jyk7XHJcbiAgICAgICAgdGhpcy4kdG9vbGJhciA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoJ2xnLXRvb2xiYXInKTtcclxuICAgICAgICB0aGlzLiRiYWNrZHJvcC5jc3MoJ3RyYW5zaXRpb24tZHVyYXRpb24nLCB0aGlzLnNldHRpbmdzLmJhY2tkcm9wRHVyYXRpb24gKyAnbXMnKTtcclxuICAgICAgICB2YXIgb3V0ZXJDbGFzc05hbWVzID0gdGhpcy5zZXR0aW5ncy5tb2RlICsgXCIgXCI7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VTaW5nbGVTbGlkZUNsYXNzTmFtZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZURyYWcpIHtcclxuICAgICAgICAgICAgb3V0ZXJDbGFzc05hbWVzICs9ICdsZy1ncmFiICc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3Mob3V0ZXJDbGFzc05hbWVzKTtcclxuICAgICAgICB0aGlzLiRpbm5lci5jc3MoJ3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgdGhpcy5zZXR0aW5ncy5lYXNpbmcpO1xyXG4gICAgICAgIHRoaXMuJGlubmVyLmNzcygndHJhbnNpdGlvbi1kdXJhdGlvbicsIHRoaXMuc2V0dGluZ3Muc3BlZWQgKyAnbXMnKTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kb3dubG9hZCkge1xyXG4gICAgICAgICAgICB0aGlzLiR0b29sYmFyLmFwcGVuZChcIjxhIGlkPVxcXCJcIiArIHRoaXMuZ2V0SWROYW1lKCdsZy1kb3dubG9hZCcpICsgXCJcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiByZWw9XFxcIm5vb3BlbmVyXFxcIiBhcmlhLWxhYmVsPVxcXCJcIiArIHRoaXMuc2V0dGluZ3Muc3RyaW5nc1snZG93bmxvYWQnXSArIFwiXFxcIiBkb3dubG9hZCBjbGFzcz1cXFwibGctZG93bmxvYWQgbGctaWNvblxcXCI+PC9hPlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb3VudGVyKCk7XHJcbiAgICAgICAgJExHKHdpbmRvdykub24oXCJyZXNpemUubGcuZ2xvYmFsXCIgKyB0aGlzLmxnSWQgKyBcIiBvcmllbnRhdGlvbmNoYW5nZS5sZy5nbG9iYWxcIiArIHRoaXMubGdJZCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoT25SZXNpemUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhpZGVCYXJzKCk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VDbG9zZUdhbGxlcnkoKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZU1heGltaXplKCk7XHJcbiAgICAgICAgdGhpcy5pbml0TW9kdWxlcygpO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUucmVmcmVzaE9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxnT3BlbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50R2FsbGVyeUl0ZW0gPSB0aGlzLmdhbGxlcnlJdGVtc1t0aGlzLmluZGV4XTtcclxuICAgICAgICAgICAgdmFyIF9fc2xpZGVWaWRlb0luZm8gPSBjdXJyZW50R2FsbGVyeUl0ZW0uX19zbGlkZVZpZGVvSW5mbztcclxuICAgICAgICAgICAgdGhpcy5tZWRpYUNvbnRhaW5lclBvc2l0aW9uID0gdGhpcy5nZXRNZWRpYUNvbnRhaW5lclBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMubWVkaWFDb250YWluZXJQb3NpdGlvbiwgdG9wXzEgPSBfYS50b3AsIGJvdHRvbSA9IF9hLmJvdHRvbTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VTaXplID0gdXRpbHMuZ2V0U2l6ZSh0aGlzLml0ZW1zW3RoaXMuaW5kZXhdLCB0aGlzLm91dGVyLCB0b3BfMSArIGJvdHRvbSwgX19zbGlkZVZpZGVvSW5mbyAmJiB0aGlzLnNldHRpbmdzLnZpZGVvTWF4U2l6ZSk7XHJcbiAgICAgICAgICAgIGlmIChfX3NsaWRlVmlkZW9JbmZvKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZVZpZGVvU2xpZGUodGhpcy5pbmRleCwgdGhpcy5jdXJyZW50SW1hZ2VTaXplKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy56b29tRnJvbU9yaWdpbiAmJiAhdGhpcy5pc0R1bW15SW1hZ2VSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1nU3R5bGUgPSB0aGlzLmdldER1bW15SW1nU3R5bGVzKHRoaXMuY3VycmVudEltYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm91dGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5sZy1jdXJyZW50IC5sZy1kdW1teS1pbWcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0eWxlJywgaW1nU3R5bGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmNvbnRhaW5lclJlc2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUucmVzaXplVmlkZW9TbGlkZSA9IGZ1bmN0aW9uIChpbmRleCwgaW1hZ2VTaXplKSB7XHJcbiAgICAgICAgdmFyIGxnVmlkZW9TdHlsZSA9IHRoaXMuZ2V0VmlkZW9Db250U3R5bGUoaW1hZ2VTaXplKTtcclxuICAgICAgICB2YXIgY3VycmVudFNsaWRlID0gdGhpcy5nZXRTbGlkZUl0ZW0oaW5kZXgpO1xyXG4gICAgICAgIGN1cnJlbnRTbGlkZS5maW5kKCcubGctdmlkZW8tY29udCcpLmF0dHIoJ3N0eWxlJywgbGdWaWRlb1N0eWxlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBzbGlkZXMgZHluYW1pY2FsbHkuXHJcbiAgICAgKiBBZGQsIGVkaXQgb3IgZGVsZXRlIHNsaWRlcyBkeW5hbWljYWxseSB3aGVuIGxpZ2h0R2FsbGVyeSBpcyBvcGVuZWQuXHJcbiAgICAgKiBNb2RpZnkgdGhlIGN1cnJlbnQgZ2FsbGVyeSBpdGVtcyBhbmQgcGFzcyBpdCB2aWEgdXBkYXRlU2xpZGVzIG1ldGhvZFxyXG4gICAgICogQG5vdGVcclxuICAgICAqIC0gRG8gbm90IG11dGF0ZSBleGlzdGluZyBsaWdodEdhbGxlcnkgaXRlbXMgZGlyZWN0bHkuXHJcbiAgICAgKiAtIEFsd2F5cyBwYXNzIG5ldyBsaXN0IG9mIGdhbGxlcnkgaXRlbXNcclxuICAgICAqIC0gWW91IG5lZWQgdG8gdGFrZSBjYXJlIG9mIHRodW1ibmFpbHMgb3V0c2lkZSB0aGUgZ2FsbGVyeSBpZiBhbnlcclxuICAgICAqIC0gdXNlciB0aGlzIG1ldGhvZCBvbmx5IGlmIHlvdSB3YW50IHRvIHVwZGF0ZSBzbGlkZXMgd2hlbiB0aGUgZ2FsbGVyeSBpcyBvcGVuZWQuIE90aGVyd2lzZSwgdXNlIGByZWZyZXNoKClgIG1ldGhvZC5cclxuICAgICAqIEBwYXJhbSBpdGVtcyBHYWxsZXJ5IGl0ZW1zXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggQWZ0ZXIgdGhlIHVwZGF0ZSBvcGVyYXRpb24sIHdoaWNoIHNsaWRlIGdhbGxlcnkgc2hvdWxkIG5hdmlnYXRlIHRvXHJcbiAgICAgKiBAY2F0ZWdvcnkgbEdQdWJsaWNNZXRob2RzXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogY29uc3QgcGx1Z2luID0gbGlnaHRHYWxsZXJ5KCk7XHJcbiAgICAgKlxyXG4gICAgICogLy8gQWRkaW5nIHNsaWRlcyBkeW5hbWljYWxseVxyXG4gICAgICogbGV0IGdhbGxlcnlJdGVtcyA9IFtcclxuICAgICAqIC8vIEFjY2VzcyBleGlzdGluZyBsaWdodEdhbGxlcnkgaXRlbXNcclxuICAgICAqIC8vIGdhbGxlcnlJdGVtcyBhcmUgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgaW50ZXJuYWxseSBmcm9tIHRoZSBnYWxsZXJ5IEhUTUwgbWFya3VwXHJcbiAgICAgKiAvLyBvciBkaXJlY3RseSBmcm9tIGdhbGxlcnlJdGVtcyB3aGVuIGR5bmFtaWMgZ2FsbGVyeSBpcyB1c2VkXHJcbiAgICAgKiAgIC4uLnBsdWdpbi5nYWxsZXJ5SXRlbXMsXHJcbiAgICAgKiAgICAgLi4uW1xyXG4gICAgICogICAgICAge1xyXG4gICAgICogICAgICAgICBzcmM6ICdpbWcvaW1nLTEucG5nJyxcclxuICAgICAqICAgICAgICAgICB0aHVtYjogJ2ltZy90aHVtYjEucG5nJyxcclxuICAgICAqICAgICAgICAgfSxcclxuICAgICAqICAgICBdLFxyXG4gICAgICogICBdO1xyXG4gICAgICogICBwbHVnaW4udXBkYXRlU2xpZGVzKFxyXG4gICAgICogICAgIGdhbGxlcnlJdGVtcyxcclxuICAgICAqICAgICBwbHVnaW4uaW5kZXgsXHJcbiAgICAgKiAgICk7XHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIC8vIFJlbW92ZSBzbGlkZXMgZHluYW1pY2FsbHlcclxuICAgICAqIGdhbGxlcnlJdGVtcyA9IEpTT04ucGFyc2UoXHJcbiAgICAgKiAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZVNsaWRlSW5zdGFuY2UuZ2FsbGVyeUl0ZW1zKSxcclxuICAgICAqICk7XHJcbiAgICAgKiBnYWxsZXJ5SXRlbXMuc2hpZnQoKTtcclxuICAgICAqIHVwZGF0ZVNsaWRlSW5zdGFuY2UudXBkYXRlU2xpZGVzKGdhbGxlcnlJdGVtcywgMSk7XHJcbiAgICAgKiBAc2VlIDxhIGhyZWY9XCIvZGVtb3MvdXBkYXRlLXNsaWRlcy9cIj5EZW1vPC9hPlxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLnVwZGF0ZVNsaWRlcyA9IGZ1bmN0aW9uIChpdGVtcywgaW5kZXgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbmRleCA+IGl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IGl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VHYWxsZXJ5KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1cnJlbnRTcmMgPSB0aGlzLmdhbGxlcnlJdGVtc1tpbmRleF0uc3JjO1xyXG4gICAgICAgIHRoaXMuZ2FsbGVyeUl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250cm9scygpO1xyXG4gICAgICAgIHRoaXMuJGlubmVyLmVtcHR5KCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SXRlbXNJbkRvbSA9IFtdO1xyXG4gICAgICAgIHZhciBfaW5kZXggPSAwO1xyXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgaW5kZXggYmFzZWQgb24gc291cmNlIHZhbHVlIG9mIHRoZSBzbGlkZVxyXG4gICAgICAgIHRoaXMuZ2FsbGVyeUl0ZW1zLnNvbWUoZnVuY3Rpb24gKGdhbGxlcnlJdGVtLCBpdGVtSW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKGdhbGxlcnlJdGVtLnNyYyA9PT0gY3VycmVudFNyYykge1xyXG4gICAgICAgICAgICAgICAgX2luZGV4ID0gaXRlbUluZGV4O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEl0ZW1zSW5Eb20gPSB0aGlzLm9yZ2FuaXplU2xpZGVJdGVtcyhfaW5kZXgsIC0xKTtcclxuICAgICAgICB0aGlzLmxvYWRDb250ZW50KF9pbmRleCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5nZXRTbGlkZUl0ZW0oX2luZGV4KS5hZGRDbGFzcygnbGctY3VycmVudCcpO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSBfaW5kZXg7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50Q291bnRlcihfaW5kZXgpO1xyXG4gICAgICAgIHRoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLnVwZGF0ZVNsaWRlcyk7XHJcbiAgICB9O1xyXG4gICAgLy8gR2V0IGdhbGxlcnkgaXRlbXMgYmFzZWQgb24gbXVsdGlwbGUgY29uZGl0aW9uc1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBHYWxsZXJ5IGl0ZW1zXHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5keW5hbWljKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNlbGVjdG9yID09PSAndGhpcycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaCh0aGlzLmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2V0dGluZ3Muc2VsZWN0b3IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2VsZWN0V2l0aGluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RXaXRoaW4gPSAkTEcodGhpcy5zZXR0aW5ncy5zZWxlY3RXaXRoaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gc2VsZWN0V2l0aGluXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCh0aGlzLnNldHRpbmdzLnNlbGVjdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLnNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5zZXR0aW5ncy5zZWxlY3RvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLmVsLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1dGlscy5nZXREeW5hbWljT3B0aW9ucyh0aGlzLml0ZW1zLCB0aGlzLnNldHRpbmdzLmV4dHJhUHJvcHMsIHRoaXMuc2V0dGluZ3MuZ2V0Q2FwdGlvbkZyb21UaXRsZU9yQWx0LCB0aGlzLnNldHRpbmdzLmV4VGh1bWJJbWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5keW5hbWljRWwgfHwgW107XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuc2hvdWxkSGlkZVNjcm9sbGJhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuc2V0dGluZ3MuaGlkZVNjcm9sbGJhciAmJlxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5ID09PSB0aGlzLnNldHRpbmdzLmNvbnRhaW5lcik7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5oaWRlU2Nyb2xsYmFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRIaWRlU2Nyb2xsYmFyKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJvZHlQYWRkaW5nUmlnaHQgPSBwYXJzZUZsb2F0KCRMRygnYm9keScpLnN0eWxlKCkucGFkZGluZ1JpZ2h0KTtcclxuICAgICAgICB2YXIgYm9keVJlY3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdmFyIHNjcm9sbGJhcldpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSBib2R5UmVjdC53aWR0aDtcclxuICAgICAgICAkTEcoZG9jdW1lbnQuYm9keSkuY3NzKCdwYWRkaW5nLXJpZ2h0Jywgc2Nyb2xsYmFyV2lkdGggKyB0aGlzLmJvZHlQYWRkaW5nUmlnaHQgKyAncHgnKTtcclxuICAgICAgICAkTEcoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoJ2xnLW92ZXJsYXktb3BlbicpO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUucmVzZXRTY3JvbGxCYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEhpZGVTY3JvbGxiYXIoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRMRyhkb2N1bWVudC5ib2R5KS5jc3MoJ3BhZGRpbmctcmlnaHQnLCB0aGlzLmJvZHlQYWRkaW5nUmlnaHQgKyAncHgnKTtcclxuICAgICAgICAkTEcoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoJ2xnLW92ZXJsYXktb3BlbicpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogT3BlbiBsaWdodEdhbGxlcnkuXHJcbiAgICAgKiBPcGVuIGdhbGxlcnkgd2l0aCBzcGVjaWZpYyBzbGlkZSBieSBwYXNzaW5nIGluZGV4IG9mIHRoZSBzbGlkZSBhcyBwYXJhbWV0ZXIuXHJcbiAgICAgKiBAY2F0ZWdvcnkgbEdQdWJsaWNNZXRob2RzXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggIC0gaW5kZXggb2YgdGhlIHNsaWRlXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gV2hpY2ggaW1hZ2UgbGlnaHRHYWxsZXJ5IHNob3VsZCB6b29tIGZyb21cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogY29uc3QgJGR5bmFtaWNHYWxsZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R5bmFtaWMtZ2FsbGVyeS1kZW1vJyk7XHJcbiAgICAgKiBjb25zdCBkeW5hbWljR2FsbGVyeSA9IGxpZ2h0R2FsbGVyeSgkZHluYW1pY0dhbGxlcnksIHtcclxuICAgICAqICAgICBkeW5hbWljOiB0cnVlLFxyXG4gICAgICogICAgIGR5bmFtaWNFbDogW1xyXG4gICAgICogICAgICAgICB7XHJcbiAgICAgKiAgICAgICAgICAgICAgc3JjOiAnaW1nLzEuanBnJyxcclxuICAgICAqICAgICAgICAgICAgICB0aHVtYjogJ2ltZy90aHVtYi0xLmpwZycsXHJcbiAgICAgKiAgICAgICAgICAgICAgc3ViSHRtbDogJzxoND5JbWFnZSAxIHRpdGxlPC9oND48cD5JbWFnZSAxIGRlc2NyaXB0aW9ucy48L3A+JyxcclxuICAgICAqICAgICAgICAgfSxcclxuICAgICAqICAgICAgICAgLi4uXHJcbiAgICAgKiAgICAgXSxcclxuICAgICAqIH0pO1xyXG4gICAgICogJGR5bmFtaWNHYWxsZXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICogICAgIC8vIFN0YXJ0cyB3aXRoIHRoaXJkIGl0ZW0uKE9wdGlvbmFsKS5cclxuICAgICAqICAgICAvLyBUaGlzIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB1c2UgZHluYW1pYyBtb2RlIHdpdGhcclxuICAgICAqICAgICAvLyBjdXN0b20gdGh1bWJuYWlscyAodGh1bWJuYWlscyBvdXRzaWRlIGdhbGxlcnkpLFxyXG4gICAgICogICAgIGR5bmFtaWNHYWxsZXJ5Lm9wZW5HYWxsZXJ5KDIpO1xyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLm9wZW5HYWxsZXJ5ID0gZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IHRoaXMuc2V0dGluZ3MuaW5kZXg7IH1cclxuICAgICAgICAvLyBwcmV2ZW50IGFjY2lkZW50YWwgZG91YmxlIGV4ZWN1dGlvblxyXG4gICAgICAgIGlmICh0aGlzLmxnT3BlbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5sZ09wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vdXRlci5yZW1vdmVDbGFzcygnbGctaGlkZS1pdGVtcycpO1xyXG4gICAgICAgIHRoaXMuaGlkZVNjcm9sbGJhcigpO1xyXG4gICAgICAgIC8vIEFkZCBkaXNwbGF5IGJsb2NrLCBidXQgc3RpbGwgaGFzIG9wYWNpdHkgMFxyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnbGctc2hvdycpO1xyXG4gICAgICAgIHZhciBpdGVtc1RvQmVJbnNlcnRlZFRvRG9tID0gdGhpcy5nZXRJdGVtc1RvQmVJbnNlcnRlZFRvRG9tKGluZGV4LCBpbmRleCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50SXRlbXNJbkRvbSA9IGl0ZW1zVG9CZUluc2VydGVkVG9Eb207XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gJyc7XHJcbiAgICAgICAgaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMgKyAoXCI8ZGl2IGlkPVxcXCJcIiArIGl0ZW0gKyBcIlxcXCIgY2xhc3M9XFxcImxnLWl0ZW1cXFwiPjwvZGl2PlwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLiRpbm5lci5hcHBlbmQoaXRlbXMpO1xyXG4gICAgICAgIHRoaXMuYWRkSHRtbChpbmRleCk7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9ICcnO1xyXG4gICAgICAgIHRoaXMubWVkaWFDb250YWluZXJQb3NpdGlvbiA9IHRoaXMuZ2V0TWVkaWFDb250YWluZXJQb3NpdGlvbigpO1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMubWVkaWFDb250YWluZXJQb3NpdGlvbiwgdG9wID0gX2EudG9wLCBib3R0b20gPSBfYS5ib3R0b207XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFsbG93TWVkaWFPdmVybGFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWVkaWFDb250YWluZXJQb3NpdGlvbih0b3AsIGJvdHRvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBfX3NsaWRlVmlkZW9JbmZvID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdLl9fc2xpZGVWaWRlb0luZm87XHJcbiAgICAgICAgaWYgKHRoaXMuem9vbUZyb21PcmlnaW4gJiYgZWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZVNpemUgPSB1dGlscy5nZXRTaXplKGVsZW1lbnQsIHRoaXMub3V0ZXIsIHRvcCArIGJvdHRvbSwgX19zbGlkZVZpZGVvSW5mbyAmJiB0aGlzLnNldHRpbmdzLnZpZGVvTWF4U2l6ZSk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHV0aWxzLmdldFRyYW5zZm9ybShlbGVtZW50LCB0aGlzLm91dGVyLCB0b3AsIGJvdHRvbSwgdGhpcy5jdXJyZW50SW1hZ2VTaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnpvb21Gcm9tT3JpZ2luIHx8ICF0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5vdXRlci5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnN0YXJ0Q2xhc3MpO1xyXG4gICAgICAgICAgICB0aGlzLmdldFNsaWRlSXRlbShpbmRleCkucmVtb3ZlQ2xhc3MoJ2xnLWNvbXBsZXRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aW1lb3V0ID0gdGhpcy5zZXR0aW5ncy56b29tRnJvbU9yaWdpblxyXG4gICAgICAgICAgICA/IDEwMFxyXG4gICAgICAgICAgICA6IHRoaXMuc2V0dGluZ3MuYmFja2Ryb3BEdXJhdGlvbjtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLWNvbXBvbmVudHMtb3BlbicpO1xyXG4gICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLkxHZWwudHJpZ2dlcihsR0V2ZW50cy5iZWZvcmVPcGVuKTtcclxuICAgICAgICAvLyBhZGQgY2xhc3MgbGctY3VycmVudCB0byByZW1vdmUgaW5pdGlhbCB0cmFuc2l0aW9uXHJcbiAgICAgICAgdGhpcy5nZXRTbGlkZUl0ZW0oaW5kZXgpLmFkZENsYXNzKCdsZy1jdXJyZW50Jyk7XHJcbiAgICAgICAgdGhpcy5sR2FsbGVyeU9uID0gZmFsc2U7XHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgc2Nyb2xsIHRvcCB2YWx1ZSB0byBzY3JvbGwgYmFjayBhZnRlciBjbG9zaW5nIHRoZSBnYWxsZXJ5Li5cclxuICAgICAgICB0aGlzLnByZXZTY3JvbGxUb3AgPSAkTEcod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gTmVlZCB0byBjaGVjayBib3RoIHpvb21Gcm9tT3JpZ2luIGFuZCB0cmFuc2Zvcm0gdmFsdWVzIGFzIHdlIG5lZWQgdG8gc2V0IHNldCB0aGVcclxuICAgICAgICAgICAgLy8gZGVmYXVsdCBvcGVuaW5nIGFuaW1hdGlvbiBpZiB1c2VyIG1pc3NlZCB0byBhZGQgdGhlIGxnLXNpemUgYXR0cmlidXRlXHJcbiAgICAgICAgICAgIGlmIChfdGhpcy56b29tRnJvbU9yaWdpbiAmJiB0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2xpZGVfMSA9IF90aGlzLmdldFNsaWRlSXRlbShpbmRleCk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGVfMS5jc3MoJ3RyYW5zZm9ybScsIHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGVfMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2xnLXN0YXJ0LXByb2dyZXNzIGxnLXN0YXJ0LWVuZC1wcm9ncmVzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ3RyYW5zaXRpb24tZHVyYXRpb24nLCBfdGhpcy5zZXR0aW5ncy5zdGFydEFuaW1hdGlvbkR1cmF0aW9uICsgJ21zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLXpvb20tZnJvbS1pbWFnZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGVfMS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgwLCAwLCAwKScpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLiRiYWNrZHJvcC5hZGRDbGFzcygnaW4nKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ2xnLXNob3ctaW4nKTtcclxuICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zZXR0aW5ncy50cmFwRm9jdXMgJiZcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5ID09PSBfdGhpcy5zZXR0aW5ncy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmFwRm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgX3RoaXMuc2V0dGluZ3MuYmFja2Ryb3BEdXJhdGlvbiArIDUwKTtcclxuICAgICAgICAgICAgLy8gbGctdmlzaWJsZSBjbGFzcyByZXNldHMgZ2FsbGVyeSBvcGFjaXR5IHRvIDFcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy56b29tRnJvbU9yaWdpbiB8fCAhdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5hZGRDbGFzcygnbGctdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgfSwgX3RoaXMuc2V0dGluZ3MuYmFja2Ryb3BEdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaW5pdGlhdGUgc2xpZGUgZnVuY3Rpb25cclxuICAgICAgICAgICAgX3RoaXMuc2xpZGUoaW5kZXgsIGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBfdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuYWZ0ZXJPcGVuKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSA9PT0gdGhpcy5zZXR0aW5ncy5jb250YWluZXIpIHtcclxuICAgICAgICAgICAgJExHKCdodG1sJykuYWRkQ2xhc3MoJ2xnLW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTm90ZSAtIENoYW5naW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgbWVkaWEgb24gZXZlcnkgc2xpZGUgdHJhbnNpdGlvbiBjcmVhdGVzIGEgZmxpY2tlcmluZyBlZmZlY3QuXHJcbiAgICAgKiBUaGVyZWZvcmUswqBUaGUgaGVpZ2h0IG9mIHRoZSBjYXB0aW9uIGlzIGNhbGN1bGF0ZWQgZHluYW1pY2FsbHksIG9ubHkgb25jZSBiYXNlZCBvbiB0aGUgZmlyc3Qgc2xpZGUgY2FwdGlvbi5cclxuICAgICAqIGlmIHlvdSBoYXZlIGR5bmFtaWMgY2FwdGlvbnMgZm9yIGVhY2ggbWVkaWEsXHJcbiAgICAgKiB5b3UgY2FuIHByb3ZpZGUgYW4gYXBwcm9wcmlhdGUgaGVpZ2h0IGZvciB0aGUgY2FwdGlvbnMgdmlhIGFsbG93TWVkaWFPdmVybGFwIG9wdGlvblxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmdldE1lZGlhQ29udGFpbmVyUG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYWxsb3dNZWRpYU92ZXJsYXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRvcCA9IHRoaXMuJHRvb2xiYXIuZ2V0KCkuY2xpZW50SGVpZ2h0IHx8IDA7XHJcbiAgICAgICAgdmFyIHN1Ykh0bWwgPSB0aGlzLm91dGVyLmZpbmQoJy5sZy1jb21wb25lbnRzIC5sZy1zdWItaHRtbCcpLmdldCgpO1xyXG4gICAgICAgIHZhciBjYXB0aW9uSGVpZ2h0ID0gdGhpcy5zZXR0aW5ncy5kZWZhdWx0Q2FwdGlvbkhlaWdodCB8fFxyXG4gICAgICAgICAgICAoc3ViSHRtbCAmJiBzdWJIdG1sLmNsaWVudEhlaWdodCkgfHxcclxuICAgICAgICAgICAgMDtcclxuICAgICAgICB2YXIgdGh1bWJDb250YWluZXIgPSB0aGlzLm91dGVyLmZpbmQoJy5sZy10aHVtYi1vdXRlcicpLmdldCgpO1xyXG4gICAgICAgIHZhciB0aHVtYkhlaWdodCA9IHRodW1iQ29udGFpbmVyID8gdGh1bWJDb250YWluZXIuY2xpZW50SGVpZ2h0IDogMDtcclxuICAgICAgICB2YXIgYm90dG9tID0gdGh1bWJIZWlnaHQgKyBjYXB0aW9uSGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvcDogdG9wLFxyXG4gICAgICAgICAgICBib3R0b206IGJvdHRvbSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuc2V0TWVkaWFDb250YWluZXJQb3NpdGlvbiA9IGZ1bmN0aW9uICh0b3AsIGJvdHRvbSkge1xyXG4gICAgICAgIGlmICh0b3AgPT09IHZvaWQgMCkgeyB0b3AgPSAwOyB9XHJcbiAgICAgICAgaWYgKGJvdHRvbSA9PT0gdm9pZCAwKSB7IGJvdHRvbSA9IDA7IH1cclxuICAgICAgICB0aGlzLiRjb250ZW50LmNzcygndG9wJywgdG9wICsgJ3B4JykuY3NzKCdib3R0b20nLCBib3R0b20gKyAncHgnKTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmhpZGVCYXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gSGlkZSBjb250cm9sbGVycyBpZiBtb3VzZSBkb2Vzbid0IG1vdmUgZm9yIHNvbWUgcGVyaW9kXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1oaWRlLWl0ZW1zJyk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5zZXR0aW5ncy5oaWRlQmFyc0RlbGF5ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3V0ZXIub24oJ21vdXNlbW92ZS5sZyBjbGljay5sZyB0b3VjaHN0YXJ0LmxnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1oaWRlLWl0ZW1zJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmhpZGVCYXJUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaW1lb3V0IHdpbGwgYmUgY2xlYXJlZCBvbiBlYWNoIHNsaWRlIG1vdmVtZW50IGFsc29cclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oaWRlQmFyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5hZGRDbGFzcygnbGctaGlkZS1pdGVtcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIF90aGlzLnNldHRpbmdzLmhpZGVCYXJzRGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci50cmlnZ2VyKCdtb3VzZW1vdmUubGcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuc2V0dGluZ3Muc2hvd0JhcnNBZnRlcik7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5pbml0UGljdHVyZUZpbGwgPSBmdW5jdGlvbiAoJGltZykge1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnN1cHBvcnRMZWdhY3lCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBwaWN0dXJlZmlsbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IFskaW1nLmdldCgpXSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2xpZ2h0R2FsbGVyeSA6LSBJZiB5b3Ugd2FudCBzcmNzZXQgb3IgcGljdHVyZSB0YWcgdG8gYmUgc3VwcG9ydGVkIGZvciBvbGRlciBicm93c2VyIHBsZWFzZSBpbmNsdWRlIHBpY3R1cmVmaWwgamF2YXNjcmlwdCBsaWJyYXJ5IGluIHlvdXIgZG9jdW1lbnQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiAgQGRlc2MgQ3JlYXRlIGltYWdlIGNvdW50ZXJcclxuICAgICAqICBFeDogMS8xMFxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmNvdW50ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY291bnRlcikge1xyXG4gICAgICAgICAgICB2YXIgY291bnRlckh0bWwgPSBcIjxkaXYgY2xhc3M9XFxcImxnLWNvdW50ZXJcXFwiIHJvbGU9XFxcInN0YXR1c1xcXCIgYXJpYS1saXZlPVxcXCJwb2xpdGVcXFwiPlxcbiAgICAgICAgICAgICAgICA8c3BhbiBpZD1cXFwiXCIgKyB0aGlzLmdldElkTmFtZSgnbGctY291bnRlci1jdXJyZW50JykgKyBcIlxcXCIgY2xhc3M9XFxcImxnLWNvdW50ZXItY3VycmVudFxcXCI+XCIgKyAodGhpcy5pbmRleCArIDEpICsgXCIgPC9zcGFuPiAvXFxuICAgICAgICAgICAgICAgIDxzcGFuIGlkPVxcXCJcIiArIHRoaXMuZ2V0SWROYW1lKCdsZy1jb3VudGVyLWFsbCcpICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1jb3VudGVyLWFsbFxcXCI+XCIgKyB0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGggKyBcIiA8L3NwYW4+PC9kaXY+XCI7XHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIuZmluZCh0aGlzLnNldHRpbmdzLmFwcGVuZENvdW50ZXJUbykuYXBwZW5kKGNvdW50ZXJIdG1sKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiAgQGRlc2MgYWRkIHN1Yi1odG1sIGludG8gdGhlIHNsaWRlXHJcbiAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gaW5kZXggb2YgdGhlIHNsaWRlXHJcbiAgICAgKi9cclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuYWRkSHRtbCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBzdWJIdG1sO1xyXG4gICAgICAgIHZhciBzdWJIdG1sVXJsO1xyXG4gICAgICAgIGlmICh0aGlzLmdhbGxlcnlJdGVtc1tpbmRleF0uc3ViSHRtbFVybCkge1xyXG4gICAgICAgICAgICBzdWJIdG1sVXJsID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdLnN1Ykh0bWxVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzdWJIdG1sID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdLnN1Ykh0bWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3ViSHRtbFVybCkge1xyXG4gICAgICAgICAgICBpZiAoc3ViSHRtbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGZpcnN0IGxldHRlciBvZiBzdWItaHRtbFxyXG4gICAgICAgICAgICAgICAgLy8gaWYgZmlyc3QgbGV0dGVyIHN0YXJ0cyB3aXRoIC4gb3IgIyBnZXQgdGhlIGh0bWwgZm9ybSB0aGUgalF1ZXJ5IG9iamVjdFxyXG4gICAgICAgICAgICAgICAgdmFyIGZMID0gc3ViSHRtbC5zdWJzdHJpbmcoMCwgMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZkwgPT09ICcuJyB8fCBmTCA9PT0gJyMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc3ViSHRtbFNlbGVjdG9yUmVsYXRpdmUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2V0dGluZ3MuZHluYW1pYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJIdG1sID0gJExHKHRoaXMuaXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXEoaW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChzdWJIdG1sKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpcnN0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJIdG1sID0gJExHKHN1Ykh0bWwpLmZpcnN0KCkuaHRtbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN1Ykh0bWwgPSAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hcHBlbmRTdWJIdG1sVG8gIT09ICcubGctaXRlbScpIHtcclxuICAgICAgICAgICAgaWYgKHN1Ykh0bWxVcmwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0ZXIuZmluZCgnLmxnLXN1Yi1odG1sJykubG9hZChzdWJIdG1sVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0ZXIuZmluZCgnLmxnLXN1Yi1odG1sJykuaHRtbChzdWJIdG1sKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRTbGlkZSA9ICRMRyh0aGlzLmdldFNsaWRlSXRlbUlkKGluZGV4KSk7XHJcbiAgICAgICAgICAgIGlmIChzdWJIdG1sVXJsKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGUubG9hZChzdWJIdG1sVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZS5hcHBlbmQoXCI8ZGl2IGNsYXNzPVxcXCJsZy1zdWItaHRtbFxcXCI+XCIgKyBzdWJIdG1sICsgXCI8L2Rpdj5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIGxnLWVtcHR5LWh0bWwgY2xhc3MgaWYgdGl0bGUgZG9lc24ndCBleGlzdFxyXG4gICAgICAgIGlmICh0eXBlb2Ygc3ViSHRtbCAhPT0gJ3VuZGVmaW5lZCcgJiYgc3ViSHRtbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoc3ViSHRtbCA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0ZXJcclxuICAgICAgICAgICAgICAgICAgICAuZmluZCh0aGlzLnNldHRpbmdzLmFwcGVuZFN1Ykh0bWxUbylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2xnLWVtcHR5LWh0bWwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0ZXJcclxuICAgICAgICAgICAgICAgICAgICAuZmluZCh0aGlzLnNldHRpbmdzLmFwcGVuZFN1Ykh0bWxUbylcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xnLWVtcHR5LWh0bWwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLkxHZWwudHJpZ2dlcihsR0V2ZW50cy5hZnRlckFwcGVuZFN1Ykh0bWwsIHtcclxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogIEBkZXNjIFByZWxvYWQgc2xpZGVzXHJcbiAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gaW5kZXggb2YgdGhlIHNsaWRlXHJcbiAgICAgKiBAdG9kbyBwcmVsb2FkIG5vdCB3b3JraW5nIGZvciB0aGUgZmlyc3Qgc2xpZGUsIEFsc28sIHNob3VsZCB3b3JrIGZvciB0aGUgZmlyc3QgYW5kIGxhc3Qgc2xpZGUgYXMgd2VsbFxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLnByZWxvYWQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSB0aGlzLnNldHRpbmdzLnByZWxvYWQ7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSB0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGggLSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkQ29udGVudChpbmRleCArIGksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPD0gdGhpcy5zZXR0aW5ncy5wcmVsb2FkOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4IC0gaiA8IDApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubG9hZENvbnRlbnQoaW5kZXggLSBqLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0RHVtbXlJbWdTdHlsZXMgPSBmdW5jdGlvbiAoaW1hZ2VTaXplKSB7XHJcbiAgICAgICAgaWYgKCFpbWFnZVNpemUpXHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICByZXR1cm4gXCJ3aWR0aDpcIiArIGltYWdlU2l6ZS53aWR0aCArIFwicHg7XFxuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtXCIgKyBpbWFnZVNpemUud2lkdGggLyAyICsgXCJweDtcXG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogLVwiICsgaW1hZ2VTaXplLmhlaWdodCAvIDIgKyBcInB4O1xcbiAgICAgICAgICAgICAgICBoZWlnaHQ6XCIgKyBpbWFnZVNpemUuaGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0VmlkZW9Db250U3R5bGUgPSBmdW5jdGlvbiAoaW1hZ2VTaXplKSB7XHJcbiAgICAgICAgaWYgKCFpbWFnZVNpemUpXHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICByZXR1cm4gXCJ3aWR0aDpcIiArIGltYWdlU2l6ZS53aWR0aCArIFwicHg7XFxuICAgICAgICAgICAgICAgIGhlaWdodDpcIiArIGltYWdlU2l6ZS5oZWlnaHQgKyBcInB4XCI7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5nZXREdW1teUltYWdlQ29udGVudCA9IGZ1bmN0aW9uICgkY3VycmVudFNsaWRlLCBpbmRleCwgYWx0KSB7XHJcbiAgICAgICAgdmFyICRjdXJyZW50SXRlbTtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZHluYW1pYykge1xyXG4gICAgICAgICAgICAkY3VycmVudEl0ZW0gPSAkTEcodGhpcy5pdGVtcykuZXEoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBfZHVtbXlJbWdTcmMgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5leFRodW1iSW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgIF9kdW1teUltZ1NyYyA9ICRjdXJyZW50SXRlbS5maW5kKCdpbWcnKS5maXJzdCgpLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2R1bW15SW1nU3JjID0gJGN1cnJlbnRJdGVtLmF0dHIodGhpcy5zZXR0aW5ncy5leFRodW1iSW1hZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghX2R1bW15SW1nU3JjKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB2YXIgaW1nU3R5bGUgPSB0aGlzLmdldER1bW15SW1nU3R5bGVzKHRoaXMuY3VycmVudEltYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgIHZhciBkdW1teUltZ0NvbnRlbnQgPSBcIjxpbWcgXCIgKyBhbHQgKyBcIiBzdHlsZT1cXFwiXCIgKyBpbWdTdHlsZSArIFwiXFxcIiBjbGFzcz1cXFwibGctZHVtbXktaW1nXFxcIiBzcmM9XFxcIlwiICsgX2R1bW15SW1nU3JjICsgXCJcXFwiIC8+XCI7XHJcbiAgICAgICAgICAgICRjdXJyZW50U2xpZGUuYWRkQ2xhc3MoJ2xnLWZpcnN0LXNsaWRlJyk7XHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLWZpcnN0LXNsaWRlLWxvYWRpbmcnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGR1bW15SW1nQ29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuc2V0SW1nTWFya3VwID0gZnVuY3Rpb24gKHNyYywgJGN1cnJlbnRTbGlkZSwgaW5kZXgpIHtcclxuICAgICAgICB2YXIgY3VycmVudEdhbGxlcnlJdGVtID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIHZhciBhbHQgPSBjdXJyZW50R2FsbGVyeUl0ZW0uYWx0LCBzcmNzZXQgPSBjdXJyZW50R2FsbGVyeUl0ZW0uc3Jjc2V0LCBzaXplcyA9IGN1cnJlbnRHYWxsZXJ5SXRlbS5zaXplcywgc291cmNlcyA9IGN1cnJlbnRHYWxsZXJ5SXRlbS5zb3VyY2VzO1xyXG4gICAgICAgIC8vIFVzZSB0aGUgdGh1bWJuYWlsIGFzIGR1bW15IGltYWdlIHdoaWNoIHdpbGwgYmUgcmVzaXplZCB0byBhY3R1YWwgaW1hZ2Ugc2l6ZSBhbmRcclxuICAgICAgICAvLyBkaXNwbGF5ZWQgb24gdG9wIG9mIGFjdHVhbCBpbWFnZVxyXG4gICAgICAgIHZhciBpbWdDb250ZW50ID0gJyc7XHJcbiAgICAgICAgdmFyIGFsdEF0dHIgPSBhbHQgPyAnYWx0PVwiJyArIGFsdCArICdcIicgOiAnJztcclxuICAgICAgICBpZiAodGhpcy5pc0ZpcnN0U2xpZGVXaXRoWm9vbUFuaW1hdGlvbigpKSB7XHJcbiAgICAgICAgICAgIGltZ0NvbnRlbnQgPSB0aGlzLmdldER1bW15SW1hZ2VDb250ZW50KCRjdXJyZW50U2xpZGUsIGluZGV4LCBhbHRBdHRyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGltZ0NvbnRlbnQgPSB1dGlscy5nZXRJbWdNYXJrdXAoaW5kZXgsIHNyYywgYWx0QXR0ciwgc3Jjc2V0LCBzaXplcywgc291cmNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbWdNYXJrdXAgPSBcIjxwaWN0dXJlIGNsYXNzPVxcXCJsZy1pbWctd3JhcFxcXCI+IFwiICsgaW1nQ29udGVudCArIFwiPC9waWN0dXJlPlwiO1xyXG4gICAgICAgICRjdXJyZW50U2xpZGUucHJlcGVuZChpbWdNYXJrdXApO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUub25TbGlkZU9iamVjdExvYWQgPSBmdW5jdGlvbiAoJHNsaWRlLCBpc0hUTUw1VmlkZW9XaXRob3V0UG9zdGVyLCBvbkxvYWQsIG9uRXJyb3IpIHtcclxuICAgICAgICB2YXIgbWVkaWFPYmplY3QgPSAkc2xpZGUuZmluZCgnLmxnLW9iamVjdCcpLmZpcnN0KCk7XHJcbiAgICAgICAgaWYgKHV0aWxzLmlzSW1hZ2VMb2FkZWQobWVkaWFPYmplY3QuZ2V0KCkpIHx8XHJcbiAgICAgICAgICAgIGlzSFRNTDVWaWRlb1dpdGhvdXRQb3N0ZXIpIHtcclxuICAgICAgICAgICAgb25Mb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZWRpYU9iamVjdC5vbignbG9hZC5sZyBlcnJvci5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uTG9hZCAmJiBvbkxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1lZGlhT2JqZWN0Lm9uKCdlcnJvci5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IgJiYgb25FcnJvcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICRlbCBDdXJyZW50IHNsaWRlIGl0ZW1cclxuICAgICAqIEBwYXJhbSBpbmRleFxyXG4gICAgICogQHBhcmFtIGRlbGF5IERlbGF5IGlzIDAgZXhjZXB0IGZpcnN0IHRpbWVcclxuICAgICAqIEBwYXJhbSBzcGVlZCBTcGVlZCBpcyBzYW1lIGFzIGRlbGF5LCBleGNlcHQgaXQgaXMgMCBpZiBnYWxsZXJ5IGlzIG9wZW5lZCB2aWEgaGFzaCBwbHVnaW5cclxuICAgICAqIEBwYXJhbSBpc0ZpcnN0U2xpZGVcclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5vbkxnT2JqZWN0TG9hZCA9IGZ1bmN0aW9uIChjdXJyZW50U2xpZGUsIGluZGV4LCBkZWxheSwgc3BlZWQsIGlzRmlyc3RTbGlkZSwgaXNIVE1MNVZpZGVvV2l0aG91dFBvc3Rlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5vblNsaWRlT2JqZWN0TG9hZChjdXJyZW50U2xpZGUsIGlzSFRNTDVWaWRlb1dpdGhvdXRQb3N0ZXIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudHJpZ2dlclNsaWRlSXRlbUxvYWQoY3VycmVudFNsaWRlLCBpbmRleCwgZGVsYXksIHNwZWVkLCBpc0ZpcnN0U2xpZGUpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY3VycmVudFNsaWRlLmFkZENsYXNzKCdsZy1jb21wbGV0ZSBsZy1jb21wbGV0ZV8nKTtcclxuICAgICAgICAgICAgY3VycmVudFNsaWRlLmh0bWwoJzxzcGFuIGNsYXNzPVwibGctZXJyb3ItbXNnXCI+JyArXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5ncy5zdHJpbmdzWydtZWRpYUxvYWRpbmdGYWlsZWQnXSArXHJcbiAgICAgICAgICAgICAgICAnPC9zcGFuPicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUudHJpZ2dlclNsaWRlSXRlbUxvYWQgPSBmdW5jdGlvbiAoJGN1cnJlbnRTbGlkZSwgaW5kZXgsIGRlbGF5LCBzcGVlZCwgaXNGaXJzdFNsaWRlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY3VycmVudEdhbGxlcnlJdGVtID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIC8vIEFkZGluZyBkZWxheSBmb3IgdmlkZW8gc2xpZGVzIHdpdGhvdXQgcG9zdGVyIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UgYW5kIHVzZXIgZXhwZXJpZW5jZVxyXG4gICAgICAgIC8vIFZpZGVvcyBzaG91bGQgc3RhcnQgcGxheWluZyBvbmNlIG9uY2UgdGhlIGdhbGxlcnkgaXMgY29tcGxldGVseSBsb2FkZWRcclxuICAgICAgICB2YXIgX3NwZWVkID0gaXNGaXJzdFNsaWRlICYmXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2xpZGVUeXBlKGN1cnJlbnRHYWxsZXJ5SXRlbSkgPT09ICd2aWRlbycgJiZcclxuICAgICAgICAgICAgIWN1cnJlbnRHYWxsZXJ5SXRlbS5wb3N0ZXJcclxuICAgICAgICAgICAgPyBzcGVlZFxyXG4gICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdXJyZW50U2xpZGUuYWRkQ2xhc3MoJ2xnLWNvbXBsZXRlIGxnLWNvbXBsZXRlXycpO1xyXG4gICAgICAgICAgICBfdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuc2xpZGVJdGVtTG9hZCwge1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgZGVsYXk6IGRlbGF5IHx8IDAsXHJcbiAgICAgICAgICAgICAgICBpc0ZpcnN0U2xpZGU6IGlzRmlyc3RTbGlkZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgX3NwZWVkKTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmlzRmlyc3RTbGlkZVdpdGhab29tQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhISghdGhpcy5sR2FsbGVyeU9uICYmXHJcbiAgICAgICAgICAgIHRoaXMuem9vbUZyb21PcmlnaW4gJiZcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VTaXplKTtcclxuICAgIH07XHJcbiAgICAvLyBBZGQgdmlkZW8gc2xpZGVJbmZvXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmFkZFNsaWRlVmlkZW9JbmZvID0gZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xyXG4gICAgICAgICAgICBlbGVtZW50Ll9fc2xpZGVWaWRlb0luZm8gPSB1dGlscy5pc1ZpZGVvKGVsZW1lbnQuc3JjLCAhIWVsZW1lbnQudmlkZW8sIGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuX19zbGlkZVZpZGVvSW5mbyAmJlxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3MubG9hZFlvdVR1YmVQb3N0ZXIgJiZcclxuICAgICAgICAgICAgICAgICFlbGVtZW50LnBvc3RlciAmJlxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5fX3NsaWRlVmlkZW9JbmZvLnlvdXR1YmUpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucG9zdGVyID0gXCIvL2ltZy55b3V0dWJlLmNvbS92aS9cIiArIGVsZW1lbnQuX19zbGlkZVZpZGVvSW5mby55b3V0dWJlWzFdICsgXCIvbWF4cmVzZGVmYXVsdC5qcGdcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogIExvYWQgc2xpZGUgY29udGVudCBpbnRvIHNsaWRlLlxyXG4gICAgICogIFRoaXMgaXMgdXNlZCB0byBsb2FkIGNvbnRlbnQgaW50byBzbGlkZXMgdGhhdCBpcyBub3QgdmlzaWJsZSB0b29cclxuICAgICAqICBAcGFyYW0ge051bWJlcn0gaW5kZXggLSBpbmRleCBvZiB0aGUgc2xpZGUuXHJcbiAgICAgKiAgQHBhcmFtIHtCb29sZWFufSByZWMgLSBpZiB0cnVlIGNhbGwgbG9hZGNvbnRlbnQoKSBmdW5jdGlvbiBhZ2Fpbi5cclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5sb2FkQ29udGVudCA9IGZ1bmN0aW9uIChpbmRleCwgcmVjKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY3VycmVudEdhbGxlcnlJdGVtID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIHZhciAkY3VycmVudFNsaWRlID0gJExHKHRoaXMuZ2V0U2xpZGVJdGVtSWQoaW5kZXgpKTtcclxuICAgICAgICB2YXIgcG9zdGVyID0gY3VycmVudEdhbGxlcnlJdGVtLnBvc3Rlciwgc3Jjc2V0ID0gY3VycmVudEdhbGxlcnlJdGVtLnNyY3NldCwgc2l6ZXMgPSBjdXJyZW50R2FsbGVyeUl0ZW0uc2l6ZXMsIHNvdXJjZXMgPSBjdXJyZW50R2FsbGVyeUl0ZW0uc291cmNlcztcclxuICAgICAgICB2YXIgc3JjID0gY3VycmVudEdhbGxlcnlJdGVtLnNyYztcclxuICAgICAgICB2YXIgdmlkZW8gPSBjdXJyZW50R2FsbGVyeUl0ZW0udmlkZW87XHJcbiAgICAgICAgdmFyIF9odG1sNVZpZGVvID0gdmlkZW8gJiYgdHlwZW9mIHZpZGVvID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UodmlkZW8pIDogdmlkZW87XHJcbiAgICAgICAgaWYgKGN1cnJlbnRHYWxsZXJ5SXRlbS5yZXNwb25zaXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBzcmNEeUl0bXMgPSBjdXJyZW50R2FsbGVyeUl0ZW0ucmVzcG9uc2l2ZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBzcmMgPSB1dGlscy5nZXRSZXNwb25zaXZlU3JjKHNyY0R5SXRtcykgfHwgc3JjO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdmlkZW9JbmZvID0gY3VycmVudEdhbGxlcnlJdGVtLl9fc2xpZGVWaWRlb0luZm87XHJcbiAgICAgICAgdmFyIGxnVmlkZW9TdHlsZSA9ICcnO1xyXG4gICAgICAgIHZhciBpZnJhbWUgPSAhIWN1cnJlbnRHYWxsZXJ5SXRlbS5pZnJhbWU7XHJcbiAgICAgICAgdmFyIGlzRmlyc3RTbGlkZSA9ICF0aGlzLmxHYWxsZXJ5T247XHJcbiAgICAgICAgLy8gZGVsYXkgZm9yIGFkZGluZyBjb21wbGV0ZSBjbGFzcy4gaXQgaXMgMCBleGNlcHQgZmlyc3QgdGltZS5cclxuICAgICAgICB2YXIgZGVsYXkgPSAwO1xyXG4gICAgICAgIGlmIChpc0ZpcnN0U2xpZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZyb21PcmlnaW4gJiYgdGhpcy5jdXJyZW50SW1hZ2VTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxheSA9IHRoaXMuc2V0dGluZ3Muc3RhcnRBbmltYXRpb25EdXJhdGlvbiArIDEwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVsYXkgPSB0aGlzLnNldHRpbmdzLmJhY2tkcm9wRHVyYXRpb24gKyAxMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISRjdXJyZW50U2xpZGUuaGFzQ2xhc3MoJ2xnLWxvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgIGlmICh2aWRlb0luZm8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBfYSA9IHRoaXMubWVkaWFDb250YWluZXJQb3NpdGlvbiwgdG9wXzIgPSBfYS50b3AsIGJvdHRvbSA9IF9hLmJvdHRvbTtcclxuICAgICAgICAgICAgICAgIHZhciB2aWRlb1NpemUgPSB1dGlscy5nZXRTaXplKHRoaXMuaXRlbXNbaW5kZXhdLCB0aGlzLm91dGVyLCB0b3BfMiArIGJvdHRvbSwgdmlkZW9JbmZvICYmIHRoaXMuc2V0dGluZ3MudmlkZW9NYXhTaXplKTtcclxuICAgICAgICAgICAgICAgIGxnVmlkZW9TdHlsZSA9IHRoaXMuZ2V0VmlkZW9Db250U3R5bGUodmlkZW9TaXplKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaWZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya3VwID0gdXRpbHMuZ2V0SWZyYW1lTWFya3VwKHRoaXMuc2V0dGluZ3MuaWZyYW1lV2lkdGgsIHRoaXMuc2V0dGluZ3MuaWZyYW1lSGVpZ2h0LCB0aGlzLnNldHRpbmdzLmlmcmFtZU1heFdpZHRoLCB0aGlzLnNldHRpbmdzLmlmcmFtZU1heEhlaWdodCwgc3JjLCBjdXJyZW50R2FsbGVyeUl0ZW0uaWZyYW1lVGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgJGN1cnJlbnRTbGlkZS5wcmVwZW5kKG1hcmt1cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocG9zdGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZHVtbXlJbWcgPSAnJztcclxuICAgICAgICAgICAgICAgIHZhciBoYXNTdGFydEFuaW1hdGlvbiA9IGlzRmlyc3RTbGlkZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbUZyb21PcmlnaW4gJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZVNpemU7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzU3RhcnRBbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBkdW1teUltZyA9IHRoaXMuZ2V0RHVtbXlJbWFnZUNvbnRlbnQoJGN1cnJlbnRTbGlkZSwgaW5kZXgsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBtYXJrdXAgPSB1dGlscy5nZXRWaWRlb1Bvc3Rlck1hcmt1cChwb3N0ZXIsIGR1bW15SW1nIHx8ICcnLCBsZ1ZpZGVvU3R5bGUsIHRoaXMuc2V0dGluZ3Muc3RyaW5nc1sncGxheVZpZGVvJ10sIHZpZGVvSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAkY3VycmVudFNsaWRlLnByZXBlbmQobWFya3VwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh2aWRlb0luZm8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrdXAgPSBcIjxkaXYgY2xhc3M9XFxcImxnLXZpZGVvLWNvbnQgXFxcIiBzdHlsZT1cXFwiXCIgKyBsZ1ZpZGVvU3R5bGUgKyBcIlxcXCI+PC9kaXY+XCI7XHJcbiAgICAgICAgICAgICAgICAkY3VycmVudFNsaWRlLnByZXBlbmQobWFya3VwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW1nTWFya3VwKHNyYywgJGN1cnJlbnRTbGlkZSwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNyY3NldCB8fCBzb3VyY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRpbWcgPSAkY3VycmVudFNsaWRlLmZpbmQoJy5sZy1vYmplY3QnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRQaWN0dXJlRmlsbCgkaW1nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocG9zdGVyIHx8IHZpZGVvSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuaGFzVmlkZW8sIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBzcmMsXHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbDVWaWRlbzogX2h0bWw1VmlkZW8sXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzUG9zdGVyOiAhIXBvc3RlcixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmFmdGVyQXBwZW5kU2xpZGUsIHsgaW5kZXg6IGluZGV4IH0pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sR2FsbGVyeU9uICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFwcGVuZFN1Ykh0bWxUbyA9PT0gJy5sZy1pdGVtJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRIdG1sKGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGb3IgZmlyc3QgdGltZSBhZGQgc29tZSBkZWxheSBmb3IgZGlzcGxheWluZyB0aGUgc3RhcnQgYW5pbWF0aW9uLlxyXG4gICAgICAgIHZhciBfc3BlZWQgPSAwO1xyXG4gICAgICAgIC8vIERvIG5vdCBjaGFuZ2UgdGhlIGRlbGF5IHZhbHVlIGJlY2F1c2UgaXQgaXMgcmVxdWlyZWQgZm9yIHpvb20gcGx1Z2luLlxyXG4gICAgICAgIC8vIElmIGdhbGxlcnkgb3BlbmVkIGZyb20gZGlyZWN0IHVybCAoaGFzaCkgc3BlZWQgdmFsdWUgc2hvdWxkIGJlIDBcclxuICAgICAgICBpZiAoZGVsYXkgJiYgISRMRyhkb2N1bWVudC5ib2R5KS5oYXNDbGFzcygnbGctZnJvbS1oYXNoJykpIHtcclxuICAgICAgICAgICAgX3NwZWVkID0gZGVsYXk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE9ubHkgZm9yIGZpcnN0IHNsaWRlIGFuZCB6b29tRnJvbU9yaWdpbiBpcyBlbmFibGVkXHJcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJzdFNsaWRlV2l0aFpvb21BbmltYXRpb24oKSkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRjdXJyZW50U2xpZGVcclxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xnLXN0YXJ0LWVuZC1wcm9ncmVzcyBsZy1zdGFydC1wcm9ncmVzcycpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMuc2V0dGluZ3Muc3RhcnRBbmltYXRpb25EdXJhdGlvbiArIDEwMCk7XHJcbiAgICAgICAgICAgIGlmICghJGN1cnJlbnRTbGlkZS5oYXNDbGFzcygnbGctbG9hZGVkJykpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5nZXRTbGlkZVR5cGUoY3VycmVudEdhbGxlcnlJdGVtKSA9PT0gJ2ltYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWx0ID0gY3VycmVudEdhbGxlcnlJdGVtLmFsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsdEF0dHIgPSBhbHQgPyAnYWx0PVwiJyArIGFsdCArICdcIicgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnRTbGlkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5sZy1pbWctd3JhcCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHV0aWxzLmdldEltZ01hcmt1cChpbmRleCwgc3JjLCBhbHRBdHRyLCBzcmNzZXQsIHNpemVzLCBjdXJyZW50R2FsbGVyeUl0ZW0uc291cmNlcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Jjc2V0IHx8IHNvdXJjZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJGN1cnJlbnRTbGlkZS5maW5kKCcubGctb2JqZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0UGljdHVyZUZpbGwoJGltZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmdldFNsaWRlVHlwZShjdXJyZW50R2FsbGVyeUl0ZW0pID09PSAnaW1hZ2UnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChfdGhpcy5nZXRTbGlkZVR5cGUoY3VycmVudEdhbGxlcnlJdGVtKSA9PT0gJ3ZpZGVvJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkxnT2JqZWN0TG9hZCgkY3VycmVudFNsaWRlLCBpbmRleCwgZGVsYXksIF9zcGVlZCwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2FkIHJlbWFpbmluZyBzbGlkZXMgb25jZSB0aGUgc2xpZGUgaXMgY29tcGxldGVseSBsb2FkZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25TbGlkZU9iamVjdExvYWQoJGN1cnJlbnRTbGlkZSwgISEodmlkZW9JbmZvICYmIHZpZGVvSW5mby5odG1sNSAmJiAhcG9zdGVyKSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZENvbnRlbnRPbkZpcnN0U2xpZGVMb2FkKGluZGV4LCAkY3VycmVudFNsaWRlLCBfc3BlZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkQ29udGVudE9uRmlyc3RTbGlkZUxvYWQoaW5kZXgsICRjdXJyZW50U2xpZGUsIF9zcGVlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHRoaXMuc2V0dGluZ3Muc3RhcnRBbmltYXRpb25EdXJhdGlvbiArIDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU0xpZGUgY29udGVudCBoYXMgYmVlbiBhZGRlZCB0byBkb21cclxuICAgICAgICAkY3VycmVudFNsaWRlLmFkZENsYXNzKCdsZy1sb2FkZWQnKTtcclxuICAgICAgICBpZiAoIXRoaXMuaXNGaXJzdFNsaWRlV2l0aFpvb21BbmltYXRpb24oKSB8fFxyXG4gICAgICAgICAgICAodGhpcy5nZXRTbGlkZVR5cGUoY3VycmVudEdhbGxlcnlJdGVtKSA9PT0gJ3ZpZGVvJyAmJiAhcG9zdGVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTGdPYmplY3RMb2FkKCRjdXJyZW50U2xpZGUsIGluZGV4LCBkZWxheSwgX3NwZWVkLCBpc0ZpcnN0U2xpZGUsICEhKHZpZGVvSW5mbyAmJiB2aWRlb0luZm8uaHRtbDUgJiYgIXBvc3RlcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXaGVuIGdhbGxlcnkgaXMgb3BlbmVkIG9uY2UgY29udGVudCBpcyBsb2FkZWQgKHNlY29uZCB0aW1lKSBuZWVkIHRvIGFkZCBsZy1jb21wbGV0ZSBjbGFzcyBmb3IgY3NzIHN0eWxpbmdcclxuICAgICAgICBpZiAoKCF0aGlzLnpvb21Gcm9tT3JpZ2luIHx8ICF0aGlzLmN1cnJlbnRJbWFnZVNpemUpICYmXHJcbiAgICAgICAgICAgICRjdXJyZW50U2xpZGUuaGFzQ2xhc3MoJ2xnLWNvbXBsZXRlXycpICYmXHJcbiAgICAgICAgICAgICF0aGlzLmxHYWxsZXJ5T24pIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkY3VycmVudFNsaWRlLmFkZENsYXNzKCdsZy1jb21wbGV0ZScpO1xyXG4gICAgICAgICAgICB9LCB0aGlzLnNldHRpbmdzLmJhY2tkcm9wRHVyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDb250ZW50IGxvYWRlZFxyXG4gICAgICAgIC8vIE5lZWQgdG8gc2V0IGxHYWxsZXJ5T24gYmVmb3JlIGNhbGxpbmcgcHJlbG9hZCBmdW5jdGlvblxyXG4gICAgICAgIHRoaXMubEdhbGxlcnlPbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKHJlYyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoISRjdXJyZW50U2xpZGUuaGFzQ2xhc3MoJ2xnLWNvbXBsZXRlXycpKSB7XHJcbiAgICAgICAgICAgICAgICAkY3VycmVudFNsaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5sZy1vYmplY3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdsb2FkLmxnIGVycm9yLmxnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByZWxvYWQoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWQoaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQGRlc2MgUmVtb3ZlIGR1bW15IGltYWdlIGNvbnRlbnQgYW5kIGxvYWQgbmV4dCBzbGlkZXNcclxuICAgICAqIENhbGxlZCBvbmx5IGZvciB0aGUgZmlyc3QgdGltZSBpZiB6b29tRnJvbU9yaWdpbiBhbmltYXRpb24gaXMgZW5hYmxlZFxyXG4gICAgICogQHBhcmFtIGluZGV4XHJcbiAgICAgKiBAcGFyYW0gJGN1cnJlbnRTbGlkZVxyXG4gICAgICogQHBhcmFtIHNwZWVkXHJcbiAgICAgKi9cclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUubG9hZENvbnRlbnRPbkZpcnN0U2xpZGVMb2FkID0gZnVuY3Rpb24gKGluZGV4LCAkY3VycmVudFNsaWRlLCBzcGVlZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdXJyZW50U2xpZGUuZmluZCgnLmxnLWR1bW15LWltZycpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAkY3VycmVudFNsaWRlLnJlbW92ZUNsYXNzKCdsZy1maXJzdC1zbGlkZScpO1xyXG4gICAgICAgICAgICBfdGhpcy5vdXRlci5yZW1vdmVDbGFzcygnbGctZmlyc3Qtc2xpZGUtbG9hZGluZycpO1xyXG4gICAgICAgICAgICBfdGhpcy5pc0R1bW15SW1hZ2VSZW1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMucHJlbG9hZChpbmRleCk7XHJcbiAgICAgICAgfSwgc3BlZWQgKyAzMDApO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0SXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbSA9IGZ1bmN0aW9uIChpbmRleCwgcHJldkluZGV4LCBudW1iZXJPZkl0ZW1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAobnVtYmVyT2ZJdGVtcyA9PT0gdm9pZCAwKSB7IG51bWJlck9mSXRlbXMgPSAwOyB9XHJcbiAgICAgICAgdmFyIGl0ZW1zVG9CZUluc2VydGVkVG9Eb20gPSBbXTtcclxuICAgICAgICAvLyBNaW5pbXVtIDIgaXRlbXMgc2hvdWxkIGJlIHRoZXJlXHJcbiAgICAgICAgdmFyIHBvc3NpYmxlTnVtYmVyT2ZJdGVtcyA9IE1hdGgubWF4KG51bWJlck9mSXRlbXMsIDMpO1xyXG4gICAgICAgIHBvc3NpYmxlTnVtYmVyT2ZJdGVtcyA9IE1hdGgubWluKHBvc3NpYmxlTnVtYmVyT2ZJdGVtcywgdGhpcy5nYWxsZXJ5SXRlbXMubGVuZ3RoKTtcclxuICAgICAgICB2YXIgcHJldkluZGV4SXRlbSA9IFwibGctaXRlbS1cIiArIHRoaXMubGdJZCArIFwiLVwiICsgcHJldkluZGV4O1xyXG4gICAgICAgIGlmICh0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGggPD0gMykge1xyXG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChfZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zVG9CZUluc2VydGVkVG9Eb20ucHVzaChcImxnLWl0ZW0tXCIgKyBfdGhpcy5sZ0lkICsgXCItXCIgKyBpbmRleCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluZGV4IDwgKHRoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCAtIDEpIC8gMikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHggPSBpbmRleDsgaWR4ID4gaW5kZXggLSBwb3NzaWJsZU51bWJlck9mSXRlbXMgLyAyICYmIGlkeCA+PSAwOyBpZHgtLSkge1xyXG4gICAgICAgICAgICAgICAgaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbS5wdXNoKFwibGctaXRlbS1cIiArIHRoaXMubGdJZCArIFwiLVwiICsgaWR4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbnVtYmVyT2ZFeGlzdGluZ0l0ZW1zID0gaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHBvc3NpYmxlTnVtYmVyT2ZJdGVtcyAtIG51bWJlck9mRXhpc3RpbmdJdGVtczsgaWR4KyspIHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zVG9CZUluc2VydGVkVG9Eb20ucHVzaChcImxnLWl0ZW0tXCIgKyB0aGlzLmxnSWQgKyBcIi1cIiArIChpbmRleCArIGlkeCArIDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaWR4ID0gaW5kZXg7IGlkeCA8PSB0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGggLSAxICYmXHJcbiAgICAgICAgICAgICAgICBpZHggPCBpbmRleCArIHBvc3NpYmxlTnVtYmVyT2ZJdGVtcyAvIDI7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtc1RvQmVJbnNlcnRlZFRvRG9tLnB1c2goXCJsZy1pdGVtLVwiICsgdGhpcy5sZ0lkICsgXCItXCIgKyBpZHgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBudW1iZXJPZkV4aXN0aW5nSXRlbXMgPSBpdGVtc1RvQmVJbnNlcnRlZFRvRG9tLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgcG9zc2libGVOdW1iZXJPZkl0ZW1zIC0gbnVtYmVyT2ZFeGlzdGluZ0l0ZW1zOyBpZHgrKykge1xyXG4gICAgICAgICAgICAgICAgaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbS5wdXNoKFwibGctaXRlbS1cIiArIHRoaXMubGdJZCArIFwiLVwiICsgKGluZGV4IC0gaWR4IC0gMSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxvb3ApIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSB0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtc1RvQmVJbnNlcnRlZFRvRG9tLnB1c2goXCJsZy1pdGVtLVwiICsgdGhpcy5sZ0lkICsgXCItXCIgKyAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbS5wdXNoKFwibGctaXRlbS1cIiArIHRoaXMubGdJZCArIFwiLVwiICsgKHRoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbS5pbmRleE9mKHByZXZJbmRleEl0ZW0pID09PSAtMSkge1xyXG4gICAgICAgICAgICBpdGVtc1RvQmVJbnNlcnRlZFRvRG9tLnB1c2goXCJsZy1pdGVtLVwiICsgdGhpcy5sZ0lkICsgXCItXCIgKyBwcmV2SW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLm9yZ2FuaXplU2xpZGVJdGVtcyA9IGZ1bmN0aW9uIChpbmRleCwgcHJldkluZGV4KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgaXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbSA9IHRoaXMuZ2V0SXRlbXNUb0JlSW5zZXJ0ZWRUb0RvbShpbmRleCwgcHJldkluZGV4LCB0aGlzLnNldHRpbmdzLm51bWJlck9mU2xpZGVJdGVtc0luRG9tKTtcclxuICAgICAgICBpdGVtc1RvQmVJbnNlcnRlZFRvRG9tLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmN1cnJlbnRJdGVtc0luRG9tLmluZGV4T2YoaXRlbSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy4kaW5uZXIuYXBwZW5kKFwiPGRpdiBpZD1cXFwiXCIgKyBpdGVtICsgXCJcXFwiIGNsYXNzPVxcXCJsZy1pdGVtXFxcIj48L2Rpdj5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJdGVtc0luRG9tLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW1zVG9CZUluc2VydGVkVG9Eb20uaW5kZXhPZihpdGVtKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICRMRyhcIiNcIiArIGl0ZW0pLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zVG9CZUluc2VydGVkVG9Eb207XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcHJldmlvdXMgaW5kZXggb2YgdGhlIHNsaWRlXHJcbiAgICAgKi9cclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0UHJldmlvdXNTbGlkZUluZGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcmV2SW5kZXggPSAwO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbUlkID0gdGhpcy5vdXRlclxyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5sZy1jdXJyZW50JylcclxuICAgICAgICAgICAgICAgIC5maXJzdCgpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnKTtcclxuICAgICAgICAgICAgcHJldkluZGV4ID0gcGFyc2VJbnQoY3VycmVudEl0ZW1JZC5zcGxpdCgnLScpWzNdKSB8fCAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcHJldkluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByZXZJbmRleDtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLnNldERvd25sb2FkVmFsdWUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kb3dubG9hZCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudEdhbGxlcnlJdGVtID0gdGhpcy5nYWxsZXJ5SXRlbXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB2YXIgaGlkZURvd25sb2FkQnRuID0gY3VycmVudEdhbGxlcnlJdGVtLmRvd25sb2FkVXJsID09PSBmYWxzZSB8fFxyXG4gICAgICAgICAgICAgICAgY3VycmVudEdhbGxlcnlJdGVtLmRvd25sb2FkVXJsID09PSAnZmFsc2UnO1xyXG4gICAgICAgICAgICBpZiAoaGlkZURvd25sb2FkQnRuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm91dGVyLmFkZENsYXNzKCdsZy1oaWRlLWRvd25sb2FkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJGRvd25sb2FkID0gdGhpcy5nZXRFbGVtZW50QnlJZCgnbGctZG93bmxvYWQnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLWhpZGUtZG93bmxvYWQnKTtcclxuICAgICAgICAgICAgICAgICRkb3dubG9hZC5hdHRyKCdocmVmJywgY3VycmVudEdhbGxlcnlJdGVtLmRvd25sb2FkVXJsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdhbGxlcnlJdGVtLnNyYyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEdhbGxlcnlJdGVtLmRvd25sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGRvd25sb2FkLmF0dHIoJ2Rvd25sb2FkJywgY3VycmVudEdhbGxlcnlJdGVtLmRvd25sb2FkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLm1ha2VTbGlkZUFuaW1hdGlvbiA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGN1cnJlbnRTbGlkZUl0ZW0sIHByZXZpb3VzU2xpZGVJdGVtKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5sR2FsbGVyeU9uKSB7XHJcbiAgICAgICAgICAgIHByZXZpb3VzU2xpZGVJdGVtLmFkZENsYXNzKCdsZy1zbGlkZS1wcm9ncmVzcycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGFsbCB0cmFuc2l0aW9uc1xyXG4gICAgICAgICAgICBfdGhpcy5vdXRlci5hZGRDbGFzcygnbGctbm8tdHJhbnMnKTtcclxuICAgICAgICAgICAgX3RoaXMub3V0ZXJcclxuICAgICAgICAgICAgICAgIC5maW5kKCcubGctaXRlbScpXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xnLXByZXYtc2xpZGUgbGctbmV4dC1zbGlkZScpO1xyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncHJldicpIHtcclxuICAgICAgICAgICAgICAgIC8vcHJldnNsaWRlXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGVJdGVtLmFkZENsYXNzKCdsZy1wcmV2LXNsaWRlJyk7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1NsaWRlSXRlbS5hZGRDbGFzcygnbGctbmV4dC1zbGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbmV4dCBzbGlkZVxyXG4gICAgICAgICAgICAgICAgY3VycmVudFNsaWRlSXRlbS5hZGRDbGFzcygnbGctbmV4dC1zbGlkZScpO1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNTbGlkZUl0ZW0uYWRkQ2xhc3MoJ2xnLXByZXYtc2xpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBnaXZlIDUwIG1zIGZvciBicm93c2VyIHRvIGFkZC9yZW1vdmUgY2xhc3NcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5maW5kKCcubGctaXRlbScpLnJlbW92ZUNsYXNzKCdsZy1jdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2xpZGVJdGVtLmFkZENsYXNzKCdsZy1jdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAvLyByZXNldCBhbGwgdHJhbnNpdGlvbnNcclxuICAgICAgICAgICAgICAgIF90aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1uby10cmFucycpO1xyXG4gICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgfSwgdGhpcy5sR2FsbGVyeU9uID8gdGhpcy5zZXR0aW5ncy5zbGlkZURlbGF5IDogMCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHb3RvIGEgc3BlY2lmaWMgc2xpZGUuXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggLSBpbmRleCBvZiB0aGUgc2xpZGVcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZnJvbVRvdWNoIC0gdHJ1ZSBpZiBzbGlkZSBmdW5jdGlvbiBjYWxsZWQgdmlhIHRvdWNoIGV2ZW50IG9yIG1vdXNlIGRyYWdcclxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZnJvbVRodW1iIC0gdHJ1ZSBpZiBzbGlkZSBmdW5jdGlvbiBjYWxsZWQgdmlhIHRodW1ibmFpbCBjbGlja1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiAtIERpcmVjdGlvbiBvZiB0aGUgc2xpZGUobmV4dC9wcmV2KVxyXG4gICAgICogQGNhdGVnb3J5IGxHUHVibGljTWV0aG9kc1xyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqICBjb25zdCBwbHVnaW4gPSBsaWdodEdhbGxlcnkoKTtcclxuICAgICAqICAvLyB0byBnbyB0byAzcmQgc2xpZGVcclxuICAgICAqICBwbHVnaW4uc2xpZGUoMik7XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLnNsaWRlID0gZnVuY3Rpb24gKGluZGV4LCBmcm9tVG91Y2gsIGZyb21UaHVtYiwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcHJldkluZGV4ID0gdGhpcy5nZXRQcmV2aW91c1NsaWRlSW5kZXgoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJdGVtc0luRG9tID0gdGhpcy5vcmdhbml6ZVNsaWRlSXRlbXMoaW5kZXgsIHByZXZJbmRleCk7XHJcbiAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBjYWxsLCBSZXF1aXJlZCBmb3IgaHNoIHBsdWdpblxyXG4gICAgICAgIGlmICh0aGlzLmxHYWxsZXJ5T24gJiYgcHJldkluZGV4ID09PSBpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBudW1iZXJPZkdhbGxlcnlJdGVtcyA9IHRoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aDtcclxuICAgICAgICBpZiAoIXRoaXMubGdCdXN5KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNvdW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudENvdW50ZXIoaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2xpZGVJdGVtID0gdGhpcy5nZXRTbGlkZUl0ZW0oaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNTbGlkZUl0ZW1fMSA9IHRoaXMuZ2V0U2xpZGVJdGVtKHByZXZJbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50R2FsbGVyeUl0ZW0gPSB0aGlzLmdhbGxlcnlJdGVtc1tpbmRleF07XHJcbiAgICAgICAgICAgIHZhciB2aWRlb0luZm8gPSBjdXJyZW50R2FsbGVyeUl0ZW0uX19zbGlkZVZpZGVvSW5mbztcclxuICAgICAgICAgICAgdGhpcy5vdXRlci5hdHRyKCdkYXRhLWxnLXNsaWRlLXR5cGUnLCB0aGlzLmdldFNsaWRlVHlwZShjdXJyZW50R2FsbGVyeUl0ZW0pKTtcclxuICAgICAgICAgICAgdGhpcy5zZXREb3dubG9hZFZhbHVlKGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKHZpZGVvSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hID0gdGhpcy5tZWRpYUNvbnRhaW5lclBvc2l0aW9uLCB0b3BfMyA9IF9hLnRvcCwgYm90dG9tID0gX2EuYm90dG9tO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvU2l6ZSA9IHV0aWxzLmdldFNpemUodGhpcy5pdGVtc1tpbmRleF0sIHRoaXMub3V0ZXIsIHRvcF8zICsgYm90dG9tLCB2aWRlb0luZm8gJiYgdGhpcy5zZXR0aW5ncy52aWRlb01heFNpemUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVWaWRlb1NsaWRlKGluZGV4LCB2aWRlb1NpemUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmJlZm9yZVNsaWRlLCB7XHJcbiAgICAgICAgICAgICAgICBwcmV2SW5kZXg6IHByZXZJbmRleCxcclxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgICAgIGZyb21Ub3VjaDogISFmcm9tVG91Y2gsXHJcbiAgICAgICAgICAgICAgICBmcm9tVGh1bWI6ICEhZnJvbVRodW1iLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5sZ0J1c3kgPSB0cnVlO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlQmFyVGltZW91dCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyb3dEaXNhYmxlKGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IHByZXZJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdwcmV2JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID4gcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gJ25leHQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZnJvbVRvdWNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VTbGlkZUFuaW1hdGlvbihkaXJlY3Rpb24sIGN1cnJlbnRTbGlkZUl0ZW0sIHByZXZpb3VzU2xpZGVJdGVtXzEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRlclxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCcubGctaXRlbScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdsZy1wcmV2LXNsaWRlIGxnLWN1cnJlbnQgbGctbmV4dC1zbGlkZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoUHJldiA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIHZhciB0b3VjaE5leHQgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyT2ZHYWxsZXJ5SXRlbXMgPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hQcmV2ID0gaW5kZXggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdWNoTmV4dCA9IGluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDAgJiYgcHJldkluZGV4ID09PSBudW1iZXJPZkdhbGxlcnlJdGVtcyAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBzbGlkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaE5leHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaFByZXYgPSBudW1iZXJPZkdhbGxlcnlJdGVtcyAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSBudW1iZXJPZkdhbGxlcnlJdGVtcyAtIDEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXYgc2xpZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hOZXh0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hQcmV2ID0gbnVtYmVyT2ZHYWxsZXJ5SXRlbXMgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdWNoUHJldiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hOZXh0ID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdwcmV2Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2xpZGVJdGVtKHRvdWNoTmV4dCkuYWRkQ2xhc3MoJ2xnLW5leHQtc2xpZGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2xpZGVJdGVtKHRvdWNoUHJldikuYWRkQ2xhc3MoJ2xnLXByZXYtc2xpZGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTbGlkZUl0ZW0uYWRkQ2xhc3MoJ2xnLWN1cnJlbnQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEbyBub3QgcHV0IGxvYWQgY29udGVudCBpbiBzZXQgdGltZW91dCBhcyBpdCBuZWVkcyB0byBsb2FkIGltbWVkaWF0ZWx5IHdoZW4gdGhlIGdhbGxlcnkgaXMgb3BlbmVkXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5sR2FsbGVyeU9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDb250ZW50KGluZGV4LCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRDb250ZW50KGluZGV4LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGl0bGUgaWYgdGhpcy5zZXR0aW5ncy5hcHBlbmRTdWJIdG1sVG8gPT09IGxnLXN1Yi1odG1sXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnNldHRpbmdzLmFwcGVuZFN1Ykh0bWxUbyAhPT0gJy5sZy1pdGVtJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRIdG1sKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLnNldHRpbmdzLnNwZWVkICsgNTAgKyAoZnJvbVRvdWNoID8gMCA6IHRoaXMuc2V0dGluZ3Muc2xpZGVEZWxheSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubGdCdXN5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1NsaWRlSXRlbV8xLnJlbW92ZUNsYXNzKCdsZy1zbGlkZS1wcm9ncmVzcycpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmFmdGVyU2xpZGUsIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2SW5kZXg6IHByZXZJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbVRvdWNoOiBmcm9tVG91Y2gsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbVRodW1iOiBmcm9tVGh1bWIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgKHRoaXMubEdhbGxlcnlPbiA/IHRoaXMuc2V0dGluZ3Muc3BlZWQgKyAxMDAgOiAxMDApICsgKGZyb21Ub3VjaCA/IDAgOiB0aGlzLnNldHRpbmdzLnNsaWRlRGVsYXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUudXBkYXRlQ3VycmVudENvdW50ZXIgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1jb3VudGVyLWN1cnJlbnQnKS5odG1sKGluZGV4ICsgMSArICcnKTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLnVwZGF0ZUNvdW50ZXJUb3RhbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1jb3VudGVyLWFsbCcpLmh0bWwodGhpcy5nYWxsZXJ5SXRlbXMubGVuZ3RoICsgJycpO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZ2V0U2xpZGVUeXBlID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS5fX3NsaWRlVmlkZW9JbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndmlkZW8nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpdGVtLmlmcmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2lmcmFtZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2ltYWdlJztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS50b3VjaE1vdmUgPSBmdW5jdGlvbiAoc3RhcnRDb29yZHMsIGVuZENvb3JkcywgZSkge1xyXG4gICAgICAgIHZhciBkaXN0YW5jZVggPSBlbmRDb29yZHMucGFnZVggLSBzdGFydENvb3Jkcy5wYWdlWDtcclxuICAgICAgICB2YXIgZGlzdGFuY2VZID0gZW5kQ29vcmRzLnBhZ2VZIC0gc3RhcnRDb29yZHMucGFnZVk7XHJcbiAgICAgICAgdmFyIGFsbG93U3dpcGUgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5zd2lwZURpcmVjdGlvbikge1xyXG4gICAgICAgICAgICBhbGxvd1N3aXBlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZVgpID4gMTUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVEaXJlY3Rpb24gPSAnaG9yaXpvbnRhbCc7XHJcbiAgICAgICAgICAgICAgICBhbGxvd1N3aXBlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChNYXRoLmFicyhkaXN0YW5jZVkpID4gMTUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVEaXJlY3Rpb24gPSAndmVydGljYWwnO1xyXG4gICAgICAgICAgICAgICAgYWxsb3dTd2lwZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhbGxvd1N3aXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyICRjdXJyZW50U2xpZGUgPSB0aGlzLmdldFNsaWRlSXRlbSh0aGlzLmluZGV4KTtcclxuICAgICAgICBpZiAodGhpcy5zd2lwZURpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICAgIGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAvLyByZXNldCBvcGFjaXR5IGFuZCB0cmFuc2l0aW9uIGR1cmF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLWRyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgIC8vIG1vdmUgY3VycmVudCBzbGlkZVxyXG4gICAgICAgICAgICB0aGlzLnNldFRyYW5zbGF0ZSgkY3VycmVudFNsaWRlLCBkaXN0YW5jZVgsIDApO1xyXG4gICAgICAgICAgICAvLyBtb3ZlIG5leHQgYW5kIHByZXYgc2xpZGUgd2l0aCBjdXJyZW50IHNsaWRlXHJcbiAgICAgICAgICAgIHZhciB3aWR0aCA9ICRjdXJyZW50U2xpZGUuZ2V0KCkub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZVdpZHRoQW1vdW50ID0gKHdpZHRoICogMTUpIC8gMTAwO1xyXG4gICAgICAgICAgICB2YXIgZ3V0dGVyID0gc2xpZGVXaWR0aEFtb3VudCAtIE1hdGguYWJzKChkaXN0YW5jZVggKiAxMCkgLyAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLnNldFRyYW5zbGF0ZSh0aGlzLm91dGVyLmZpbmQoJy5sZy1wcmV2LXNsaWRlJykuZmlyc3QoKSwgLXdpZHRoICsgZGlzdGFuY2VYIC0gZ3V0dGVyLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUodGhpcy5vdXRlci5maW5kKCcubGctbmV4dC1zbGlkZScpLmZpcnN0KCksIHdpZHRoICsgZGlzdGFuY2VYICsgZ3V0dGVyLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zd2lwZURpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zd2lwZVRvQ2xvc2UpIHtcclxuICAgICAgICAgICAgICAgIGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKCdsZy1kcmFnZ2luZy12ZXJ0aWNhbCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wYWNpdHkgPSAxIC0gTWF0aC5hYnMoZGlzdGFuY2VZKSAvIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuJGJhY2tkcm9wLmNzcygnb3BhY2l0eScsIG9wYWNpdHkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gMSAtIE1hdGguYWJzKGRpc3RhbmNlWSkgLyAod2luZG93LmlubmVyV2lkdGggKiAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKCRjdXJyZW50U2xpZGUsIDAsIGRpc3RhbmNlWSwgc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZVkpID4gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2xnLWhpZGUtaXRlbXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xnLWNvbXBvbmVudHMtb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUudG91Y2hFbmQgPSBmdW5jdGlvbiAoZW5kQ29vcmRzLCBzdGFydENvb3JkcywgZXZlbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkaXN0YW5jZTtcclxuICAgICAgICAvLyBrZWVwIHNsaWRlIGFuaW1hdGlvbiBmb3IgYW55IG1vZGUgd2hpbGUgZHJhZ2cvc3dpcGVcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2RlICE9PSAnbGctc2xpZGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLXNsaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNldCB0cmFuc2l0aW9uIGR1cmF0aW9uXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ2xnLWRyYWdnaW5nLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgICAgIF90aGlzLm91dGVyXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2xnLWRyYWdnaW5nIGxnLWhpZGUtaXRlbXMnKVxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdsZy1jb21wb25lbnRzLW9wZW4nKTtcclxuICAgICAgICAgICAgdmFyIHRyaWdnZXJDbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5zd2lwZURpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGVuZENvb3Jkcy5wYWdlWCAtIHN0YXJ0Q29vcmRzLnBhZ2VYO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlQWJzID0gTWF0aC5hYnMoZW5kQ29vcmRzLnBhZ2VYIC0gc3RhcnRDb29yZHMucGFnZVgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlQWJzID4gX3RoaXMuc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5nb1RvTmV4dFNsaWRlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJDbGljayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlzdGFuY2UgPiAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VBYnMgPiBfdGhpcy5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmdvVG9QcmV2U2xpZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckNsaWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMuc3dpcGVEaXJlY3Rpb24gPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoZW5kQ29vcmRzLnBhZ2VZIC0gc3RhcnRDb29yZHMucGFnZVkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnNldHRpbmdzLmNsb3NhYmxlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3Muc3dpcGVUb0Nsb3NlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPiAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZUdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kYmFja2Ryb3AuY3NzKCdvcGFjaXR5JywgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMub3V0ZXIuZmluZCgnLmxnLWl0ZW0nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICBpZiAodHJpZ2dlckNsaWNrICYmXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhlbmRDb29yZHMucGFnZVggLSBzdGFydENvb3Jkcy5wYWdlWCkgPCA1KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIGNsaWNrIGlmIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiA1IHBpeFxyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICRMRyhldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzUG9zdGVyRWxlbWVudCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLnBvc3RlckNsaWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zd2lwZURpcmVjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZW1vdmUgc2xpZGUgY2xhc3Mgb25jZSBkcmFnL3N3aXBlIGlzIGNvbXBsZXRlZCBpZiBtb2RlIGlzIG5vdCBzbGlkZVxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLm91dGVyLmhhc0NsYXNzKCdsZy1kcmFnZ2luZycpICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5ncy5tb2RlICE9PSAnbGctc2xpZGUnKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5yZW1vdmVDbGFzcygnbGctc2xpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMuc2V0dGluZ3Muc3BlZWQgKyAxMDApO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZW5hYmxlU3dpcGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RhcnRDb29yZHMgPSB7fTtcclxuICAgICAgICB2YXIgZW5kQ29vcmRzID0ge307XHJcbiAgICAgICAgdmFyIGlzTW92ZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgaXNTd2lwaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlU3dpcGUpIHtcclxuICAgICAgICAgICAgdGhpcy4kaW5uZXIub24oJ3RvdWNoc3RhcnQubGcnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZHJhZ09yU3dpcGVFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9IF90aGlzLmdldFNsaWRlSXRlbShfdGhpcy5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKCRMRyhlLnRhcmdldCkuaGFzQ2xhc3MoJ2xnLWl0ZW0nKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICRpdGVtLmdldCgpLmNvbnRhaW5zKGUudGFyZ2V0KSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAhX3RoaXMub3V0ZXIuaGFzQ2xhc3MoJ2xnLXpvb21lZCcpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIV90aGlzLmxnQnVzeSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGUudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc1N3aXBpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdWNoQWN0aW9uID0gJ3N3aXBlJztcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5tYW5hZ2VTd2lwZUNsYXNzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDb29yZHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VYOiBlLnRvdWNoZXNbMF0ucGFnZVgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VZOiBlLnRvdWNoZXNbMF0ucGFnZVksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuJGlubmVyLm9uKCd0b3VjaG1vdmUubGcnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzU3dpcGluZyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdWNoQWN0aW9uID09PSAnc3dpcGUnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZENvb3JkcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVg6IGUudG91Y2hlc1swXS5wYWdlWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVk6IGUudG91Y2hlc1swXS5wYWdlWSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdWNoTW92ZShzdGFydENvb3JkcywgZW5kQ29vcmRzLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICBpc01vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuJGlubmVyLm9uKCd0b3VjaGVuZC5sZycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnRvdWNoQWN0aW9uID09PSAnc3dpcGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTW92ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50b3VjaEVuZChlbmRDb29yZHMsIHN0YXJ0Q29vcmRzLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzU3dpcGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJExHKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1Bvc3RlckVsZW1lbnQodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLnBvc3RlckNsaWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50b3VjaEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBpc1N3aXBpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZW5hYmxlRHJhZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdGFydENvb3JkcyA9IHt9O1xyXG4gICAgICAgIHZhciBlbmRDb29yZHMgPSB7fTtcclxuICAgICAgICB2YXIgaXNEcmFnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGlzTW92ZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVEcmFnKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIub24oJ21vdXNlZG93bi5sZycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kcmFnT3JTd2lwZUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyICRpdGVtID0gX3RoaXMuZ2V0U2xpZGVJdGVtKF90aGlzLmluZGV4KTtcclxuICAgICAgICAgICAgICAgIGlmICgkTEcoZS50YXJnZXQpLmhhc0NsYXNzKCdsZy1pdGVtJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAkaXRlbS5nZXQoKS5jb250YWlucyhlLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLm91dGVyLmhhc0NsYXNzKCdsZy16b29tZWQnKSAmJiAhX3RoaXMubGdCdXN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5sZ0J1c3kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm1hbmFnZVN3aXBlQ2xhc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0Q29vcmRzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VYOiBlLnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VZOiBlLnBhZ2VZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRHJhZ2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAqKiBGaXggZm9yIHdlYmtpdCBjdXJzb3IgaXNzdWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI2NzIzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5nZXQoKS5zY3JvbGxMZWZ0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5nZXQoKS5zY3JvbGxMZWZ0IC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbGctZ3JhYicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdsZy1ncmFiYmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmRyYWdTdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkTEcod2luZG93KS5vbihcIm1vdXNlbW92ZS5sZy5nbG9iYWxcIiArIHRoaXMubGdJZCwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc0RyYWdpbmcgJiYgX3RoaXMubGdPcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc01vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBlbmRDb29yZHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VYOiBlLnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlWTogZS5wYWdlWSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdWNoTW92ZShzdGFydENvb3JkcywgZW5kQ29vcmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuZHJhZ01vdmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJExHKHdpbmRvdykub24oXCJtb3VzZXVwLmxnLmdsb2JhbFwiICsgdGhpcy5sZ0lkLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMubGdPcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJExHKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNNb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTW92ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50b3VjaEVuZChlbmRDb29yZHMsIHN0YXJ0Q29vcmRzLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmRyYWdFbmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMuaXNQb3N0ZXJFbGVtZW50KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMucG9zdGVyQ2xpY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCBleGVjdXRpb24gb24gY2xpY2tcclxuICAgICAgICAgICAgICAgIGlmIChpc0RyYWdpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc0RyYWdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5yZW1vdmVDbGFzcygnbGctZ3JhYmJpbmcnKS5hZGRDbGFzcygnbGctZ3JhYicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS50cmlnZ2VyUG9zdGVyQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLiRpbm5lci5vbignY2xpY2subGcnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5kcmFnT3JTd2lwZUVuYWJsZWQgJiZcclxuICAgICAgICAgICAgICAgIF90aGlzLmlzUG9zdGVyRWxlbWVudCgkTEcoZXZlbnQudGFyZ2V0KSkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLkxHZWwudHJpZ2dlcihsR0V2ZW50cy5wb3N0ZXJDbGljayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLm1hbmFnZVN3aXBlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90b3VjaE5leHQgPSB0aGlzLmluZGV4ICsgMTtcclxuICAgICAgICB2YXIgX3RvdWNoUHJldiA9IHRoaXMuaW5kZXggLSAxO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxvb3AgJiYgdGhpcy5nYWxsZXJ5SXRlbXMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgX3RvdWNoUHJldiA9IHRoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5nYWxsZXJ5SXRlbXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgX3RvdWNoTmV4dCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vdXRlci5maW5kKCcubGctaXRlbScpLnJlbW92ZUNsYXNzKCdsZy1uZXh0LXNsaWRlIGxnLXByZXYtc2xpZGUnKTtcclxuICAgICAgICBpZiAoX3RvdWNoUHJldiA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2xpZGVJdGVtKF90b3VjaFByZXYpLmFkZENsYXNzKCdsZy1wcmV2LXNsaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2V0U2xpZGVJdGVtKF90b3VjaE5leHQpLmFkZENsYXNzKCdsZy1uZXh0LXNsaWRlJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHbyB0byBuZXh0IHNsaWRlXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZyb21Ub3VjaCAtIHRydWUgaWYgc2xpZGUgZnVuY3Rpb24gY2FsbGVkIHZpYSB0b3VjaCBldmVudFxyXG4gICAgICogQGNhdGVnb3J5IGxHUHVibGljTWV0aG9kc1xyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqICBjb25zdCBwbHVnaW4gPSBsaWdodEdhbGxlcnkoKTtcclxuICAgICAqICBwbHVnaW4uZ29Ub05leHRTbGlkZSgpO1xyXG4gICAgICogQHNlZSA8YSBocmVmPVwiL2RlbW9zL21ldGhvZHMvXCI+RGVtbzwvYT5cclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5nb1RvTmV4dFNsaWRlID0gZnVuY3Rpb24gKGZyb21Ub3VjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9sb29wID0gdGhpcy5zZXR0aW5ncy5sb29wO1xyXG4gICAgICAgIGlmIChmcm9tVG91Y2ggJiYgdGhpcy5nYWxsZXJ5SXRlbXMubGVuZ3RoIDwgMykge1xyXG4gICAgICAgICAgICBfbG9vcCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGdCdXN5KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmluZGV4ICsgMSA8IHRoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuYmVmb3JlTmV4dFNsaWRlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUodGhpcy5pbmRleCwgISFmcm9tVG91Y2gsIGZhbHNlLCAnbmV4dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9sb29wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuYmVmb3JlTmV4dFNsaWRlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUodGhpcy5pbmRleCwgISFmcm9tVG91Y2gsIGZhbHNlLCAnbmV4dCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5zbGlkZUVuZEFuaW1hdGlvbiAmJiAhZnJvbVRvdWNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRlci5hZGRDbGFzcygnbGctcmlnaHQtZW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1yaWdodC1lbmQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCA0MDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR28gdG8gcHJldmlvdXMgc2xpZGVzXHJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZyb21Ub3VjaCAtIHRydWUgaWYgc2xpZGUgZnVuY3Rpb24gY2FsbGVkIHZpYSB0b3VjaCBldmVudFxyXG4gICAgICogQGNhdGVnb3J5IGxHUHVibGljTWV0aG9kc1xyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqICBjb25zdCBwbHVnaW4gPSBsaWdodEdhbGxlcnkoe30pO1xyXG4gICAgICogIHBsdWdpbi5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICAgKiBAc2VlIDxhIGhyZWY9XCIvZGVtb3MvbWV0aG9kcy9cIj5EZW1vPC9hPlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5nb1RvUHJldlNsaWRlID0gZnVuY3Rpb24gKGZyb21Ub3VjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9sb29wID0gdGhpcy5zZXR0aW5ncy5sb29wO1xyXG4gICAgICAgIGlmIChmcm9tVG91Y2ggJiYgdGhpcy5nYWxsZXJ5SXRlbXMubGVuZ3RoIDwgMykge1xyXG4gICAgICAgICAgICBfbG9vcCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGdCdXN5KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleC0tO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuYmVmb3JlUHJldlNsaWRlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbVRvdWNoOiBmcm9tVG91Y2gsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUodGhpcy5pbmRleCwgISFmcm9tVG91Y2gsIGZhbHNlLCAncHJldicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9sb29wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5MR2VsLnRyaWdnZXIobEdFdmVudHMuYmVmb3JlUHJldlNsaWRlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tVG91Y2g6IGZyb21Ub3VjaCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlKHRoaXMuaW5kZXgsICEhZnJvbVRvdWNoLCBmYWxzZSwgJ3ByZXYnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc2V0dGluZ3Muc2xpZGVFbmRBbmltYXRpb24gJiYgIWZyb21Ub3VjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLWxlZnQtZW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy1sZWZ0LWVuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDQwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5rZXlQcmVzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICRMRyh3aW5kb3cpLm9uKFwia2V5ZG93bi5sZy5nbG9iYWxcIiArIHRoaXMubGdJZCwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmxnT3BlbmVkICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXR0aW5ncy5lc2NLZXkgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zZXR0aW5ncy5hbGxvd01lZGlhT3ZlcmxhcCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm91dGVyLmhhc0NsYXNzKCdsZy1jYW4tdG9nZ2xlJykgJiZcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5oYXNDbGFzcygnbGctY29tcG9uZW50cy1vcGVuJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vdXRlci5yZW1vdmVDbGFzcygnbGctY29tcG9uZW50cy1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZUdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMubGdPcGVuZWQgJiYgX3RoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmdvVG9QcmV2U2xpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmdvVG9OZXh0U2xpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuYXJyb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1wcmV2Jykub24oJ2NsaWNrLmxnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50QnlJZCgnbGctbmV4dCcpLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZ29Ub05leHRTbGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuYXJyb3dEaXNhYmxlID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy8gRGlzYWJsZSBhcnJvd3MgaWYgc2V0dGluZ3MuaGlkZUNvbnRyb2xPbkVuZCBpcyB0cnVlXHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmxvb3AgJiYgdGhpcy5zZXR0aW5ncy5oaWRlQ29udHJvbE9uRW5kKSB7XHJcbiAgICAgICAgICAgIHZhciAkcHJldiA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoJ2xnLXByZXYnKTtcclxuICAgICAgICAgICAgdmFyICRuZXh0ID0gdGhpcy5nZXRFbGVtZW50QnlJZCgnbGctbmV4dCcpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggKyAxID09PSB0aGlzLmdhbGxlcnlJdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRuZXh0LmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkbmV4dC5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJHByZXYuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRwcmV2LnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5zZXRUcmFuc2xhdGUgPSBmdW5jdGlvbiAoJGVsLCB4VmFsdWUsIHlWYWx1ZSwgc2NhbGVYLCBzY2FsZVkpIHtcclxuICAgICAgICBpZiAoc2NhbGVYID09PSB2b2lkIDApIHsgc2NhbGVYID0gMTsgfVxyXG4gICAgICAgIGlmIChzY2FsZVkgPT09IHZvaWQgMCkgeyBzY2FsZVkgPSAxOyB9XHJcbiAgICAgICAgJGVsLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKCcgK1xyXG4gICAgICAgICAgICB4VmFsdWUgK1xyXG4gICAgICAgICAgICAncHgsICcgK1xyXG4gICAgICAgICAgICB5VmFsdWUgK1xyXG4gICAgICAgICAgICAncHgsIDBweCkgc2NhbGUzZCgnICtcclxuICAgICAgICAgICAgc2NhbGVYICtcclxuICAgICAgICAgICAgJywgJyArXHJcbiAgICAgICAgICAgIHNjYWxlWSArXHJcbiAgICAgICAgICAgICcsIDEpJyk7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5tb3VzZXdoZWVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGxhc3RDYWxsID0gMDtcclxuICAgICAgICB0aGlzLm91dGVyLm9uKCd3aGVlbC5sZycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghZS5kZWx0YVkgfHwgX3RoaXMuZ2FsbGVyeUl0ZW1zLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgaWYgKG5vdyAtIGxhc3RDYWxsIDwgMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhc3RDYWxsID0gbm93O1xyXG4gICAgICAgICAgICBpZiAoZS5kZWx0YVkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nb1RvTmV4dFNsaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZS5kZWx0YVkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmlzU2xpZGVFbGVtZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiAodGFyZ2V0Lmhhc0NsYXNzKCdsZy1vdXRlcicpIHx8XHJcbiAgICAgICAgICAgIHRhcmdldC5oYXNDbGFzcygnbGctaXRlbScpIHx8XHJcbiAgICAgICAgICAgIHRhcmdldC5oYXNDbGFzcygnbGctaW1nLXdyYXAnKSk7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5pc1Bvc3RlckVsZW1lbnQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHBsYXlCdXR0b24gPSB0aGlzLmdldFNsaWRlSXRlbSh0aGlzLmluZGV4KVxyXG4gICAgICAgICAgICAuZmluZCgnLmxnLXZpZGVvLXBsYXktYnV0dG9uJylcclxuICAgICAgICAgICAgLmdldCgpO1xyXG4gICAgICAgIHJldHVybiAodGFyZ2V0Lmhhc0NsYXNzKCdsZy12aWRlby1wb3N0ZXInKSB8fFxyXG4gICAgICAgICAgICB0YXJnZXQuaGFzQ2xhc3MoJ2xnLXZpZGVvLXBsYXktYnV0dG9uJykgfHxcclxuICAgICAgICAgICAgKHBsYXlCdXR0b24gJiYgcGxheUJ1dHRvbi5jb250YWlucyh0YXJnZXQuZ2V0KCkpKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXhpbWl6ZSBtaW5pbWl6ZSBpbmxpbmUgZ2FsbGVyeS5cclxuICAgICAqIEBjYXRlZ29yeSBsR1B1YmxpY01ldGhvZHNcclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS50b2dnbGVNYXhpbWl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudEJ5SWQoJ2xnLW1heGltaXplJykub24oJ2NsaWNrLmxnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy4kY29udGFpbmVyLnRvZ2dsZUNsYXNzKCdsZy1pbmxpbmUnKTtcclxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaE9uUmVzaXplKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5pbnZhbGlkYXRlSXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5pdGVtc1tpbmRleF07XHJcbiAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICRMRyhlbGVtZW50KTtcclxuICAgICAgICAgICAgJGVsZW1lbnQub2ZmKFwiY2xpY2subGdjdXN0b20taXRlbS1cIiArICRlbGVtZW50LmF0dHIoJ2RhdGEtbGctaWQnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUudHJhcEZvY3VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kY29udGFpbmVyLmdldCgpLmZvY3VzKHtcclxuICAgICAgICAgICAgcHJldmVudFNjcm9sbDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICAkTEcod2luZG93KS5vbihcImtleWRvd24ubGcuZ2xvYmFsXCIgKyB0aGlzLmxnSWQsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMubGdPcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaXNUYWJQcmVzc2VkID0gZS5rZXkgPT09ICdUYWInIHx8IGUua2V5Q29kZSA9PT0gOTtcclxuICAgICAgICAgICAgaWYgKCFpc1RhYlByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZm9jdXNhYmxlRWxzID0gdXRpbHMuZ2V0Rm9jdXNhYmxlRWxlbWVudHMoX3RoaXMuJGNvbnRhaW5lci5nZXQoKSk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdEZvY3VzYWJsZUVsID0gZm9jdXNhYmxlRWxzWzBdO1xyXG4gICAgICAgICAgICB2YXIgbGFzdEZvY3VzYWJsZUVsID0gZm9jdXNhYmxlRWxzW2ZvY3VzYWJsZUVscy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBmaXJzdEZvY3VzYWJsZUVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdEZvY3VzYWJsZUVsLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3RGb2N1c2FibGVFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0Rm9jdXNhYmxlRWwuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLm1hbmFnZUNsb3NlR2FsbGVyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5jbG9zYWJsZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHZhciBtb3VzZWRvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmdldEVsZW1lbnRCeUlkKCdsZy1jbG9zZScpLm9uKCdjbGljay5sZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY2xvc2VHYWxsZXJ5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY2xvc2VPblRhcCkge1xyXG4gICAgICAgICAgICAvLyBJZiB5b3UgZHJhZyB0aGUgc2xpZGUgYW5kIHJlbGVhc2Ugb3V0c2lkZSBnYWxsZXJ5IGdldHMgY2xvc2Ugb24gY2hyb21lXHJcbiAgICAgICAgICAgIC8vIGZvciBwcmV2ZW50aW5nIHRoaXMgY2hlY2sgbW91c2Vkb3duIGFuZCBtb3VzZXVwIGhhcHBlbmVkIG9uIC5sZy1pdGVtIG9yIGxnLW91dGVyXHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIub24oJ21vdXNlZG93bi5sZycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJExHKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1NsaWRlRWxlbWVudCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2Vkb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vdXRlci5vbignbW91c2Vtb3ZlLmxnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbW91c2Vkb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLm91dGVyLm9uKCdtb3VzZXVwLmxnJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkTEcoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzU2xpZGVFbGVtZW50KHRhcmdldCkgJiYgbW91c2Vkb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5vdXRlci5oYXNDbGFzcygnbGctZHJhZ2dpbmcnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZUdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlIGxpZ2h0R2FsbGVyeSBpZiBpdCBpcyBvcGVuZWQuXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIElmIGNsb3NhYmxlIGlzIGZhbHNlIGluIHRoZSBzZXR0aW5ncywgeW91IG5lZWQgdG8gcGFzcyB0cnVlIHZpYSBjbG9zZUdhbGxlcnkgbWV0aG9kIHRvIGZvcmNlIGNsb3NlIGdhbGxlcnlcclxuICAgICAqIEByZXR1cm4gcmV0dXJucyB0aGUgZXN0aW1hdGVkIHRpbWUgdG8gY2xvc2UgZ2FsbGVyeSBjb21wbGV0ZWx5IGluY2x1ZGluZyB0aGUgY2xvc2UgYW5pbWF0aW9uIGR1cmF0aW9uXHJcbiAgICAgKiBAY2F0ZWdvcnkgbEdQdWJsaWNNZXRob2RzXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogIGNvbnN0IHBsdWdpbiA9IGxpZ2h0R2FsbGVyeSgpO1xyXG4gICAgICogIHBsdWdpbi5jbG9zZUdhbGxlcnkoKTtcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuY2xvc2VHYWxsZXJ5ID0gZnVuY3Rpb24gKGZvcmNlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMubGdPcGVuZWQgfHwgKCF0aGlzLnNldHRpbmdzLmNsb3NhYmxlICYmICFmb3JjZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLmJlZm9yZUNsb3NlKTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5yZXNldFNjcm9sbFBvc2l0aW9uICYmICF0aGlzLnNldHRpbmdzLmhpZGVTY3JvbGxiYXIpIHtcclxuICAgICAgICAgICAgJExHKHdpbmRvdykuc2Nyb2xsVG9wKHRoaXMucHJldlNjcm9sbFRvcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRoaXMuaXRlbXNbdGhpcy5pbmRleF07XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybTtcclxuICAgICAgICBpZiAodGhpcy56b29tRnJvbU9yaWdpbiAmJiBjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSB0aGlzLm1lZGlhQ29udGFpbmVyUG9zaXRpb24sIHRvcF80ID0gX2EudG9wLCBib3R0b20gPSBfYS5ib3R0b207XHJcbiAgICAgICAgICAgIHZhciBfYiA9IHRoaXMuZ2FsbGVyeUl0ZW1zW3RoaXMuaW5kZXhdLCBfX3NsaWRlVmlkZW9JbmZvID0gX2IuX19zbGlkZVZpZGVvSW5mbywgcG9zdGVyID0gX2IucG9zdGVyO1xyXG4gICAgICAgICAgICB2YXIgaW1hZ2VTaXplID0gdXRpbHMuZ2V0U2l6ZShjdXJyZW50SXRlbSwgdGhpcy5vdXRlciwgdG9wXzQgKyBib3R0b20sIF9fc2xpZGVWaWRlb0luZm8gJiYgcG9zdGVyICYmIHRoaXMuc2V0dGluZ3MudmlkZW9NYXhTaXplKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gdXRpbHMuZ2V0VHJhbnNmb3JtKGN1cnJlbnRJdGVtLCB0aGlzLm91dGVyLCB0b3BfNCwgYm90dG9tLCBpbWFnZVNpemUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy56b29tRnJvbU9yaWdpbiAmJiB0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5vdXRlci5hZGRDbGFzcygnbGctY2xvc2luZyBsZy16b29tLWZyb20taW1hZ2UnKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTbGlkZUl0ZW0odGhpcy5pbmRleClcclxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnbGctc3RhcnQtZW5kLXByb2dyZXNzJylcclxuICAgICAgICAgICAgICAgIC5jc3MoJ3RyYW5zaXRpb24tZHVyYXRpb24nLCB0aGlzLnNldHRpbmdzLnN0YXJ0QW5pbWF0aW9uRHVyYXRpb24gKyAnbXMnKVxyXG4gICAgICAgICAgICAgICAgLmNzcygndHJhbnNmb3JtJywgdHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub3V0ZXIuYWRkQ2xhc3MoJ2xnLWhpZGUtaXRlbXMnKTtcclxuICAgICAgICAgICAgLy8gbGctem9vbS1mcm9tLWltYWdlIGlzIHVzZWQgZm9yIHNldHRpbmcgdGhlIG9wYWNpdHkgdG8gMSBpZiB6b29tRnJvbU9yaWdpbiBpcyB0cnVlXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBjbG9zaW5nIGl0ZW0gZG9lc24ndCBoYXZlIHRoZSBsZy1zaXplIGF0dHJpYnV0ZSwgcmVtb3ZlIHRoaXMgY2xhc3MgdG8gYXZvaWQgdGhlIGNsb3NpbmcgY3NzIGNvbmZsaWN0c1xyXG4gICAgICAgICAgICB0aGlzLm91dGVyLnJlbW92ZUNsYXNzKCdsZy16b29tLWZyb20taW1hZ2UnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVW5iaW5kIGFsbCBldmVudHMgYWRkZWQgYnkgbGlnaHRHYWxsZXJ5XHJcbiAgICAgICAgLy8gQHRvZG9cclxuICAgICAgICAvL3RoaXMuJGVsLm9mZignLmxnLnRtJyk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95TW9kdWxlcygpO1xyXG4gICAgICAgIHRoaXMubEdhbGxlcnlPbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNEdW1teUltYWdlUmVtb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuem9vbUZyb21PcmlnaW4gPSB0aGlzLnNldHRpbmdzLnpvb21Gcm9tT3JpZ2luO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVCYXJUaW1lb3V0KTtcclxuICAgICAgICB0aGlzLmhpZGVCYXJUaW1lb3V0ID0gZmFsc2U7XHJcbiAgICAgICAgJExHKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2xnLW9uJyk7XHJcbiAgICAgICAgdGhpcy5vdXRlci5yZW1vdmVDbGFzcygnbGctdmlzaWJsZSBsZy1jb21wb25lbnRzLW9wZW4nKTtcclxuICAgICAgICAvLyBSZXNldHRpbmcgb3BhY2l0eSB0byAwIGlzZCByZXF1aXJlZCBhcyAgdmVydGljYWwgc3dpcGUgdG8gY2xvc2UgZnVuY3Rpb24gYWRkcyBpbmxpbmUgb3BhY2l0eS5cclxuICAgICAgICB0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcygnaW4nKS5jc3MoJ29wYWNpdHknLCAwKTtcclxuICAgICAgICB2YXIgcmVtb3ZlVGltZW91dCA9IHRoaXMuem9vbUZyb21PcmlnaW4gJiYgdHJhbnNmb3JtXHJcbiAgICAgICAgICAgID8gTWF0aC5tYXgodGhpcy5zZXR0aW5ncy5zdGFydEFuaW1hdGlvbkR1cmF0aW9uLCB0aGlzLnNldHRpbmdzLmJhY2tkcm9wRHVyYXRpb24pXHJcbiAgICAgICAgICAgIDogdGhpcy5zZXR0aW5ncy5iYWNrZHJvcER1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbGctc2hvdy1pbicpO1xyXG4gICAgICAgIC8vIE9uY2UgdGhlIGNsb3NpZ24gYW5pbWF0aW9uIGlzIGNvbXBsZXRlZCBhbmQgZ2FsbGVyeSBpcyBpbnZpc2libGVcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnpvb21Gcm9tT3JpZ2luICYmIHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3V0ZXIucmVtb3ZlQ2xhc3MoJ2xnLXpvb20tZnJvbS1pbWFnZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLiRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ2xnLXNob3cnKTtcclxuICAgICAgICAgICAgLy8gUmVzZXQgc2Nyb2xsYmFyXHJcbiAgICAgICAgICAgIF90aGlzLnJlc2V0U2Nyb2xsQmFyKCk7XHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gcmVtb3ZlIGlubGluZSBvcGFjaXR5IGFzIGl0IGlzIHVzZWQgaW4gdGhlIHN0eWxlc2hlZXQgYXMgd2VsbFxyXG4gICAgICAgICAgICBfdGhpcy4kYmFja2Ryb3BcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzdHlsZScpXHJcbiAgICAgICAgICAgICAgICAuY3NzKCd0cmFuc2l0aW9uLWR1cmF0aW9uJywgX3RoaXMuc2V0dGluZ3MuYmFja2Ryb3BEdXJhdGlvbiArICdtcycpO1xyXG4gICAgICAgICAgICBfdGhpcy5vdXRlci5yZW1vdmVDbGFzcyhcImxnLWNsb3NpbmcgXCIgKyBfdGhpcy5zZXR0aW5ncy5zdGFydENsYXNzKTtcclxuICAgICAgICAgICAgX3RoaXMuZ2V0U2xpZGVJdGVtKF90aGlzLmluZGV4KS5yZW1vdmVDbGFzcygnbGctc3RhcnQtZW5kLXByb2dyZXNzJyk7XHJcbiAgICAgICAgICAgIF90aGlzLiRpbm5lci5lbXB0eSgpO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMubGdPcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLkxHZWwudHJpZ2dlcihsR0V2ZW50cy5hZnRlckNsb3NlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IF90aGlzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF90aGlzLiRjb250YWluZXIuZ2V0KCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLiRjb250YWluZXIuZ2V0KCkuYmx1cigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmxnT3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgfSwgcmVtb3ZlVGltZW91dCArIDEwMCk7XHJcbiAgICAgICAgcmV0dXJuIHJlbW92ZVRpbWVvdXQgKyAxMDA7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5pbml0TW9kdWxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbnMuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGUuaW5pdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImxpZ2h0R2FsbGVyeTotIG1ha2Ugc3VyZSBsaWdodEdhbGxlcnkgbW9kdWxlIGlzIHByb3Blcmx5IGluaXRpYXRlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIExpZ2h0R2FsbGVyeS5wcm90b3R5cGUuZGVzdHJveU1vZHVsZXMgPSBmdW5jdGlvbiAoZGVzdHJveSkge1xyXG4gICAgICAgIHRoaXMucGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChkZXN0cm95KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5jbG9zZUdhbGxlcnkgJiYgbW9kdWxlLmNsb3NlR2FsbGVyeSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImxpZ2h0R2FsbGVyeTotIG1ha2Ugc3VyZSBsaWdodEdhbGxlcnkgbW9kdWxlIGlzIHByb3Blcmx5IGRlc3Ryb3llZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaCBsaWdodEdhbGxlcnkgd2l0aCBuZXcgc2V0IG9mIGNoaWxkcmVuLlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvbiBUaGlzIGlzIHVzZWZ1bCB0byB1cGRhdGUgdGhlIGdhbGxlcnkgd2hlbiB0aGUgY2hpbGQgZWxlbWVudHMgYXJlIGNoYW5nZWQgd2l0aG91dCBjYWxsaW5nIGRlc3Ryb3kgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIElmIHlvdSBhcmUgdXNpbmcgZHluYW1pYyBtb2RlLCB5b3UgY2FuIHBhc3MgdGhlIG1vZGlmaWVkIGFycmF5IG9mIGR5bmFtaWNFbCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyIHRvIHJlZnJlc2ggdGhlIGR5bmFtaWMgZ2FsbGVyeVxyXG4gICAgICogQHNlZSA8YSBocmVmPVwiL2RlbW9zL2R5bmFtaWMtbW9kZS9cIj5EZW1vPC9hPlxyXG4gICAgICogQGNhdGVnb3J5IGxHUHVibGljTWV0aG9kc1xyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqICBjb25zdCBwbHVnaW4gPSBsaWdodEdhbGxlcnkoKTtcclxuICAgICAqICAvLyBEZWxldGUgb3IgYWRkIGNoaWxkcmVuLCB0aGVuIGNhbGxcclxuICAgICAqICBwbHVnaW4ucmVmcmVzaCgpO1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKGdhbGxlcnlJdGVtcykge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5keW5hbWljKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZUl0ZW1zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChnYWxsZXJ5SXRlbXMpIHtcclxuICAgICAgICAgICAgdGhpcy5nYWxsZXJ5SXRlbXMgPSBnYWxsZXJ5SXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmdhbGxlcnlJdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250cm9scygpO1xyXG4gICAgICAgIHRoaXMub3BlbkdhbGxlcnlPbkl0ZW1DbGljaygpO1xyXG4gICAgICAgIHRoaXMuTEdlbC50cmlnZ2VyKGxHRXZlbnRzLnVwZGF0ZVNsaWRlcyk7XHJcbiAgICB9O1xyXG4gICAgTGlnaHRHYWxsZXJ5LnByb3RvdHlwZS51cGRhdGVDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFkZFNsaWRlVmlkZW9JbmZvKHRoaXMuZ2FsbGVyeUl0ZW1zKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvdW50ZXJUb3RhbCgpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlU2luZ2xlU2xpZGVDbGFzc05hbWUoKTtcclxuICAgIH07XHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmRlc3Ryb3lHYWxsZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZGVzdHJveU1vZHVsZXModHJ1ZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmR5bmFtaWMpIHtcclxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlSXRlbXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJExHKHdpbmRvdykub2ZmKFwiLmxnLmdsb2JhbFwiICsgdGhpcy5sZ0lkKTtcclxuICAgICAgICB0aGlzLkxHZWwub2ZmKCcubGcnKTtcclxuICAgICAgICB0aGlzLiRjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXN0cm95IGxpZ2h0R2FsbGVyeS5cclxuICAgICAqIERlc3Ryb3kgbGlnaHRHYWxsZXJ5IGFuZCBpdHMgcGx1Z2luIGluc3RhbmNlcyBjb21wbGV0ZWx5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIFRoaXMgbWV0aG9kIGFsc28gY2FsbHMgQ2xvc2VHYWxsZXJ5IGZ1bmN0aW9uIGludGVybmFsbHkuIFJldHVybnMgdGhlIHRpbWUgdGFrZXMgdG8gY29tcGxldGVseSBjbG9zZSBhbmQgZGVzdHJveSB0aGUgaW5zdGFuY2UuXHJcbiAgICAgKiBJbiBjYXNlIGlmIHlvdSB3YW50IHRvIHJlLWluaXRpYWxpemUgbGlnaHRHYWxsZXJ5IHJpZ2h0IGFmdGVyIGRlc3Ryb3lpbmcgaXQsIGluaXRpYWxpemUgaXQgb25seSBvbmNlIHRoZSBkZXN0cm95IHByb2Nlc3MgaXMgY29tcGxldGVkLlxyXG4gICAgICogWW91IGNhbiB1c2UgcmVmcmVzaCBtZXRob2QgbW9zdCBvZiB0aGUgdGltZXMuXHJcbiAgICAgKiBAY2F0ZWdvcnkgbEdQdWJsaWNNZXRob2RzXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogIGNvbnN0IHBsdWdpbiA9IGxpZ2h0R2FsbGVyeSgpO1xyXG4gICAgICogIHBsdWdpbi5kZXN0cm95KCk7XHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBMaWdodEdhbGxlcnkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNsb3NlVGltZW91dCA9IHRoaXMuY2xvc2VHYWxsZXJ5KHRydWUpO1xyXG4gICAgICAgIGlmIChjbG9zZVRpbWVvdXQpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmRlc3Ryb3lHYWxsZXJ5LmJpbmQodGhpcyksIGNsb3NlVGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lHYWxsZXJ5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9zZVRpbWVvdXQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExpZ2h0R2FsbGVyeTtcclxufSgpKTtcblxuZnVuY3Rpb24gbGlnaHRHYWxsZXJ5KGVsLCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IExpZ2h0R2FsbGVyeShlbCwgb3B0aW9ucyk7XHJcbn1cblxudmFyIExnTWV0aG9kcyA9IHtcclxuICAgIG9uQWZ0ZXJBcHBlbmRTbGlkZTogJ2xnQWZ0ZXJBcHBlbmRTbGlkZScsXHJcbiAgICBvbkluaXQ6ICdsZ0luaXQnLFxyXG4gICAgb25IYXNWaWRlbzogJ2xnSGFzVmlkZW8nLFxyXG4gICAgb25Db250YWluZXJSZXNpemU6ICdsZ0NvbnRhaW5lclJlc2l6ZScsXHJcbiAgICBvblVwZGF0ZVNsaWRlczogJ2xnVXBkYXRlU2xpZGVzJyxcclxuICAgIG9uQWZ0ZXJBcHBlbmRTdWJIdG1sOiAnbGdBZnRlckFwcGVuZFN1Ykh0bWwnLFxyXG4gICAgb25CZWZvcmVPcGVuOiAnbGdCZWZvcmVPcGVuJyxcclxuICAgIG9uQWZ0ZXJPcGVuOiAnbGdBZnRlck9wZW4nLFxyXG4gICAgb25TbGlkZUl0ZW1Mb2FkOiAnbGdTbGlkZUl0ZW1Mb2FkJyxcclxuICAgIG9uQmVmb3JlU2xpZGU6ICdsZ0JlZm9yZVNsaWRlJyxcclxuICAgIG9uQWZ0ZXJTbGlkZTogJ2xnQWZ0ZXJTbGlkZScsXHJcbiAgICBvblBvc3RlckNsaWNrOiAnbGdQb3N0ZXJDbGljaycsXHJcbiAgICBvbkRyYWdTdGFydDogJ2xnRHJhZ1N0YXJ0JyxcclxuICAgIG9uRHJhZ01vdmU6ICdsZ0RyYWdNb3ZlJyxcclxuICAgIG9uRHJhZ0VuZDogJ2xnRHJhZ0VuZCcsXHJcbiAgICBvbkJlZm9yZU5leHRTbGlkZTogJ2xnQmVmb3JlTmV4dFNsaWRlJyxcclxuICAgIG9uQmVmb3JlUHJldlNsaWRlOiAnbGdCZWZvcmVQcmV2U2xpZGUnLFxyXG4gICAgb25CZWZvcmVDbG9zZTogJ2xnQmVmb3JlQ2xvc2UnLFxyXG4gICAgb25BZnRlckNsb3NlOiAnbGdBZnRlckNsb3NlJyxcclxuICAgIG9uUm90YXRlTGVmdDogJ2xnUm90YXRlTGVmdCcsXHJcbiAgICBvblJvdGF0ZVJpZ2h0OiAnbGdSb3RhdGVSaWdodCcsXHJcbiAgICBvbkZsaXBIb3Jpem9udGFsOiAnbGdGbGlwSG9yaXpvbnRhbCcsXHJcbiAgICBvbkZsaXBWZXJ0aWNhbDogJ2xnRmxpcFZlcnRpY2FsJyxcclxufTtcclxudmFyIExHID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgZWxlbWVudENsYXNzTmFtZXMgPSBfYS5lbGVtZW50Q2xhc3NOYW1lcywgb25BZnRlckFwcGVuZFNsaWRlID0gX2Eub25BZnRlckFwcGVuZFNsaWRlLCBvbkluaXQgPSBfYS5vbkluaXQsIG9uSGFzVmlkZW8gPSBfYS5vbkhhc1ZpZGVvLCBvbkNvbnRhaW5lclJlc2l6ZSA9IF9hLm9uQ29udGFpbmVyUmVzaXplLCBvbkFmdGVyQXBwZW5kU3ViSHRtbCA9IF9hLm9uQWZ0ZXJBcHBlbmRTdWJIdG1sLCBvbkJlZm9yZU9wZW4gPSBfYS5vbkJlZm9yZU9wZW4sIG9uQWZ0ZXJPcGVuID0gX2Eub25BZnRlck9wZW4sIG9uU2xpZGVJdGVtTG9hZCA9IF9hLm9uU2xpZGVJdGVtTG9hZCwgb25CZWZvcmVTbGlkZSA9IF9hLm9uQmVmb3JlU2xpZGUsIG9uQWZ0ZXJTbGlkZSA9IF9hLm9uQWZ0ZXJTbGlkZSwgb25Qb3N0ZXJDbGljayA9IF9hLm9uUG9zdGVyQ2xpY2ssIG9uRHJhZ1N0YXJ0ID0gX2Eub25EcmFnU3RhcnQsIG9uRHJhZ01vdmUgPSBfYS5vbkRyYWdNb3ZlLCBvbkRyYWdFbmQgPSBfYS5vbkRyYWdFbmQsIG9uQmVmb3JlTmV4dFNsaWRlID0gX2Eub25CZWZvcmVOZXh0U2xpZGUsIG9uQmVmb3JlUHJldlNsaWRlID0gX2Eub25CZWZvcmVQcmV2U2xpZGUsIG9uQmVmb3JlQ2xvc2UgPSBfYS5vbkJlZm9yZUNsb3NlLCBvbkFmdGVyQ2xvc2UgPSBfYS5vbkFmdGVyQ2xvc2UsIG9uUm90YXRlTGVmdCA9IF9hLm9uUm90YXRlTGVmdCwgb25Sb3RhdGVSaWdodCA9IF9hLm9uUm90YXRlUmlnaHQsIG9uRmxpcEhvcml6b250YWwgPSBfYS5vbkZsaXBIb3Jpem9udGFsLCBvbkZsaXBWZXJ0aWNhbCA9IF9hLm9uRmxpcFZlcnRpY2FsLCByZXN0UHJvcHMgPSBfX3Jlc3QoX2EsIFtcImNoaWxkcmVuXCIsIFwiZWxlbWVudENsYXNzTmFtZXNcIiwgXCJvbkFmdGVyQXBwZW5kU2xpZGVcIiwgXCJvbkluaXRcIiwgXCJvbkhhc1ZpZGVvXCIsIFwib25Db250YWluZXJSZXNpemVcIiwgXCJvbkFmdGVyQXBwZW5kU3ViSHRtbFwiLCBcIm9uQmVmb3JlT3BlblwiLCBcIm9uQWZ0ZXJPcGVuXCIsIFwib25TbGlkZUl0ZW1Mb2FkXCIsIFwib25CZWZvcmVTbGlkZVwiLCBcIm9uQWZ0ZXJTbGlkZVwiLCBcIm9uUG9zdGVyQ2xpY2tcIiwgXCJvbkRyYWdTdGFydFwiLCBcIm9uRHJhZ01vdmVcIiwgXCJvbkRyYWdFbmRcIiwgXCJvbkJlZm9yZU5leHRTbGlkZVwiLCBcIm9uQmVmb3JlUHJldlNsaWRlXCIsIFwib25CZWZvcmVDbG9zZVwiLCBcIm9uQWZ0ZXJDbG9zZVwiLCBcIm9uUm90YXRlTGVmdFwiLCBcIm9uUm90YXRlUmlnaHRcIiwgXCJvbkZsaXBIb3Jpem9udGFsXCIsIFwib25GbGlwVmVydGljYWxcIl0pO1xyXG4gICAgdmFyICRsZyA9IHVzZVJlZihudWxsKTtcclxuICAgIHZhciByZWdpc3RlckV2ZW50cyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAob25BZnRlckFwcGVuZFNsaWRlICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vbkFmdGVyQXBwZW5kU2xpZGUsIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uQWZ0ZXJBcHBlbmRTbGlkZShldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbkluaXQgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uSW5pdCwgKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgb25Jbml0KGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uSGFzVmlkZW8gJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uSGFzVmlkZW8sIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uSGFzVmlkZW8oZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25Db250YWluZXJSZXNpemUgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uQ29udGFpbmVyUmVzaXplLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkNvbnRhaW5lclJlc2l6ZShldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbkFmdGVyQXBwZW5kU3ViSHRtbCAmJiAkbGcgJiYgJGxnLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgJGxnLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcihMZ01ldGhvZHMub25BZnRlckFwcGVuZFN1Ykh0bWwsIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uQWZ0ZXJBcHBlbmRTdWJIdG1sKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQmVmb3JlT3BlbiAmJiAkbGcgJiYgJGxnLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgJGxnLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcihMZ01ldGhvZHMub25CZWZvcmVPcGVuLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkJlZm9yZU9wZW4oZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25BZnRlck9wZW4gJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uQWZ0ZXJPcGVuLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkFmdGVyT3BlbihldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvblNsaWRlSXRlbUxvYWQgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uU2xpZGVJdGVtTG9hZCwgKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgb25TbGlkZUl0ZW1Mb2FkKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQmVmb3JlU2xpZGUgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uQmVmb3JlU2xpZGUsIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uQmVmb3JlU2xpZGUoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25BZnRlclNsaWRlICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vbkFmdGVyU2xpZGUsIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uQWZ0ZXJTbGlkZShldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvblBvc3RlckNsaWNrICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vblBvc3RlckNsaWNrLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvblBvc3RlckNsaWNrKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uRHJhZ1N0YXJ0ICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vbkRyYWdTdGFydCwgKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgb25EcmFnU3RhcnQoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25EcmFnTW92ZSAmJiAkbGcgJiYgJGxnLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgJGxnLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcihMZ01ldGhvZHMub25EcmFnTW92ZSwgKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgb25EcmFnTW92ZShldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbkRyYWdFbmQgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uRHJhZ0VuZCwgKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgb25EcmFnRW5kKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQmVmb3JlTmV4dFNsaWRlICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vbkJlZm9yZU5leHRTbGlkZSwgKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgb25CZWZvcmVOZXh0U2xpZGUoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25CZWZvcmVQcmV2U2xpZGUgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uQmVmb3JlUHJldlNsaWRlLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkJlZm9yZVByZXZTbGlkZShldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbkJlZm9yZUNsb3NlICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vbkJlZm9yZUNsb3NlLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkJlZm9yZUNsb3NlKGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uQWZ0ZXJDbG9zZSAmJiAkbGcgJiYgJGxnLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgJGxnLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcihMZ01ldGhvZHMub25BZnRlckNsb3NlLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkFmdGVyQ2xvc2UoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25Sb3RhdGVMZWZ0ICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vblJvdGF0ZUxlZnQsIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uUm90YXRlTGVmdChldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvblJvdGF0ZVJpZ2h0ICYmICRsZyAmJiAkbGcuY3VycmVudCkge1xyXG4gICAgICAgICAgICAkbGcuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKExnTWV0aG9kcy5vblJvdGF0ZVJpZ2h0LCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvblJvdGF0ZVJpZ2h0KGV2ZW50LmRldGFpbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uRmxpcEhvcml6b250YWwgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uRmxpcEhvcml6b250YWwsIChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG9uRmxpcEhvcml6b250YWwoZXZlbnQuZGV0YWlsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25GbGlwVmVydGljYWwgJiYgJGxnICYmICRsZy5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICRsZy5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoTGdNZXRob2RzLm9uRmxpcFZlcnRpY2FsLCAoZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvbkZsaXBWZXJ0aWNhbChldmVudC5kZXRhaWwpO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW1xyXG4gICAgICAgIG9uQWZ0ZXJBcHBlbmRTbGlkZSxcclxuICAgICAgICBvbkFmdGVyQXBwZW5kU3ViSHRtbCxcclxuICAgICAgICBvbkFmdGVyQ2xvc2UsXHJcbiAgICAgICAgb25Sb3RhdGVMZWZ0LFxyXG4gICAgICAgIG9uUm90YXRlUmlnaHQsXHJcbiAgICAgICAgb25GbGlwSG9yaXpvbnRhbCxcclxuICAgICAgICBvbkZsaXBWZXJ0aWNhbCxcclxuICAgICAgICBvbkFmdGVyT3BlbixcclxuICAgICAgICBvbkFmdGVyU2xpZGUsXHJcbiAgICAgICAgb25CZWZvcmVDbG9zZSxcclxuICAgICAgICBvbkJlZm9yZU5leHRTbGlkZSxcclxuICAgICAgICBvbkJlZm9yZU9wZW4sXHJcbiAgICAgICAgb25CZWZvcmVQcmV2U2xpZGUsXHJcbiAgICAgICAgb25CZWZvcmVTbGlkZSxcclxuICAgICAgICBvbkNvbnRhaW5lclJlc2l6ZSxcclxuICAgICAgICBvbkRyYWdFbmQsXHJcbiAgICAgICAgb25EcmFnTW92ZSxcclxuICAgICAgICBvbkRyYWdTdGFydCxcclxuICAgICAgICBvbkhhc1ZpZGVvLFxyXG4gICAgICAgIG9uSW5pdCxcclxuICAgICAgICBvblBvc3RlckNsaWNrLFxyXG4gICAgICAgIG9uU2xpZGVJdGVtTG9hZCxcclxuICAgIF0pO1xyXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZWdpc3RlckV2ZW50cygpO1xyXG4gICAgICAgIHZhciBsaWdodEdhbGxlcnkkMSA9IGxpZ2h0R2FsbGVyeSgkbGcuY3VycmVudCwgcmVzdFByb3BzKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gY2xlYW51cCgpIHtcclxuICAgICAgICAgICAgbGlnaHRHYWxsZXJ5JDEuZGVzdHJveSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbcmVnaXN0ZXJFdmVudHMsIHJlc3RQcm9wc10pO1xyXG4gICAgcmV0dXJuIChjcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxnLXJlYWN0LWVsZW1lbnQgXCIgKyAoZWxlbWVudENsYXNzTmFtZXMgPyBlbGVtZW50Q2xhc3NOYW1lcyA6ICcnKSwgcmVmOiAkbGcgfSwgY2hpbGRyZW4pKTtcclxufTtcblxuZXhwb3J0IGRlZmF1bHQgTEc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaWdodGdhbGxlcnkuZXM1LmpzLm1hcFxuIl0sIm5hbWVzIjpbInVzZVJlZiIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwiY3JlYXRlRWxlbWVudCIsIl9fcmVzdCIsInMiLCJlIiwidCIsInAiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiaSIsImxlbmd0aCIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiX19hc3NpZ24iLCJhc3NpZ24iLCJuIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfX3NwcmVhZEFycmF5cyIsImlsIiwiciIsIkFycmF5IiwiayIsImEiLCJqIiwiamwiLCJsR0V2ZW50cyIsImFmdGVyQXBwZW5kU2xpZGUiLCJpbml0IiwiaGFzVmlkZW8iLCJjb250YWluZXJSZXNpemUiLCJ1cGRhdGVTbGlkZXMiLCJhZnRlckFwcGVuZFN1Ykh0bWwiLCJiZWZvcmVPcGVuIiwiYWZ0ZXJPcGVuIiwic2xpZGVJdGVtTG9hZCIsImJlZm9yZVNsaWRlIiwiYWZ0ZXJTbGlkZSIsInBvc3RlckNsaWNrIiwiZHJhZ1N0YXJ0IiwiZHJhZ01vdmUiLCJkcmFnRW5kIiwiYmVmb3JlTmV4dFNsaWRlIiwiYmVmb3JlUHJldlNsaWRlIiwiYmVmb3JlQ2xvc2UiLCJhZnRlckNsb3NlIiwicm90YXRlTGVmdCIsInJvdGF0ZVJpZ2h0IiwiZmxpcEhvcml6b250YWwiLCJmbGlwVmVydGljYWwiLCJhdXRvcGxheSIsImF1dG9wbGF5U3RhcnQiLCJhdXRvcGxheVN0b3AiLCJsaWdodEdhbGxlcnlDb3JlU2V0dGluZ3MiLCJtb2RlIiwiZWFzaW5nIiwic3BlZWQiLCJsaWNlbnNlS2V5IiwiaGVpZ2h0Iiwid2lkdGgiLCJhZGRDbGFzcyIsInN0YXJ0Q2xhc3MiLCJiYWNrZHJvcER1cmF0aW9uIiwiY29udGFpbmVyIiwic3RhcnRBbmltYXRpb25EdXJhdGlvbiIsInpvb21Gcm9tT3JpZ2luIiwiaGlkZUJhcnNEZWxheSIsInNob3dCYXJzQWZ0ZXIiLCJzbGlkZURlbGF5Iiwic3VwcG9ydExlZ2FjeUJyb3dzZXIiLCJhbGxvd01lZGlhT3ZlcmxhcCIsInZpZGVvTWF4U2l6ZSIsImxvYWRZb3VUdWJlUG9zdGVyIiwiZGVmYXVsdENhcHRpb25IZWlnaHQiLCJhcmlhTGFiZWxsZWRieSIsImFyaWFEZXNjcmliZWRieSIsInJlc2V0U2Nyb2xsUG9zaXRpb24iLCJoaWRlU2Nyb2xsYmFyIiwiY2xvc2FibGUiLCJzd2lwZVRvQ2xvc2UiLCJjbG9zZU9uVGFwIiwic2hvd0Nsb3NlSWNvbiIsInNob3dNYXhpbWl6ZUljb24iLCJsb29wIiwiZXNjS2V5Iiwia2V5UHJlc3MiLCJ0cmFwRm9jdXMiLCJjb250cm9scyIsInNsaWRlRW5kQW5pbWF0aW9uIiwiaGlkZUNvbnRyb2xPbkVuZCIsIm1vdXNld2hlZWwiLCJnZXRDYXB0aW9uRnJvbVRpdGxlT3JBbHQiLCJhcHBlbmRTdWJIdG1sVG8iLCJzdWJIdG1sU2VsZWN0b3JSZWxhdGl2ZSIsInByZWxvYWQiLCJudW1iZXJPZlNsaWRlSXRlbXNJbkRvbSIsInNlbGVjdG9yIiwic2VsZWN0V2l0aGluIiwibmV4dEh0bWwiLCJwcmV2SHRtbCIsImluZGV4IiwiaWZyYW1lV2lkdGgiLCJpZnJhbWVIZWlnaHQiLCJpZnJhbWVNYXhXaWR0aCIsImlmcmFtZU1heEhlaWdodCIsImRvd25sb2FkIiwiY291bnRlciIsImFwcGVuZENvdW50ZXJUbyIsInN3aXBlVGhyZXNob2xkIiwiZW5hYmxlU3dpcGUiLCJlbmFibGVEcmFnIiwiZHluYW1pYyIsImR5bmFtaWNFbCIsImV4dHJhUHJvcHMiLCJleFRodW1iSW1hZ2UiLCJpc01vYmlsZSIsInVuZGVmaW5lZCIsIm1vYmlsZVNldHRpbmdzIiwicGx1Z2lucyIsInN0cmluZ3MiLCJjbG9zZUdhbGxlcnkiLCJ0b2dnbGVNYXhpbWl6ZSIsInByZXZpb3VzU2xpZGUiLCJuZXh0U2xpZGUiLCJwbGF5VmlkZW8iLCJtZWRpYUxvYWRpbmdGYWlsZWQiLCJpbml0TGdQb2x5ZmlsbHMiLCJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImV2ZW50IiwicGFyYW1zIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJldnQiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiRWxlbWVudCIsIm1hdGNoZXMiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsImxnUXVlcnkiLCJjc3NWZW5kZXJQcmVmaXhlcyIsIl9nZXRTZWxlY3RvciIsImZpcnN0RWxlbWVudCIsIl9nZXRGaXJzdEVsIiwiZ2VuZXJhdGVVVUlEIiwicmVwbGFjZSIsImMiLCJNYXRoIiwicmFuZG9tIiwidiIsInRvU3RyaW5nIiwiY29udGV4dCIsImZsIiwic3Vic3RyaW5nIiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZWFjaCIsImZ1bmMiLCJmb3JFYWNoIiwiX3NldENzc1ZlbmRvclByZWZpeCIsImVsIiwiY3NzUHJvcGVydHkiLCJ2YWx1ZSIsInByb3BlcnR5IiwiZ3JvdXAxIiwidG9VcHBlckNhc2UiLCJzdHlsZSIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwic2xpY2UiLCJpc0V2ZW50TWF0Y2hlZCIsImV2ZW50TmFtZSIsImV2ZW50TmFtZXNwYWNlIiwic3BsaXQiLCJmaWx0ZXIiLCJldmVyeSIsImF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJmaW5kIiwiJExHIiwiZmlyc3QiLCJlcSIsInBhcmVudCIsInBhcmVudEVsZW1lbnQiLCJnZXQiLCJyZW1vdmVBdHRyIiwiYXR0cmlidXRlcyIsImF0dHJzIiwicmVtb3ZlQXR0cmlidXRlIiwid3JhcCIsImNsYXNzTmFtZSIsIndyYXBwZXIiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImNsYXNzTmFtZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImhhc0NsYXNzIiwiY29udGFpbnMiLCJoYXNBdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiLCJ0b2dnbGVDbGFzcyIsImNzcyIsIl90aGlzIiwib24iLCJldmVudHMiLCJsaXN0ZW5lciIsImlzQXJyYXkiLCJldmVudExpc3RlbmVycyIsInB1c2giLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsIm9mZiIsImtleXMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidHJpZ2dlciIsImN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImxvYWQiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJ0ZXh0IiwiaHRtbCIsImlubmVySFRNTCIsImFwcGVuZCIsImluc2VydEFkamFjZW50SFRNTCIsInByZXBlbmQiLCJlbXB0eSIsInNjcm9sbFRvcCIsImJvZHkiLCJkb2N1bWVudEVsZW1lbnQiLCJwYWdlWU9mZnNldCIsInNjcm9sbExlZnQiLCJwYWdlWE9mZnNldCIsIm9mZnNldCIsImxlZnQiLCJ0b3AiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYm9keU1hcmdpbkxlZnQiLCJtYXJnaW5MZWZ0IiwicGFyc2VGbG9hdCIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJjbGllbnRXaWR0aCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwiY2xpZW50SGVpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJkZWZhdWx0RHluYW1pY09wdGlvbnMiLCJjb252ZXJ0VG9EYXRhIiwiZyIsInV0aWxzIiwiZ2V0U2l6ZSIsInNwYWNpbmciLCJkZWZhdWx0TGdTaXplIiwiTEdlbCIsImxnU2l6ZSIsImlzUmVzcG9uc2l2ZVNpemVzIiwid1dpZHRoIiwiaW5uZXJXaWR0aCIsInNpemVfMSIsInJlc3BvbnNpdmVXaWR0aCIsInBhcnNlSW50Iiwic2l6ZSIsImNXaWR0aCIsImNIZWlnaHQiLCJtYXhXaWR0aCIsIm1pbiIsIm1heEhlaWdodCIsInJhdGlvIiwiZ2V0VHJhbnNmb3JtIiwiYm90dG9tIiwiaW1hZ2VTaXplIiwiY29udGFpbmVyUmVjdCIsIndIZWlnaHQiLCJlbFdpZHRoIiwiZWxIZWlnaHQiLCJlbFN0eWxlIiwieCIsImJvcmRlckxlZnQiLCJ5IiwiYm9yZGVyVG9wIiwic2NYIiwic2NZIiwidHJhbnNmb3JtIiwiZ2V0SWZyYW1lTWFya3VwIiwic3JjIiwiaWZyYW1lVGl0bGUiLCJ0aXRsZSIsImdldEltZ01hcmt1cCIsImFsdEF0dHIiLCJzcmNzZXQiLCJzaXplcyIsInNvdXJjZXMiLCJzcmNzZXRBdHRyIiwic2l6ZXNBdHRyIiwiaW1nTWFya3VwIiwic291cmNlVGFnIiwic291cmNlT2JqIiwiSlNPTiIsInBhcnNlIiwibWFwIiwic291cmNlIiwia2V5IiwiZ2V0UmVzcG9uc2l2ZVNyYyIsInNyY0l0bXMiLCJyc1dpZHRoIiwicnNTcmMiLCJfc3JjIiwic3BsaWNlIiwiaXNJbWFnZUxvYWRlZCIsImltZyIsImNvbXBsZXRlIiwibmF0dXJhbFdpZHRoIiwiZ2V0VmlkZW9Qb3N0ZXJNYXJrdXAiLCJfcG9zdGVyIiwiZHVtbXlJbWciLCJ2aWRlb0NvbnRTdHlsZSIsInBsYXlWaWRlb1N0cmluZyIsIl9pc1ZpZGVvIiwidmlkZW9DbGFzcyIsInlvdXR1YmUiLCJ2aW1lbyIsImdldEZvY3VzYWJsZUVsZW1lbnRzIiwiZWxlbWVudHMiLCJ2aXNpYmxlRWxlbWVudHMiLCJlbGVtZW50IiwiZGlzcGxheSIsInZpc2liaWxpdHkiLCJnZXREeW5hbWljT3B0aW9ucyIsIml0ZW1zIiwiZHluYW1pY0VsZW1lbnRzIiwiYXZhaWxhYmxlRHluYW1pY09wdGlvbnMiLCJpdGVtIiwic3BlY2lmaWVkIiwiZHluYW1pY0F0dHIiLCJuYW1lIiwibGFiZWwiLCJjdXJyZW50SXRlbSIsImFsdCIsInRodW1iIiwic3ViSHRtbCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpc1ZpZGVvIiwiaXNIVE1MNVZJZGVvIiwiaHRtbDUiLCJjb25zb2xlIiwiZXJyb3IiLCJtYXRjaCIsIndpc3RpYSIsImxnSWQiLCJMaWdodEdhbGxlcnkiLCJvcHRpb25zIiwibGdPcGVuZWQiLCJsR2FsbGVyeU9uIiwibGdCdXN5IiwiY3VycmVudEl0ZW1zSW5Eb20iLCJwcmV2U2Nyb2xsVG9wIiwiYm9keVBhZGRpbmdSaWdodCIsImlzRHVtbXlJbWFnZVJlbW92ZWQiLCJkcmFnT3JTd2lwZUVuYWJsZWQiLCJtZWRpYUNvbnRhaW5lclBvc2l0aW9uIiwiZ2VuZXJhdGVTZXR0aW5ncyIsImJ1aWxkTW9kdWxlcyIsInNldHRpbmdzIiwiZ2FsbGVyeUl0ZW1zIiwiZ2V0SXRlbXMiLCJub3JtYWxpemVTZXR0aW5ncyIsInZhbGlkYXRlTGljZW5zZSIsImFkZFNsaWRlVmlkZW9JbmZvIiwiYnVpbGRTdHJ1Y3R1cmUiLCJpbnN0YW5jZSIsInNldFRpbWVvdXQiLCJ0cmlnZ2VyUG9zdGVyQ2xpY2siLCJhcnJvdyIsIm9wZW5HYWxsZXJ5T25JdGVtQ2xpY2siLCJfbG9vcF8xIiwidGhpc18xIiwiJGVsZW1lbnQiLCJ1dWlkIiwicHJldmVudERlZmF1bHQiLCJjdXJyZW50SXRlbUluZGV4Iiwib3BlbkdhbGxlcnkiLCJwbHVnaW4iLCJ3YXJuIiwiZ2V0U2xpZGVJdGVtIiwiZ2V0U2xpZGVJdGVtSWQiLCJnZXRJZE5hbWUiLCJpZCIsImdldEVsZW1lbnRCeUlkIiwibWFuYWdlU2luZ2xlU2xpZGVDbGFzc05hbWUiLCJvdXRlciIsIiRjb250YWluZXIiLCJzdWJIdG1sQ29udCIsImFkZENsYXNzZXMiLCJjb250YWluZXJDbGFzc05hbWUiLCJjbG9zZUljb24iLCJtYXhpbWl6ZUljb24iLCJ0ZW1wbGF0ZSIsIiRsZ0NvbXBvbmVudHMiLCIkYmFja2Ryb3AiLCIkaW5uZXIiLCIkY29udGVudCIsIiR0b29sYmFyIiwib3V0ZXJDbGFzc05hbWVzIiwicmVmcmVzaE9uUmVzaXplIiwiaGlkZUJhcnMiLCJtYW5hZ2VDbG9zZUdhbGxlcnkiLCJpbml0TW9kdWxlcyIsImN1cnJlbnRHYWxsZXJ5SXRlbSIsIl9fc2xpZGVWaWRlb0luZm8iLCJnZXRNZWRpYUNvbnRhaW5lclBvc2l0aW9uIiwiX2EiLCJ0b3BfMSIsImN1cnJlbnRJbWFnZVNpemUiLCJyZXNpemVWaWRlb1NsaWRlIiwiaW1nU3R5bGUiLCJnZXREdW1teUltZ1N0eWxlcyIsImxnVmlkZW9TdHlsZSIsImdldFZpZGVvQ29udFN0eWxlIiwiY3VycmVudFNsaWRlIiwiY3VycmVudFNyYyIsInVwZGF0ZUNvbnRyb2xzIiwiX2luZGV4Iiwic29tZSIsImdhbGxlcnlJdGVtIiwiaXRlbUluZGV4Iiwib3JnYW5pemVTbGlkZUl0ZW1zIiwibG9hZENvbnRlbnQiLCJ1cGRhdGVDdXJyZW50Q291bnRlciIsImNoaWxkcmVuIiwic2hvdWxkSGlkZVNjcm9sbGJhciIsImJvZHlSZWN0Iiwic2Nyb2xsYmFyV2lkdGgiLCJyZXNldFNjcm9sbEJhciIsIml0ZW1zVG9CZUluc2VydGVkVG9Eb20iLCJnZXRJdGVtc1RvQmVJbnNlcnRlZFRvRG9tIiwiYWRkSHRtbCIsInNldE1lZGlhQ29udGFpbmVyUG9zaXRpb24iLCJ0aW1lb3V0IiwiY3VycmVudFNsaWRlXzEiLCJzbGlkZSIsImNhcHRpb25IZWlnaHQiLCJ0aHVtYkNvbnRhaW5lciIsInRodW1iSGVpZ2h0IiwiY2xlYXJUaW1lb3V0IiwiaGlkZUJhclRpbWVvdXQiLCJpbml0UGljdHVyZUZpbGwiLCIkaW1nIiwicGljdHVyZWZpbGwiLCJjb3VudGVySHRtbCIsInN1Ykh0bWxVcmwiLCJmTCIsImdldER1bW15SW1hZ2VDb250ZW50IiwiJGN1cnJlbnRTbGlkZSIsIiRjdXJyZW50SXRlbSIsIl9kdW1teUltZ1NyYyIsImR1bW15SW1nQ29udGVudCIsInNldEltZ01hcmt1cCIsImltZ0NvbnRlbnQiLCJpc0ZpcnN0U2xpZGVXaXRoWm9vbUFuaW1hdGlvbiIsIm9uU2xpZGVPYmplY3RMb2FkIiwiJHNsaWRlIiwiaXNIVE1MNVZpZGVvV2l0aG91dFBvc3RlciIsIm9uTG9hZCIsIm9uRXJyb3IiLCJtZWRpYU9iamVjdCIsIm9uTGdPYmplY3RMb2FkIiwiZGVsYXkiLCJpc0ZpcnN0U2xpZGUiLCJ0cmlnZ2VyU2xpZGVJdGVtTG9hZCIsIl9zcGVlZCIsImdldFNsaWRlVHlwZSIsInBvc3RlciIsInZpZGVvIiwicmVjIiwiX2h0bWw1VmlkZW8iLCJyZXNwb25zaXZlIiwic3JjRHlJdG1zIiwidmlkZW9JbmZvIiwiaWZyYW1lIiwidG9wXzIiLCJ2aWRlb1NpemUiLCJtYXJrdXAiLCJoYXNTdGFydEFuaW1hdGlvbiIsImh0bWw1VmlkZW8iLCJoYXNQb3N0ZXIiLCJsb2FkQ29udGVudE9uRmlyc3RTbGlkZUxvYWQiLCJwcmV2SW5kZXgiLCJudW1iZXJPZkl0ZW1zIiwicG9zc2libGVOdW1iZXJPZkl0ZW1zIiwibWF4IiwicHJldkluZGV4SXRlbSIsIl9lbGVtZW50IiwiaWR4IiwibnVtYmVyT2ZFeGlzdGluZ0l0ZW1zIiwiZ2V0UHJldmlvdXNTbGlkZUluZGV4IiwiY3VycmVudEl0ZW1JZCIsInNldERvd25sb2FkVmFsdWUiLCJoaWRlRG93bmxvYWRCdG4iLCJkb3dubG9hZFVybCIsIiRkb3dubG9hZCIsIm1ha2VTbGlkZUFuaW1hdGlvbiIsImRpcmVjdGlvbiIsImN1cnJlbnRTbGlkZUl0ZW0iLCJwcmV2aW91c1NsaWRlSXRlbSIsImZyb21Ub3VjaCIsImZyb21UaHVtYiIsIm51bWJlck9mR2FsbGVyeUl0ZW1zIiwicHJldmlvdXNTbGlkZUl0ZW1fMSIsInRvcF8zIiwiYXJyb3dEaXNhYmxlIiwidG91Y2hQcmV2IiwidG91Y2hOZXh0IiwidXBkYXRlQ291bnRlclRvdGFsIiwidG91Y2hNb3ZlIiwic3RhcnRDb29yZHMiLCJlbmRDb29yZHMiLCJkaXN0YW5jZVgiLCJwYWdlWCIsImRpc3RhbmNlWSIsInBhZ2VZIiwiYWxsb3dTd2lwZSIsInN3aXBlRGlyZWN0aW9uIiwiYWJzIiwic2V0VHJhbnNsYXRlIiwib2Zmc2V0V2lkdGgiLCJzbGlkZVdpZHRoQW1vdW50IiwiZ3V0dGVyIiwib3BhY2l0eSIsImlubmVySGVpZ2h0Iiwic2NhbGUiLCJ0b3VjaEVuZCIsImRpc3RhbmNlIiwidHJpZ2dlckNsaWNrIiwiZGlzdGFuY2VBYnMiLCJnb1RvTmV4dFNsaWRlIiwiZ29Ub1ByZXZTbGlkZSIsInRhcmdldCIsImlzUG9zdGVyRWxlbWVudCIsImlzTW92ZWQiLCJpc1N3aXBpbmciLCIkaXRlbSIsInRvdWNoZXMiLCJ0b3VjaEFjdGlvbiIsIm1hbmFnZVN3aXBlQ2xhc3MiLCJpc0RyYWdpbmciLCJfdG91Y2hOZXh0IiwiX3RvdWNoUHJldiIsIl9sb29wIiwia2V5Q29kZSIsIiRwcmV2IiwiJG5leHQiLCIkZWwiLCJ4VmFsdWUiLCJ5VmFsdWUiLCJzY2FsZVgiLCJzY2FsZVkiLCJsYXN0Q2FsbCIsImRlbHRhWSIsIm5vdyIsIkRhdGUiLCJnZXRUaW1lIiwiaXNTbGlkZUVsZW1lbnQiLCJwbGF5QnV0dG9uIiwiaW52YWxpZGF0ZUl0ZW1zIiwiZm9jdXMiLCJwcmV2ZW50U2Nyb2xsIiwiaXNUYWJQcmVzc2VkIiwiZm9jdXNhYmxlRWxzIiwiZmlyc3RGb2N1c2FibGVFbCIsImxhc3RGb2N1c2FibGVFbCIsInNoaWZ0S2V5IiwiYWN0aXZlRWxlbWVudCIsIm1vdXNlZG93biIsImZvcmNlIiwidG9wXzQiLCJfYiIsImRlc3Ryb3lNb2R1bGVzIiwicmVtb3ZlVGltZW91dCIsImJsdXIiLCJtb2R1bGUiLCJlcnIiLCJkZXN0cm95IiwicmVmcmVzaCIsImRlc3Ryb3lHYWxsZXJ5IiwiY2xvc2VUaW1lb3V0IiwiYmluZCIsImxpZ2h0R2FsbGVyeSIsIkxnTWV0aG9kcyIsIm9uQWZ0ZXJBcHBlbmRTbGlkZSIsIm9uSW5pdCIsIm9uSGFzVmlkZW8iLCJvbkNvbnRhaW5lclJlc2l6ZSIsIm9uVXBkYXRlU2xpZGVzIiwib25BZnRlckFwcGVuZFN1Ykh0bWwiLCJvbkJlZm9yZU9wZW4iLCJvbkFmdGVyT3BlbiIsIm9uU2xpZGVJdGVtTG9hZCIsIm9uQmVmb3JlU2xpZGUiLCJvbkFmdGVyU2xpZGUiLCJvblBvc3RlckNsaWNrIiwib25EcmFnU3RhcnQiLCJvbkRyYWdNb3ZlIiwib25EcmFnRW5kIiwib25CZWZvcmVOZXh0U2xpZGUiLCJvbkJlZm9yZVByZXZTbGlkZSIsIm9uQmVmb3JlQ2xvc2UiLCJvbkFmdGVyQ2xvc2UiLCJvblJvdGF0ZUxlZnQiLCJvblJvdGF0ZVJpZ2h0Iiwib25GbGlwSG9yaXpvbnRhbCIsIm9uRmxpcFZlcnRpY2FsIiwiTEciLCJlbGVtZW50Q2xhc3NOYW1lcyIsInJlc3RQcm9wcyIsIiRsZyIsInJlZ2lzdGVyRXZlbnRzIiwiY3VycmVudCIsImxpZ2h0R2FsbGVyeSQxIiwiY2xlYW51cCIsInJlZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/react/Lightgallery.es5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/css/lg-thumbnail.css":
/*!********************************************************!*\
  !*** ./node_modules/lightgallery/css/lg-thumbnail.css ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"2dbf31239fde\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L2Nzcy9sZy10aHVtYm5haWwuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFydGZ1cnlfcmVhY3QvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L2Nzcy9sZy10aHVtYm5haWwuY3NzPzJlZTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIyZGJmMzEyMzlmZGVcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/css/lg-thumbnail.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/css/lg-zoom.css":
/*!***************************************************!*\
  !*** ./node_modules/lightgallery/css/lg-zoom.css ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"5a55e3d45137\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L2Nzcy9sZy16b29tLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL21hcnRmdXJ5X3JlYWN0Ly4vbm9kZV9tb2R1bGVzL2xpZ2h0Z2FsbGVyeS9jc3MvbGctem9vbS5jc3M/ZGU2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjVhNTVlM2Q0NTEzN1wiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/css/lg-zoom.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/css/lightgallery.css":
/*!********************************************************!*\
  !*** ./node_modules/lightgallery/css/lightgallery.css ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"3bf4401d7738\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L2Nzcy9saWdodGdhbGxlcnkuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFydGZ1cnlfcmVhY3QvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L2Nzcy9saWdodGdhbGxlcnkuY3NzP2M5OTgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIzYmY0NDAxZDc3MzhcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/css/lightgallery.css\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/scss/lg-zoom.scss":
/*!*****************************************************!*\
  !*** ./node_modules/lightgallery/scss/lg-zoom.scss ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"045f66e2e8c9\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3Njc3MvbGctem9vbS5zY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFydGZ1cnlfcmVhY3QvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3Njc3MvbGctem9vbS5zY3NzPzVkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIwNDVmNjZlMmU4YzlcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/scss/lg-zoom.scss\n");

/***/ }),

/***/ "(ssr)/./node_modules/lightgallery/scss/lightgallery.scss":
/*!**********************************************************!*\
  !*** ./node_modules/lightgallery/scss/lightgallery.scss ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"ea42a5ebe080\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbGlnaHRnYWxsZXJ5L3Njc3MvbGlnaHRnYWxsZXJ5LnNjc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJ0ZnVyeV9yZWFjdC8uL25vZGVfbW9kdWxlcy9saWdodGdhbGxlcnkvc2Nzcy9saWdodGdhbGxlcnkuc2Nzcz9iNDM0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiZWE0MmE1ZWJlMDgwXCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/lightgallery/scss/lightgallery.scss\n");

/***/ })

};
;